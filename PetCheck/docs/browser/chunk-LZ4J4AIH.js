import{$a as ss,$c as jl,A as iy,Aa as vh,Ab as my,Ac as Ry,B as tr,Ba as de,Bb as gy,Bc as xy,Ca as We,Cb as _y,Cc as on,Da as ye,Db as bt,Dc as Wn,E as kl,Ea as Ol,Eb as Th,Ec as Py,Fa as ns,Fb as Hn,Fc as an,Ga as Nt,Gb as as,Gc as Ho,H as ry,Ha as K,Hb as jn,Hc as fi,Ia as ne,Ic as pi,J as nr,Ja as yn,Jb as ls,Jc as ze,K as es,Kb as Ll,Kc as qn,L as mh,La as yh,Lb as Lo,Lc as Oy,M as tn,Ma as Se,Mb as vy,Na as hy,Nb as Bo,Nc as My,O as st,Oa as Me,Ob as yy,Oc as Oh,Pa as Ve,Pb as Ch,Pc as jo,Q as gh,Qa as fy,Qb as Et,Qc as Ul,R as sy,Ra as nn,Rb as Xt,Sa as rn,Sc as Hl,Ta as Q,Tb as wy,Tc as Vy,U as Rl,Ua as z,Ub as by,V as ce,Va as U,Vb as Ey,Vc as or,W as $e,Wa as _e,Wb as Qe,Wc as Ny,X as pe,Xa as is,Xb as sn,Y as oy,Ya as rs,Yb as Bl,Z as S,Za as Ml,Zb as $n,_ as ci,_a as at,_b as Ih,a as it,aa as ts,ab as ue,ac as Ty,ad as mi,b as _n,ba as xl,bb as X,bd as $l,c as Bn,ca as oe,cb as rr,cc as Dh,d as _,da as ae,db as kt,e as yt,ea as Vo,eb as ui,f as At,fa as _h,fb as Be,fd as Fy,g as ie,ga as De,gb as we,gc as Cy,h as Jv,ha as Xe,hb as be,i as Zv,ib as py,j as ey,ja as ay,jb as Fo,k as ty,ka as Oe,kb as wh,kc as Sh,kd as Ly,l as ch,la as ly,lb as Kt,lc as ut,ld as By,m as dh,ma as ot,mb as os,mc as Iy,md as zy,n as uh,na as cy,nb as Ae,nc as Dy,nd as gi,oa as wt,ob as bh,oc as Ah,od as Mh,p as zn,pa as di,pb as me,pc as kh,pd as Uy,q as Ke,qa as ge,qb as Ut,qc as Rh,qd as Hy,r as Al,ra as No,rb as wn,rc as xh,rd as Vh,s as hh,sa as dy,sb as Eh,sc as zo,sd as jy,t as fh,ta as Pl,tb as Vl,tc as Uo,td as $o,u as ny,ua as N,ub as Nl,uc as Sy,ud as $y,v as vn,va as Un,vb as Fl,vc as Ay,vd as Wy,wa as dt,wb as Ht,wc as En,wd as qy,x as rt,xa as ir,xb as hi,xc as zl,y as ph,ya as uy,yb as sr,yc as Ph,za as Yt,zb as bn,zc as ky}from"./chunk-PYHIAX6W.js";var Nh=class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return(this.getStyle(e,"position")||"static")==="static"}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if(this.getStyle(e,"position")==="fixed")n=e.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{let s=this.offsetParent(e);n=this.offset(e,!1),s!==document.documentElement&&(r=this.offset(s,!1)),r.top+=s.clientTop,r.left+=s.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,t&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(e,t=!0){let n=e.getBoundingClientRect(),r={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft},s={height:n.height||e.offsetHeight,width:n.width||e.offsetWidth,top:n.top+r.top,bottom:n.bottom+r.top,left:n.left+r.left,right:n.right+r.left};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(e,t,n,r){let[s="top",o="center"]=n.split("-"),l=r?this.offset(e,!1):this.position(e,!1),c=this.getAllStyles(t),d=parseFloat(c.marginTop),h=parseFloat(c.marginBottom),p=parseFloat(c.marginLeft),g=parseFloat(c.marginRight),E=0,T=0;switch(s){case"top":E=l.top-(t.offsetHeight+d+h);break;case"bottom":E=l.top+l.height;break;case"left":T=l.left-(t.offsetWidth+p+g);break;case"right":T=l.left+l.width;break}switch(o){case"top":E=l.top;break;case"bottom":E=l.top+l.height-t.offsetHeight;break;case"left":T=l.left;break;case"right":T=l.left+l.width-t.offsetWidth;break;case"center":s==="top"||s==="bottom"?T=l.left+l.width/2-t.offsetWidth/2:E=l.top+l.height/2-t.offsetHeight/2;break}t.style.transform=`translate(${Math.round(T)}px, ${Math.round(E)}px)`;let k=t.getBoundingClientRect(),R=document.documentElement,B=window.innerHeight||R.clientHeight,F=window.innerWidth||R.clientWidth;return k.left>=0&&k.top>=0&&k.right<=F&&k.bottom<=B}},$D=/\s+/,Gy=new Nh;function Fh(i,e,t,n,r){let s=Array.isArray(t)?t:t.split($D),o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],l=e.classList,c=E=>{let[T,k]=E.split("-"),R=[];return r&&(R.push(`${r}-${T}`),k&&R.push(`${r}-${T}-${k}`),R.forEach(B=>{l.add(B)})),R};r&&o.forEach(E=>{l.remove(`${r}-${E}`)});let d=s.findIndex(E=>E==="auto");d>=0&&o.forEach(function(E){s.find(T=>T.search("^"+E)!==-1)==null&&s.splice(d++,1,E)});let h=e.style;h.position="absolute",h.top="0",h.left="0",h["will-change"]="transform";let p,g=!1;for(p of s){let E=c(p);if(Gy.positionElements(i,e,p,n)){g=!0;break}r&&E.forEach(T=>{l.remove(T)})}return g||(p=s[0],c(p),Gy.positionElements(i,e,p,n)),p}var Gl=(function(i){return i[i.SUNDAY=0]="SUNDAY",i[i.MONDAY=1]="MONDAY",i[i.TUESDAY=2]="TUESDAY",i[i.WEDNESDAY=3]="WEDNESDAY",i[i.THURSDAY=4]="THURSDAY",i[i.FRIDAY=5]="FRIDAY",i[i.SATURDAY=6]="SATURDAY",i})(Gl||{}),WD=[Gl.SUNDAY,Gl.SATURDAY],Lh=7,Bh=24,Wl=60,_i=3600*24;function Yy(i,{startDate:e,seconds:t,excluded:n,precision:r}){if(n.length<1)return 0;let{addSeconds:s,getDay:o,addDays:l}=i,c=s(e,t-1),d=o(e),h=o(c),p=0,g=e;for(;g<c;){let E=o(g);n.some(T=>T===E)&&(p+=qD(i,{dayStart:d,dayEnd:h,day:E,precision:r,startDate:e,endDate:c})),g=l(g,1)}return p}function qD(i,{precision:e,day:t,dayStart:n,dayEnd:r,startDate:s,endDate:o}){let{differenceInSeconds:l,endOfDay:c,startOfDay:d}=i;if(e==="minutes"){if(t===n)return l(c(s),s)+1;if(t===r)return l(o,d(o))+1}return _i}function GD(i,{event:e,offset:t,startOfWeekDate:n,excluded:r,precision:s,totalDaysInView:o}){let{max:l,differenceInSeconds:c,addDays:d,endOfDay:h,differenceInDays:p}=i,g=_i,E=l([e.start,n]);if(e.end)switch(s){case"minutes":g=c(e.end,E);break;default:g=p(d(h(e.end),1),E)*_i;break}let T=t*_i,k=T+g,R=o*_i;return k>R&&(g=R-T),g-=Yy(i,{startDate:E,seconds:g,excluded:r,precision:s}),g/_i}function YD(i,{event:e,startOfWeek:t,excluded:n,precision:r}){let{differenceInDays:s,startOfDay:o,differenceInSeconds:l}=i;if(e.start<t)return 0;let c=0;switch(r){case"days":c=s(o(e.start),t)*_i;break;case"minutes":c=l(e.start,t);break}return c-=Yy(i,{startDate:t,seconds:c,excluded:n,precision:r}),Math.abs(c/_i)}function KD(i,{event:e,periodStart:t,periodEnd:n}){let{isSameSecond:r}=i,s=e.start,o=e.end||e.start;return!!(s>t&&s<n||o>t&&o<n||s<t&&o>n||r(s,t)||r(s,n)||r(o,t)||r(o,n))}function Wo(i,{events:e,periodStart:t,periodEnd:n}){return e.filter(r=>KD(i,{event:r,periodStart:t,periodEnd:n}))}function Ky(i,{date:e,weekendDays:t=WD}){let{startOfDay:n,isSameDay:r,getDay:s}=i,o=n(new Date),l=s(e);return{date:e,day:l,isPast:e<o,isToday:r(e,o),isFuture:e>o,isWeekend:t.indexOf(l)>-1}}function Xl(i,{viewDate:e,weekStartsOn:t,excluded:n=[],weekendDays:r,viewStart:s=i.startOfWeek(e,{weekStartsOn:t}),viewEnd:o=i.addDays(s,Lh)}){let{addDays:l,getDay:c}=i,d=[],h=s;for(;h<o;)n.some(p=>c(h)===p)||d.push(Ky(i,{date:h,weekendDays:r})),h=l(h,1);return d}function XD(i,{date1:e,date2:t,excluded:n}){let r=e,s=0;for(;r<t;)n.indexOf(i.getDay(r))===-1&&s++,r=i.addDays(r,1);return s}function QD(i,{events:e=[],excluded:t=[],precision:n="days",absolutePositionedEvents:r=!1,viewStart:s,viewEnd:o}){s=i.startOfDay(s),o=i.endOfDay(o);let{differenceInSeconds:l,differenceInDays:c}=i,d=XD(i,{date1:s,date2:o,excluded:t}),h=c(o,s)+1,p=e.filter(T=>T.allDay).map(T=>{let k=YD(i,{event:T,startOfWeek:s,excluded:t,precision:n}),R=GD(i,{event:T,offset:k,startOfWeekDate:s,excluded:t,precision:n,totalDaysInView:h});return{event:T,offset:k,span:R}}).filter(T=>T.offset<d).filter(T=>T.span>0).map(T=>({event:T.event,offset:T.offset,span:T.span,startsBeforeWeek:T.event.start<s,endsAfterWeek:(T.event.end||T.event.start)>o})).sort((T,k)=>{let R=l(T.event.start,k.event.start);return R===0?l(k.event.end||k.event.start,T.event.end||T.event.start):R}),g=[],E=[];return p.forEach((T,k)=>{if(E.indexOf(T)===-1){E.push(T);let R=T.span+T.offset,B=p.slice(k+1).filter(H=>{if(H.offset>=R&&R+H.span<=h&&E.indexOf(H)===-1){let W=H.offset-R;return r||(H.offset=W),R+=H.span+W,E.push(H),!0}}),F=[T,...B],M=F.filter(H=>H.event.id).map(H=>H.event.id).join("-");g.push(Object.assign({row:F},M?{id:M}:{}))}}),g}function JD(i,{events:e,viewDate:t,hourSegments:n,hourDuration:r,dayStart:s,dayEnd:o,weekStartsOn:l,excluded:c,weekendDays:d,segmentHeight:h,viewStart:p,viewEnd:g,minimumEventHeight:E}){let T=eS(i,{viewDate:t,hourSegments:n,hourDuration:r,dayStart:s,dayEnd:o}),k=Xl(i,{viewDate:t,weekStartsOn:l,excluded:c,weekendDays:d,viewStart:p,viewEnd:g}),{setHours:R,setMinutes:B,getHours:F,getMinutes:M}=i;return k.map(H=>{let W=ZD(i,{events:e,viewDate:H.date,hourSegments:n,dayStart:s,dayEnd:o,segmentHeight:h,eventWidth:1,hourDuration:r,minimumEventHeight:E}),G=T.map(y=>{let D=y.segments.map(w=>{let C=B(R(H.date,F(w.date)),M(w.date));return Object.assign(Object.assign({},w),{date:C})});return Object.assign(Object.assign({},y),{segments:D})});function I(y,D){let w=Math.max(...D.map(b=>b.left+1)),C=y.filter(b=>b.left>=w).filter(b=>ql(D,b.top,b.top+b.height).length>0);return C.length>0?I(y,C):w}let v=W.events.map(y=>{let w=100/I(W.events,ql(W.events,y.top,y.top+y.height));return Object.assign(Object.assign({},y),{left:y.left*w,width:w})});return{hours:G,date:H.date,events:v.map(y=>{let D=ql(v.filter(w=>w.left>y.left),y.top,y.top+y.height);return D.length>0?Object.assign(Object.assign({},y),{width:Math.min(...D.map(w=>w.left))-y.left}):y})}})}function Xy(i,{events:e=[],viewDate:t,weekStartsOn:n,excluded:r=[],precision:s="days",absolutePositionedEvents:o=!1,hourSegments:l,hourDuration:c,dayStart:d,dayEnd:h,weekendDays:p,segmentHeight:g,minimumEventHeight:E,viewStart:T=i.startOfWeek(t,{weekStartsOn:n}),viewEnd:k=i.endOfWeek(t,{weekStartsOn:n})}){e||(e=[]);let{startOfDay:R,endOfDay:B}=i;T=R(T),k=B(k);let F=Wo(i,{events:e,periodStart:T,periodEnd:k}),M=Xl(i,{viewDate:t,weekStartsOn:n,excluded:r,weekendDays:p,viewStart:T,viewEnd:k});return{allDayEventRows:QD(i,{events:F,excluded:r,precision:s,absolutePositionedEvents:o,viewStart:T,viewEnd:k}),period:{events:F,start:M[0].date,end:B(M[M.length-1].date)},hourColumns:JD(i,{events:e,viewDate:t,hourSegments:l,hourDuration:c,dayStart:d,dayEnd:h,weekStartsOn:n,excluded:r,weekendDays:p,segmentHeight:g,viewStart:T,viewEnd:k,minimumEventHeight:E})}}function Qy(i,{events:e=[],viewDate:t,weekStartsOn:n,excluded:r=[],viewStart:s=i.startOfMonth(t),viewEnd:o=i.endOfMonth(t),weekendDays:l}){e||(e=[]);let{startOfWeek:c,endOfWeek:d,differenceInDays:h,startOfDay:p,addHours:g,endOfDay:E,isSameMonth:T,getDay:k}=i,R=c(s,{weekStartsOn:n}),B=d(o,{weekStartsOn:n}),F=Wo(i,{events:e,periodStart:R,periodEnd:B}),M=[],H;for(let y=0;y<h(B,R)+1;y++){let D;if(H?(D=p(g(H,Bh)),H.getTime()===D.getTime()&&(D=p(g(H,Bh+1))),H=D):D=H=R,!r.some(w=>k(D)===w)){let w=Ky(i,{date:D,weekendDays:l}),C=Wo(i,{events:F,periodStart:p(D),periodEnd:E(D)});w.inMonth=T(D,t),w.events=C,w.badgeTotal=C.length,M.push(w)}}let W=[],G=Lh-r.length;if(G<Lh)for(let y=0;y<M.length;y+=G){let D=M.slice(y,y+G);D.some(C=>s<=C.date&&C.date<o)&&(W=[...W,...D])}else W=M;let I=Math.floor(W.length/G),v=[];for(let y=0;y<I;y++)v.push(y*G);return{rowOffsets:v,totalDaysVisibleInWeek:G,days:W,period:{start:W[0].date,end:E(W[W.length-1].date),events:F}}}function ql(i,e,t){return i.filter(n=>{let r=n.top,s=n.top+n.height;return e<s&&s<t||e<r&&r<t?!0:r<=e&&t<=s})}function ZD(i,{events:e,viewDate:t,hourSegments:n,dayStart:r,dayEnd:s,eventWidth:o,segmentHeight:l,hourDuration:c,minimumEventHeight:d}){let{setMinutes:h,setHours:p,startOfDay:g,startOfMinute:E,endOfDay:T,differenceInMinutes:k}=i,R=h(p(g(t),Yl(r.hour)),Kl(r.minute)),B=h(p(E(T(t)),Yl(s.hour)),Kl(s.minute));B.setSeconds(59,999);let F=[],M=Wo(i,{events:e.filter(I=>!I.allDay),periodStart:R,periodEnd:B}),H=M.sort((I,v)=>I.start.valueOf()-v.start.valueOf()).map(I=>{let v=I.start,y=I.end||v,D=v<R,w=y>B,C=n*l/(c||Wl),b=0;if(v>R){let Gt=i.getTimezoneOffset(v),Lu=i.getTimezoneOffset(R)-Gt;b+=k(v,R)+Lu}b*=C,b=Math.floor(b);let je=D?R:v,si=w?B:y,Fu=i.getTimezoneOffset(je)-i.getTimezoneOffset(si),Vt=k(si,je)+Fu;I.end?Vt*=C:Vt=l,d&&Vt<d&&(Vt=d),Vt=Math.floor(Vt);let Xi=b+Vt,vo=ql(F,b,Xi),Kr=0;for(;vo.some(Gt=>Gt.left===Kr);)Kr+=o;let dl={event:I,height:Vt,width:o,top:b,left:Kr,startsBeforeDay:D,endsAfterDay:w};return F.push(dl),dl}),W=Math.max(...H.map(I=>I.left+I.width)),G=Wo(i,{events:e.filter(I=>I.allDay),periodStart:g(R),periodEnd:T(B)});return{events:H,width:W,allDayEvents:G,period:{events:M,start:R,end:B}}}function Yl(i){return Math.max(Math.min(23,i),0)}function Kl(i){return Math.max(Math.min(59,i),0)}function eS(i,{viewDate:e,hourSegments:t,hourDuration:n,dayStart:r,dayEnd:s}){let{setMinutes:o,setHours:l,startOfDay:c,startOfMinute:d,endOfDay:h,addMinutes:p,addDays:g}=i,E=[],T=o(l(c(e),Yl(r.hour)),Kl(r.minute)),k=o(l(d(h(e)),Yl(s.hour)),Kl(s.minute)),R=(n||Wl)/t,B=c(e),F=h(e),M=W=>W;i.getTimezoneOffset(B)!==i.getTimezoneOffset(F)&&(B=g(B,1),T=g(T,1),k=g(k,1),M=W=>g(W,-1));let H=n?Bh*60/n:Wl;for(let W=0;W<H;W++){let G=[];for(let I=0;I<t;I++){let v=p(p(T,W*(n||Wl)),I*R);v>=T&&v<k&&G.push({date:M(v),displayDate:v,isStart:I===0})}G.length>0&&E.push({segments:G})}return E}var cs=(function(i){return i.NotArray="Events must be an array",i.StartPropertyMissing="Event is missing the `start` property",i.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",i.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",i.EndsBeforeStart="Event `start` property occurs after the `end`",i})(cs||{});function Jy(i,e){let t=!0;function n(r,s){e(r,s),t=!1}return Array.isArray(i)?(i.forEach(r=>{r.start?r.start instanceof Date||n(cs.StartPropertyNotDate,r):n(cs.StartPropertyMissing,r),r.end&&(r.end instanceof Date||n(cs.EndPropertyNotDate,r),r.start>r.end&&n(cs.EndsBeforeStart,r))}),t):(e(cs.NotArray,i),!1)}function tS(i,e){return typeof i>"u"?typeof e>"u"?i:e:i}function jh(i,e){return i=tS(i,e),typeof i=="function"?function(){for(var n=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=n[o];return!!i.apply(this,s)}:i?function(){return!0}:function(){return!1}}var zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol?"symbol":typeof i},ew=function(i){return i!=null&&(typeof i>"u"?"undefined":zh(i))==="object"&&i.nodeType===1&&zh(i.style)==="object"&&zh(i.ownerDocument)==="object"};function tw(i,e){if(e=qh(e,!0),!ew(e))return-1;for(var t=0;t<i.length;t++)if(i[t]===e)return t;return-1}function $h(i,e){return tw(i,e)!==-1}function nS(i,e){for(var t=0;t<e.length;t++)$h(i,e[t])||i.push(e[t]);return e}function iS(i){for(var e=arguments,t=[],n=arguments.length-1;n-- >0;)t[n]=e[n+1];return t=t.map(qh),nS(i,t)}function rS(i){for(var e=arguments,t=[],n=arguments.length-1;n-- >0;)t[n]=e[n+1];return t.map(qh).reduce(function(r,s){var o=tw(i,s);return o!==-1?r.concat(i.splice(o,1)):r},[])}function qh(i,e){if(typeof i=="string")try{return document.querySelector(i)}catch(t){throw t}if(!ew(i)&&!e)throw new TypeError(i+" is not a DOM element.");return i}function sS(i,e){e=e||{};var t=jh(e.allowUpdate,!0);return function(r){if(r=r||window.event,i.target=r.target||r.srcElement||r.originalTarget,i.element=this,i.type=r.type,!!t(r)){if(r.targetTouches)i.x=r.targetTouches[0].clientX,i.y=r.targetTouches[0].clientY,i.pageX=r.targetTouches[0].pageX,i.pageY=r.targetTouches[0].pageY,i.screenX=r.targetTouches[0].screenX,i.screenY=r.targetTouches[0].screenY;else{if(r.pageX===null&&r.clientX!==null){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,l=s.body;i.pageX=r.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),i.pageY=r.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}else i.pageX=r.pageX,i.pageY=r.pageY;i.x=r.clientX,i.y=r.clientY,i.screenX=r.screenX,i.screenY=r.screenY}i.clientX=i.x,i.clientY=i.y}}}function oS(){var i={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},i);var e={};return Object.defineProperties(e,i),e}function nw(i){if(i===window)return oS();try{var e=i.getBoundingClientRect();return e.x===void 0&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+i)}}function aS(i,e){var t=nw(e);return i.y>t.top&&i.y<t.bottom&&i.x>t.left&&i.x<t.right}var Wh=void 0;typeof Object.create!="function"?Wh=(function(i){var e=function(){};return function(t,n){if(t!==Object(t)&&t!==null)throw TypeError("Argument must be an object, or null");e.prototype=t||{};var r=new e;return e.prototype=null,n!==i&&Object.defineProperties(r,n),t===null&&(r.__proto__=null),r}})():Wh=Object.create;var lS=Wh,ar=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function cS(i){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};i!==void 0&&i.addEventListener("mousemove",t);function t(s){for(var o=0;o<ar.length;o++)e[ar[o]]=s[ar[o]]}var n=(function(){if(MouseEvent)return function(o,l,c){var d=new MouseEvent("mousemove",Uh(e,l));return Hh(d,c),o.dispatchEvent(d)};if(typeof document.createEvent=="function")return function(o,l,c){var d=Uh(e,l),h=document.createEvent("MouseEvents");return h.initMouseEvent("mousemove",!0,!0,window,0,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget),Hh(h,c),o.dispatchEvent(h)};if(typeof document.createEventObject=="function")return function(o,l,c){var d=document.createEventObject(),h=Uh(e,l);for(var p in h)d[p]=h[p];return Hh(d,c),o.dispatchEvent(d)}})();function r(){i&&i.removeEventListener("mousemove",t,!1),e=null}return{destroy:r,dispatch:n}}function Uh(i,e){e=e||{};for(var t=lS(i),n=0;n<ar.length;n++)e[ar[n]]!==void 0&&(t[ar[n]]=e[ar[n]]);return t}function Hh(i,e){console.log("data ",e),i.data=e||{},i.dispatched="mousemove"}var Go=["webkit","moz","ms","o"],qo=(function(){if(typeof window>"u")return function(){};for(var i=0,e=Go.length;i<e&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[Go[i]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var t=0;window.requestAnimationFrame=function(n){var r=new Date().getTime(),s=Math.max(0,16-r-t),o=window.setTimeout(function(){return n(r+s)},s);return t=r+s,o}}return window.requestAnimationFrame.bind(window)})(),ds=(function(){if(typeof window>"u")return function(){};for(var i=0,e=Go.length;i<e&&!window.cancelAnimationFrame;++i)window.cancelAnimationFrame=window[Go[i]+"CancelAnimationFrame"]||window[Go[i]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)}),window.cancelAnimationFrame.bind(window)})();function dS(i,e){e===void 0&&(e={});var t=this,n=4,r=!1;if(typeof e.margin!="object"){var s=e.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},l=sS(o),c=cS(),d=!1;window.addEventListener("mousemove",l,!1),window.addEventListener("touchmove",l,!1),isNaN(e.maxSpeed)||(n=e.maxSpeed),typeof n!="object"&&(n={left:n,right:n,top:n,bottom:n}),this.autoScroll=jh(e.autoScroll),this.syncMove=jh(e.syncMove,!1),this.destroy=function(w){window.removeEventListener("mousemove",l,!1),window.removeEventListener("touchmove",l,!1),window.removeEventListener("mousedown",k,!1),window.removeEventListener("touchstart",k,!1),window.removeEventListener("mouseup",R,!1),window.removeEventListener("touchend",R,!1),window.removeEventListener("pointerup",R,!1),window.removeEventListener("mouseleave",F,!1),window.removeEventListener("mousemove",W,!1),window.removeEventListener("touchmove",W,!1),window.removeEventListener("scroll",T,!0),i=[],w&&B()},this.add=function(){for(var w=[],C=arguments.length;C--;)w[C]=arguments[C];return iS.apply(void 0,[i].concat(w)),this},this.remove=function(){for(var w=[],C=arguments.length;C--;)w[C]=arguments[C];return rS.apply(void 0,[i].concat(w))};var h=null,p;Object.prototype.toString.call(i)!=="[object Array]"&&(i=[i]),(function(w){i=[],w.forEach(function(C){C===window?h=window:t.add(C)})})(i),Object.defineProperties(this,{down:{get:function(){return d}},maxSpeed:{get:function(){return n}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var g=null,E;window.addEventListener("mousedown",k,!1),window.addEventListener("touchstart",k,!1),window.addEventListener("mouseup",R,!1),window.addEventListener("touchend",R,!1),window.addEventListener("pointerup",R,!1),window.addEventListener("mousemove",W,!1),window.addEventListener("touchmove",W,!1),window.addEventListener("mouseleave",F,!1),window.addEventListener("scroll",T,!0);function T(w){for(var C=0;C<i.length;C++)if(i[C]===w.target){r=!0;break}r&&qo(function(){return r=!1})}function k(){d=!0}function R(){d=!1,B()}function B(){ds(E),ds(p)}function F(){d=!1}function M(w){if(!w)return null;if(g===w||$h(i,w))return w;for(;w=w.parentNode;)if($h(i,w))return w;return null}function H(){for(var w=null,C=0;C<i.length;C++)Zy(o,i[C])&&(w=i[C]);return w}function W(w){if(t.autoScroll()&&!w.dispatched){var C=w.target,b=document.body;g&&!Zy(o,g)&&(t.scrollWhenOutside||(g=null)),C&&C.parentNode===b?C=H():(C=M(C),C||(C=H())),C&&C!==g&&(g=C),h&&(ds(p),p=qo(G)),g&&(ds(E),E=qo(I))}}function G(){v(h),ds(p),p=qo(G)}function I(){g&&(v(g),ds(E),E=qo(I))}function v(w){var C=nw(w),b,je;o.x<C.left+t.margin.left?b=Math.floor(Math.max(-1,(o.x-C.left)/t.margin.left-1)*t.maxSpeed.left):o.x>C.right-t.margin.right?b=Math.ceil(Math.min(1,(o.x-C.right)/t.margin.right+1)*t.maxSpeed.right):b=0,o.y<C.top+t.margin.top?je=Math.floor(Math.max(-1,(o.y-C.top)/t.margin.top-1)*t.maxSpeed.top):o.y>C.bottom-t.margin.bottom?je=Math.ceil(Math.min(1,(o.y-C.bottom)/t.margin.bottom+1)*t.maxSpeed.bottom):je=0,t.syncMove()&&c.dispatch(w,{pageX:o.pageX+b,pageY:o.pageY+je,clientX:o.x+b,clientY:o.y+je}),setTimeout(function(){je&&y(w,je),b&&D(w,b)})}function y(w,C){w===window?window.scrollTo(w.pageXOffset,w.pageYOffset+C):w.scrollTop+=C}function D(w,C){w===window?window.scrollTo(w.pageXOffset+C,w.pageYOffset):w.scrollLeft+=C}}function uS(i,e){return new dS(i,e)}function Zy(i,e,t){return t?i.y>t.top&&i.y<t.bottom&&i.x>t.left&&i.x<t.right:aS(i,e)}var iw=uS;var sw=(()=>{let e=class e{constructor(){this.currentDrag=new ie}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),ow=(()=>{let e=class e{constructor(){this.elementRef=S(ge)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","mwlDraggableScrollContainer",""]]});let i=e;return i})();function Gh(i,e,t){t&&t.split(" ").forEach(n=>i.addClass(e.nativeElement,n))}function Ql(i,e,t){t&&t.split(" ").forEach(n=>i.removeClass(e.nativeElement,n))}var Yh=(()=>{let e=class e{constructor(){this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new K,this.dragStart=new K,this.ghostElementCreated=new K,this.dragging=new K,this.dragEnd=new K,this.pointerDown$=new ie,this.pointerMove$=new ie,this.pointerUp$=new ie,this.eventListenerSubscriptions={},this.destroy$=new ie,this.timeLongPress={timerBegin:0,timerEnd:0},this.element=S(ge),this.renderer=S(dt),this.draggableHelper=S(sw),this.zone=S(ne),this.vcr=S(Yt),this.scrollContainer=S(ow,{optional:!0}),this.document=S(Xe)}ngOnInit(){this.checkEventListeners();let n=this.pointerDown$.pipe(rt(()=>this.canDrag()),hh(r=>{r.event.stopPropagation&&!this.scrollContainer&&r.event.stopPropagation();let s=this.renderer.createElement("style");this.renderer.setAttribute(s,"type","text/css"),this.renderer.appendChild(s,this.renderer.createText(`
          body * {
           -moz-user-select: none;
           -ms-user-select: none;
           -webkit-user-select: none;
           user-select: none;
          }
        `)),requestAnimationFrame(()=>{this.document.head.appendChild(s)});let o=this.getScrollPosition(),l=new At(T=>{let k=this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window";return this.renderer.listen(k,"scroll",R=>T.next(R))}).pipe(tn(o),Ke(()=>this.getScrollPosition())),c=new ie,d=new Jv;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});let h=vn(this.pointerUp$,this.pointerDown$,d,this.destroy$).pipe(es()),p=Al([this.pointerMove$,l]).pipe(Ke(([T,k])=>({currentDrag$:c,transformX:T.clientX-r.clientX,transformY:T.clientY-r.clientY,clientX:T.clientX,clientY:T.clientY,scrollLeft:k.left,scrollTop:k.top,target:T.event.target})),Ke(T=>(this.dragSnapGrid.x&&(T.transformX=Math.round(T.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(T.transformY=Math.round(T.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),T)),Ke(T=>(this.dragAxis.x||(T.transformX=0),this.dragAxis.y||(T.transformY=0),T)),Ke(T=>{let k=T.scrollLeft-o.left,R=T.scrollTop-o.top;return _n(it({},T),{x:T.transformX+k,y:T.transformY+R})}),rt(({x:T,y:k,transformX:R,transformY:B})=>!this.validateDrag||this.validateDrag({x:T,y:k,transform:{x:R,y:B}})),st(h),es()),g=p.pipe(tr(1),es()),E=p.pipe(ry(1),es());return g.subscribe(({clientX:T,clientY:k,x:R,y:B})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:d})}),this.scroller=iw([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],_n(it({},this.autoScroll),{autoScroll(){return!0}})),Gh(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){let F=this.element.nativeElement.getBoundingClientRect(),M=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(M):this.element.nativeElement.parentNode.insertBefore(M,this.element.nativeElement.nextSibling),this.ghostElement=M,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(M,{position:"fixed",top:`${F.top}px`,left:`${F.left}px`,width:`${F.width}px`,height:`${F.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){let H=this.vcr.createEmbeddedView(this.ghostElementTemplate);M.innerHTML="",H.rootNodes.filter(W=>W instanceof Node).forEach(W=>{M.appendChild(W)}),E.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(H))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:T-R,clientY:k-B,element:M})}),E.subscribe(()=>{M.parentElement.removeChild(M),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(c)}),E.pipe(hh(T=>{let k=d.pipe(iy(),tr(1),Ke(R=>_n(it({},T),{dragCancelled:R>0})));return d.complete(),k})).subscribe(({x:T,y:k,dragCancelled:R})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:T,y:k,dragCancelled:R})}),Ql(this.renderer,this.element,this.dragActiveClass),c.complete()}),vn(h,E).pipe(tr(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(s)})}),p}),es());vn(n.pipe(tr(1),Ke(r=>[,r])),n.pipe(nr())).pipe(rt(([r,s])=>r?r.x!==s.x||r.y!==s.y:!0),Ke(([r,s])=>s)).subscribe(({x:r,y:s,currentDrag$:o,clientX:l,clientY:c,transformX:d,transformY:h,target:p})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:r,y:s})}),requestAnimationFrame(()=>{if(this.ghostElement){let g=`translate3d(${d}px, ${h}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:g,"-webkit-transform":g,"-ms-transform":g,"-moz-transform":g,"-o-transform":g})}}),o.next({clientX:l,clientY:c,dropData:this.dropData,target:p})})}ngOnChanges(n){n.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){let n=this.canDrag(),r=Object.keys(this.eventListenerSubscriptions).length>0;n&&!r?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",s=>{this.onMouseDown(s)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",s=>{this.onMouseUp(s)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",s=>{this.onTouchStart(s)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",s=>{this.onTouchEnd(s)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",s=>{this.onTouchEnd(s)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!n&&r&&this.unsubscribeEventListeners()}onMouseDown(n){n.button===0&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",r=>{this.pointerMove$.next({event:r,clientX:r.clientX,clientY:r.clientY})})),this.pointerDown$.next({event:n,clientX:n.clientX,clientY:n.clientY}))}onMouseUp(n){n.button===0&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:n,clientX:n.clientX,clientY:n.clientY}))}onTouchStart(n){let r,s,o;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),s=!1,o=this.hasScrollbar(),r=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){let l=fh(this.document,"contextmenu").subscribe(d=>{d.preventDefault()}),c=fh(this.document,"touchmove",{passive:!1}).subscribe(d=>{this.touchStartLongPress&&!s&&o&&(s=this.shouldBeginDrag(n,d,r)),(!this.touchStartLongPress||!o||s)&&(d.preventDefault(),this.pointerMove$.next({event:d,clientX:d.targetTouches[0].clientX,clientY:d.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{l.unsubscribe(),c.unsubscribe()}}this.pointerDown$.next({event:n,clientX:n.touches[0].clientX,clientY:n.touches[0].clientY})}onTouchEnd(n){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:n,clientX:n.changedTouches[0].clientX,clientY:n.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(n){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",n)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(n=>{this.eventListenerSubscriptions[n](),delete this.eventListenerSubscriptions[n]})}setElementStyles(n,r){Object.keys(r).forEach(s=>{this.renderer.setStyle(n,s,r[s])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(n,r,s){let o=this.getScrollPosition(),l={top:Math.abs(o.top-s.top),left:Math.abs(o.left-s.left)},c=Math.abs(r.targetTouches[0].clientX-n.touches[0].clientX)-l.left,d=Math.abs(r.targetTouches[0].clientY-n.touches[0].clientY)-l.top,h=c+d,p=this.touchStartLongPress;return(h>p.delta||l.top>0||l.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=p.delay?(this.disableScroll(),!0):!1}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){let n=this.getScrollElement(),r=n.scrollWidth>n.clientWidth,s=n.scrollHeight>n.clientHeight;return r||s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[wt]});let i=e;return i})();function rw(i,e,t){return i>=t.left&&i<=t.right&&e>=t.top&&e<=t.bottom}var aw=(()=>{let e=class e{constructor(){this.dragEnter=new K,this.dragLeave=new K,this.dragOver=new K,this.drop=new K,this.element=S(ge),this.draggableHelper=S(sw),this.zone=S(ne),this.renderer=S(dt),this.scrollContainer=S(ow,{optional:!0})}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(n=>{Gh(this.renderer,this.element,this.dragActiveClass);let r={updateCache:!0},s=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{r.updateCache=!0}),o,l=n.pipe(Ke(({clientX:h,clientY:p,dropData:g,target:E})=>{o={clientX:h,clientY:p,dropData:g,target:E},r.updateCache&&(r.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(r.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),r.updateCache=!1);let T=rw(h,p,r.rect),k=!this.validateDrop||this.validateDrop({clientX:h,clientY:p,target:E,dropData:g});return r.scrollContainerRect?T&&k&&rw(h,p,r.scrollContainerRect):T&&k})),c=l.pipe(kl()),d;c.pipe(rt(h=>h)).subscribe(()=>{d=!0,Gh(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(o)})}),l.pipe(rt(h=>h)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(o)})}),c.pipe(nr(),rt(([h,p])=>h&&!p)).subscribe(()=>{d=!1,Ql(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(o)})}),n.subscribe({complete:()=>{s(),Ql(this.renderer,this.element,this.dragActiveClass),d&&(Ql(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(o)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}});let i=e;return i})();var cw=i=>({event:i}),fS=i=>({action:i}),Qh=(i,e)=>e.id??e;function pS(i,e){if(i&1){let t=at();z(0,"a",4),bt(1,"calendarA11y"),ue("mwlClick",function(r){let s=oe(t).$implicit,o=X(2).event;return ae(s.onClick({event:o,sourceEvent:r}))})("mwlKeydownEnter",function(r){let s=oe(t).$implicit,o=X(2).event;return ae(s.onClick({event:o,sourceEvent:r}))}),U()}if(i&2){let t=e.$implicit;Q("ngClass",t.cssClass)("innerHtml",t.label,Pl),Se("aria-label",Hn(1,3,sr(6,fS,t),"actionButtonLabel"))}}function mS(i,e){if(i&1&&(z(0,"span",2),nn(1,pS,2,8,"a",3,Qh),U()),i&2){let t=X().event;N(),rn(t.actions)}}function gS(i,e){if(i&1&&Me(0,mS,3,0,"span",2),i&2){let t=e.event;Ve(t.actions?0:-1)}}function _S(i,e){}var vS=(i,e)=>({event:i,view:e}),Jh=()=>({});function yS(i,e){if(i&1&&(_e(0,"span",2),bt(1,"calendarEventTitle"),bt(2,"calendarA11y")),i&2){let t=e.event,n=e.view;Q("innerHTML",as(1,2,t.title,n,t),Pl),Se("aria-hidden",Hn(2,6,hi(9,Jh),"hideEventTitle"))}}function wS(i,e){}var bS=(i,e,t)=>({contents:i,placement:e,event:t});function ES(i,e){if(i&1&&(z(0,"div",2),_e(1,"div",3)(2,"div",4),U()),i&2){let t=e.contents,n=e.placement;Q("ngClass","cal-tooltip-"+n),N(2),Q("innerHtml",t,Pl)}}function TS(i,e){}var CS=(i,e)=>({days:i,locale:e}),dw=(i,e)=>e.date.toISOString();function IS(i,e){if(i&1){let t=at();z(0,"div",4),ue("click",function(r){let s=oe(t).$implicit,o=X(2);return ae(o.columnHeaderClicked.emit({isoDayNumber:s.day,sourceEvent:r}))}),me(1),bt(2,"calendarDate"),U()}if(i&2){let t=e.$implicit,n=X().locale;Ae("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend),Q("ngClass",t.cssClass),N(),wn(" ",as(2,10,t.date,"monthViewColumnHeader",n)," ")}}function DS(i,e){if(i&1&&(z(0,"div",2),nn(1,IS,3,14,"div",3,dw),U()),i&2){let t=e.days;N(),rn(t)}}function SS(i,e){}var AS=(i,e,t,n,r,s,o,l,c,d,h)=>({day:i,openDay:e,locale:t,tooltipPlacement:n,highlightDay:r,unhighlightDay:s,eventClicked:o,tooltipTemplate:l,tooltipAppendToBody:c,tooltipDelay:d,validateDrag:h}),kS=(i,e)=>({day:i,locale:e}),Zh=i=>({backgroundColor:i}),RS=(i,e)=>({event:i,draggedFrom:e}),uw=(i,e)=>({x:i,y:e}),hw=()=>({delay:300,delta:30});function xS(i,e){if(i&1&&(z(0,"span",4),me(1),U()),i&2){let t=X().day;N(),Ut(t.badgeTotal)}}function PS(i,e){if(i&1){let t=at();z(0,"div",8),bt(1,"calendarEventTitle"),bt(2,"calendarA11y"),ue("mouseenter",function(){let r=oe(t).$implicit,s=X(2).highlightDay;return ae(s.emit({event:r}))})("mouseleave",function(){let r=oe(t).$implicit,s=X(2).unhighlightDay;return ae(s.emit({event:r}))})("mwlClick",function(r){let s=oe(t).$implicit,o=X(2).eventClicked;return ae(o.emit({event:s,sourceEvent:r}))}),U()}if(i&2){let t=e.$implicit,n=X(2),r=n.day,s=n.tooltipPlacement,o=n.tooltipTemplate,l=n.tooltipAppendToBody,c=n.tooltipDelay,d=n.validateDrag;Ae("cal-draggable",t.draggable),Q("ngStyle",sr(22,Zh,t.color==null?null:t.color.primary))("ngClass",t==null?null:t.cssClass)("mwlCalendarTooltip",as(1,15,t.title,"monthTooltip",t))("tooltipPlacement",s)("tooltipEvent",t)("tooltipTemplate",o)("tooltipAppendToBody",l)("tooltipDelay",c)("dropData",bn(24,RS,t,r))("dragAxis",bn(27,uw,t.draggable,t.draggable))("validateDrag",d)("touchStartLongPress",hi(30,hw)),Se("aria-hidden",Hn(2,19,hi(31,Jh),"hideMonthCellEvents"))}}function OS(i,e){if(i&1&&(z(0,"div",6),nn(1,PS,3,32,"div",7,Qh),U()),i&2){let t=X().day;N(),rn(t.events)}}function MS(i,e){if(i&1&&(z(0,"div",2),bt(1,"calendarA11y"),z(2,"span",3),Me(3,xS,2,1,"span",4),z(4,"span",5),me(5),bt(6,"calendarDate"),U()()(),Me(7,OS,3,0,"div",6)),i&2){let t=e.day,n=e.locale;Se("aria-label",Hn(1,4,bn(11,kS,t,n),"monthCell")),N(3),Ve(t.badgeTotal>0?3:-1),N(2),Ut(as(6,7,t.date,"monthViewDayNumber",n)),N(2),Ve(t.events.length>0?7:-1)}}function VS(i,e){}var NS=(i,e,t,n)=>({events:i,eventClicked:e,isOpen:t,validateDrag:n}),lw=(i,e)=>({date:i,locale:e}),FS=(i,e)=>({event:i,locale:e});function LS(i,e){if(i&1){let t=at();z(0,"div",6),_e(1,"span",7),me(2," "),z(3,"mwl-calendar-event-title",8),bt(4,"calendarA11y"),ue("mwlClick",function(r){let s=oe(t).$implicit,o=X(2).eventClicked;return ae(o.emit({event:s,sourceEvent:r}))})("mwlKeydownEnter",function(r){let s=oe(t).$implicit,o=X(2).eventClicked;return ae(o.emit({event:s,sourceEvent:r}))}),U(),me(5," "),_e(6,"mwl-calendar-event-actions",9),U()}if(i&2){let t=e.$implicit,n=X(2).validateDrag,r=X();Ae("cal-draggable",t.draggable),Q("ngClass",t==null?null:t.cssClass)("dropData",sr(16,cw,t))("dragAxis",bn(18,uw,t.draggable,t.draggable))("validateDrag",n)("touchStartLongPress",hi(21,hw)),N(),Q("ngStyle",sr(22,Zh,t.color==null?null:t.color.primary)),N(2),Q("event",t)("customTemplate",r.eventTitleTemplate),Se("aria-label",Hn(4,13,bn(24,FS,t,r.locale),"eventDescription")),N(3),Q("event",t)("customTemplate",r.eventActionsTemplate)}}function BS(i,e){if(i&1&&(z(0,"div",2),hy("cal-open-day-events-closing"),_e(1,"span",3),bt(2,"calendarA11y"),_e(3,"span",4),bt(4,"calendarA11y"),nn(5,LS,7,27,"div",5,Qh),U()),i&2){let t=X().events,n=X();N(),Se("aria-label",Hn(2,2,bn(8,lw,n.date,n.locale),"openDayEventsAlert")),N(2),Se("aria-label",Hn(4,5,bn(11,lw,n.date,n.locale),"openDayEventsLandmark")),N(2),rn(t)}}function zS(i,e){if(i&1&&Me(0,BS,7,14,"div",2),i&2){let t=e.isOpen;Ve(t?0:-1)}}function US(i,e){}function HS(i,e){if(i&1){let t=at();z(0,"mwl-calendar-month-cell",6),bt(1,"calendarA11y"),ue("mwlClick",function(r){let s=oe(t).$implicit,o=X(2);return ae(o.dayClicked.emit({day:s,sourceEvent:r}))})("mwlKeydownEnter",function(r){let s=oe(t).$implicit,o=X(2);return ae(o.dayClicked.emit({day:s,sourceEvent:r}))})("highlightDay",function(r){oe(t);let s=X(2);return ae(s.toggleDayHighlight(r.event,!0))})("unhighlightDay",function(r){oe(t);let s=X(2);return ae(s.toggleDayHighlight(r.event,!1))})("drop",function(r){let s=oe(t).$implicit,o=X(2);return ae(o.eventDropped(s,r.dropData.event,r.dropData.draggedFrom))})("eventClicked",function(r){oe(t);let s=X(2);return ae(s.eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))}),U()}if(i&2){let t=e.$implicit,n=X(2);Q("ngClass",t==null?null:t.cssClass)("day",t)("openDay",n.openDay)("locale",n.locale)("tooltipPlacement",n.tooltipPlacement)("tooltipAppendToBody",n.tooltipAppendToBody)("tooltipTemplate",n.tooltipTemplate)("tooltipDelay",n.tooltipDelay)("customTemplate",n.cellTemplate)("ngStyle",sr(15,Zh,t.backgroundColor))("clickListenerDisabled",!n.dayClicked.observed),Se("tabindex",Hn(1,12,hi(17,Jh),"monthCellTabIndex"))}}function jS(i,e){if(i&1){let t=at();z(0,"div")(1,"div",3),nn(2,HS,2,18,"mwl-calendar-month-cell",4,dw),bt(4,"slice"),U(),z(5,"mwl-calendar-open-day-events",5),ue("eventClicked",function(r){oe(t);let s=X();return ae(s.eventClicked.emit({event:r.event,sourceEvent:r.sourceEvent}))})("drop",function(r){oe(t);let s=X();return ae(s.eventDropped(s.openDay,r.dropData.event,r.dropData.draggedFrom))}),U()()}if(i&2){let t=e.$implicit,n=X();N(2),rn(as(4,7,n.view.days,t,t+n.view.totalDaysVisibleInWeek)),N(3),Q("locale",n.locale)("isOpen",n.openRowIndex===t)("events",n.openDay==null?null:n.openDay.events)("date",n.openDay==null?null:n.openDay.date)("customTemplate",n.openDayEventsTemplate)("eventTitleTemplate",n.eventTitleTemplate)("eventActionsTemplate",n.eventActionsTemplate)}}var Zl=(()=>{let e=class e{constructor(){this.clickListenerDisabled=!1,this.click=new K,this.destroy$=new ie,this.renderer=S(dt),this.elm=S(ge)}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(st(this.destroy$)).subscribe(n=>{n.stopPropagation(),this.click.emit(n)})}ngOnDestroy(){this.destroy$.next()}listen(){return new At(n=>this.renderer.listen(this.elm.nativeElement,"click",r=>{n.next(r)}))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}});let i=e;return i})(),ef=(()=>{let e=class e{constructor(){this.keydown=new K,this.keydownListener=null,this.host=S(ge),this.ngZone=S(ne),this.renderer=S(dt)}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",n=>{(n.keyCode===13||n.which===13||n.key==="Enter")&&(n.preventDefault(),n.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(n)}))})})}ngOnDestroy(){this.keydownListener!==null&&(this.keydownListener(),this.keydownListener=null)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}});let i=e;return i})(),Kh=(()=>{let e=class e{monthCell({day:n,locale:r}){return n.badgeTotal>0?`
        ${Qe(n.date,"EEEE MMMM d",r)},
        ${this.pluralizeEvents(n.badgeTotal,r)},
         click to expand
      `:`${Qe(n.date,"EEEE MMMM d",r)}`}pluralizeEvents(n,r){let o=new Intl.PluralRules(r).select(n),l={zero:"no events",one:"1 event",other:`${n} events`};return l[o]??l.other}openDayEventsLandmark({date:n,locale:r}){return`
      Beginning of expanded view for ${Qe(n,"EEEE MMMM dd",r)}
    `}openDayEventsAlert({date:n,locale:r}){return`${Qe(n,"EEEE MMMM dd",r)} expanded`}eventDescription({event:n,locale:r}){if(n.allDay===!0)return this.allDayEventDescription({event:n,locale:r});let s=`
      ${Qe(n.start,"EEEE MMMM dd",r)},
      ${n.title}, from ${Qe(n.start,"hh:mm a",r)}
    `;return n.end?s+` to ${Qe(n.end,"hh:mm a",r)}`:s}allDayEventDescription({event:n,locale:r}){let s=`
      ${n.title}, event spans multiple days:
      start time ${Qe(n.start,"MMMM dd hh:mm a",r)}
    `;return n.end?s+`, stop time ${Qe(n.end,"MMMM d hh:mm a",r)}`:s+", no stop time"}actionButtonLabel({action:n}){return n.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let i=e;return i})(),Ko=(()=>{let e=class e{constructor(){this.calendarA11y=S(Kh),this.locale=S(ls)}transform(n,r){if(n.locale=n.locale||this.locale,typeof this.calendarA11y[r]>"u"){let s=Object.getOwnPropertyNames(Object.getPrototypeOf(Kh.prototype)).filter(o=>o!=="constructor");throw new Error(`${r} is not a valid a11y method. Can only be one of ${s.join(", ")}`)}return this.calendarA11y[r](n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ol({name:"calendarA11y",type:e,pure:!0});let i=e;return i})(),$S=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:4,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-actions"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"ngClass","innerHtml"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"mwlClick","mwlKeydownEnter","ngClass","innerHtml"]],template:function(r,s){if(r&1&&Nt(0,gS,1,1,"ng-template",null,0,jn)(2,_S,0,0,"ng-template",1),r&2){let o=Kt(1);N(2),Q("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",sr(2,cw,s.event))}},dependencies:[sn,Zl,ef,$n,Ko],encapsulation:2});let i=e;return i})(),Jl=class{month(e,t){return e.title}monthTooltip(e,t){return e.title}week(e,t){return e.title}weekTooltip(e,t){return e.title}day(e,t){return e.title}dayTooltip(e,t){return e.title}},fw=(()=>{let e=class e{constructor(){this.calendarEventTitle=S(Jl)}transform(n,r,s){return this.calendarEventTitle[r](s,n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ol({name:"calendarEventTitle",type:e,pure:!0});let i=e;return i})(),WS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(r,s){if(r&1&&Nt(0,yS,3,10,"ng-template",null,0,jn)(2,wS,0,0,"ng-template",1),r&2){let o=Kt(1);N(2),Q("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",bn(2,vS,s.event,s.view))}},dependencies:[$n,fw,Ko],encapsulation:2});let i=e;return i})(),qS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(r,s){if(r&1&&Nt(0,ES,3,2,"ng-template",null,0,jn)(2,TS,0,0,"ng-template",1),r&2){let o=Kt(1);N(2),Q("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",my(2,bS,s.contents,s.placement,s.event))}},dependencies:[sn,$n],encapsulation:2});let i=e;return i})(),GS=(()=>{let e=class e{constructor(){this.placement="auto",this.delay=null,this.elementRef=S(ge),this.injector=S(De),this.viewContainerRef=S(Yt),this.document=S(Xe),this.cancelTooltipDelay$=new ie}ngOnChanges(n){this.tooltipRef&&(n.contents||n.customTemplate||n.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(this.delay===null?zn("now"):ny(this.delay)).pipe(st(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(qS,{index:0,injector:this.injector,projectableNodes:[]}),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(n=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=Fh(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),n.indexOf(this.tooltipRef.instance.placement)===-1&&this.positionTooltip([...n,this.tooltipRef.instance.placement]))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(r,s){r&1&&ue("mouseenter",function(){return s.onMouseOver()})("mouseleave",function(){return s.onMouseOut()})},inputs:{contents:[0,"mwlCalendarTooltip","contents"],placement:[0,"tooltipPlacement","placement"],customTemplate:[0,"tooltipTemplate","customTemplate"],event:[0,"tooltipEvent","event"],appendToBody:[0,"tooltipAppendToBody","appendToBody"],delay:[0,"tooltipDelay","delay"]},features:[wt]});let i=e;return i})(),Yo=class{},ec=(function(i){return i.Month="month",i.Week="week",i.Day="day",i})(ec||{}),YS=i=>Jy(i,(...t)=>console.warn("angular-calendar",...t));function KS(i,e,t,n){let r=0,s=0,o=t<0?i.subDays:i.addDays,l=e;for(;s<=Math.abs(t);){l=o(e,r);let c=i.getDay(l);n.indexOf(c)===-1&&s++,r++}return l}function XS(i,e,t,n=[],r){let s=r?i.startOfDay(e):i.startOfWeek(e,{weekStartsOn:t}),o=i.endOfWeek(e,{weekStartsOn:t});for(;n.indexOf(i.getDay(s))>-1&&s<o;)s=i.addDays(s,1);if(r){let l=i.endOfDay(KS(i,s,r-1,n));return{viewStart:s,viewEnd:l}}else{let l=o;for(;n.indexOf(i.getDay(l))>-1&&l>s;)l=i.subDays(l,1);return{viewStart:s,viewEnd:l}}}function pw({x:i,y:e}){return Math.abs(i)>1||Math.abs(e)>1}var QS=(()=>{let e=class e{constructor(){this.dateAdapter=S(Yo)}monthViewColumnHeader({date:n,locale:r}){return Qe(n,"EEEE",r)}monthViewDayNumber({date:n,locale:r}){return Qe(n,"d",r)}monthViewTitle({date:n,locale:r}){return Qe(n,"LLLL y",r)}weekViewColumnHeader({date:n,locale:r}){return Qe(n,"EEEE",r)}weekViewColumnSubHeader({date:n,locale:r}){return Qe(n,"MMM d",r)}weekViewTitle({date:n,locale:r,weekStartsOn:s,excludeDays:o,daysInWeek:l}){let{viewStart:c,viewEnd:d}=XS(this.dateAdapter,n,s,o,l),h=(p,g)=>Qe(p,"MMM d"+(g?", yyyy":""),r);return`${h(c,c.getUTCFullYear()!==d.getUTCFullYear())} - ${h(d,!0)}`}weekViewHour({date:n,locale:r}){return Qe(n,"h a",r)}dayViewHour({date:n,locale:r}){return Qe(n,"h a",r)}dayViewTitle({date:n,locale:r}){return Qe(n,"EEEE, MMMM d, y",r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let i=e;return i})(),Xh=(()=>{let e=class e extends QS{};e.\u0275fac=(()=>{let n;return function(s){return(n||(n=di(e)))(s||e)}})(),e.\u0275prov=ce({token:e,factory:e.\u0275fac});let i=e;return i})(),mw=(()=>{let e=class e{constructor(){this.dateFormatter=S(Xh),this.locale=S(ls)}transform(n,r,s=this.locale,o=0,l=[],c){if(typeof this.dateFormatter[r]>"u"){let d=Object.getOwnPropertyNames(Object.getPrototypeOf(Xh.prototype)).filter(h=>h!=="constructor");throw new Error(`${r} is not a valid date formatter. Can only be one of ${d.join(", ")}`)}return this.dateFormatter[r]({date:n,locale:s,weekStartsOn:o,excludeDays:l,daysInWeek:c})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ol({name:"calendarDate",type:e,pure:!0});let i=e;return i})(),gw=(()=>{let e=class e{constructor(){this.dateAdapter=S(Yo)}getMonthView(n){return Qy(this.dateAdapter,n)}getWeekViewHeader(n){return Xl(this.dateAdapter,n)}getWeekView(n){return Xy(this.dateAdapter,n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let i=e;return i})();var _w=(function(i){return i.Drag="drag",i.Drop="drop",i.Resize="resize",i})(_w||{});function LF(i,e={}){return[i,e.eventTitleFormatter||Jl,e.dateFormatter||Xh,e.utils||gw,e.a11y||Kh]}var JS=(()=>{let e=class e{constructor(){this.columnHeaderClicked=new K}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-month-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{columnHeaderClicked:"columnHeaderClicked"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-cell-row","cal-header"],["tabindex","0","role","columnheader",1,"cal-cell",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass"],["tabindex","0","role","columnheader",1,"cal-cell",3,"click","ngClass"]],template:function(r,s){if(r&1&&Nt(0,DS,3,0,"ng-template",null,0,jn)(2,SS,0,0,"ng-template",1),r&2){let o=Kt(1);N(2),Q("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",bn(2,CS,s.days,s.locale))}},dependencies:[sn,$n,mw],encapsulation:2});let i=e;return i})(),ZS=(()=>{let e=class e{constructor(){this.highlightDay=new K,this.unhighlightDay=new K,this.eventClicked=new K,this.validateDrag=pw}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-month-cell"]],hostAttrs:[1,"cal-cell","cal-day-cell"],hostVars:18,hostBindings:function(r,s){r&2&&Ae("cal-past",s.day.isPast)("cal-today",s.day.isToday)("cal-future",s.day.isFuture)("cal-weekend",s.day.isWeekend)("cal-in-month",s.day.inMonth)("cal-out-month",!s.day.inMonth)("cal-has-events",s.day.events.length>0)("cal-open",s.day===s.openDay)("cal-event-highlight",!!s.day.backgroundColor)},inputs:{day:"day",openDay:"openDay",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",customTemplate:"customTemplate",tooltipTemplate:"tooltipTemplate",tooltipDelay:"tooltipDelay"},outputs:{highlightDay:"highlightDay",unhighlightDay:"unhighlightDay",eventClicked:"eventClicked"},decls:3,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-cell-top"],["aria-hidden","true"],[1,"cal-day-badge"],[1,"cal-day-number"],[1,"cal-events"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event",3,"mouseenter","mouseleave","mwlClick","ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress"]],template:function(r,s){if(r&1&&Nt(0,MS,8,14,"ng-template",null,0,jn)(2,VS,0,0,"ng-template",1),r&2){let o=Kt(1);N(2),Q("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",_y(2,AS,[s.day,s.openDay,s.locale,s.tooltipPlacement,s.highlightDay,s.unhighlightDay,s.eventClicked,s.tooltipTemplate,s.tooltipAppendToBody,s.tooltipDelay,s.validateDrag]))}},dependencies:[Yh,Bl,sn,GS,Zl,$n,mw,fw,Ko],encapsulation:2});let i=e;return i})(),eA=(()=>{let e=class e{constructor(){this.isOpen=!1,this.eventClicked=new K,this.validateDrag=pw}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-open-day-events"]],inputs:{locale:"locale",isOpen:"isOpen",events:"events",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",date:"date"},outputs:{eventClicked:"eventClicked"},decls:3,vars:7,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","application",1,"cal-open-day-events"],["tabindex","-1","role","alert"],["tabindex","0","role","landmark"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress"],["mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngClass","dropData","dragAxis","validateDrag","touchStartLongPress"],[1,"cal-event",3,"ngStyle"],["view","month","tabindex","0",3,"mwlClick","mwlKeydownEnter","event","customTemplate"],[3,"event","customTemplate"]],template:function(r,s){if(r&1&&Nt(0,zS,1,1,"ng-template",null,0,jn)(2,US,0,0,"ng-template",1),r&2){let o=Kt(1);N(2),Q("ngTemplateOutlet",s.customTemplate||o)("ngTemplateOutletContext",gy(2,NS,s.events,s.eventClicked,s.isOpen,s.validateDrag))}},dependencies:[Yh,sn,Bl,WS,Zl,ef,$S,$n,Ko],encapsulation:2});let i=e;return i})(),vw=(()=>{let e=class e{constructor(){this.events=[],this.excludeDays=[],this.activeDayIsOpen=!1,this.locale=S(ls),this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.beforeViewRender=new K,this.dayClicked=new K,this.eventClicked=new K,this.columnHeaderClicked=new K,this.eventTimesChanged=new K,this.cdr=S(Et),this.utils=S(gw),this.dateAdapter=S(Yo)}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(n){let r=n.viewDate||n.excludeDays||n.weekendDays,s=n.viewDate||n.events||n.excludeDays||n.weekendDays;r&&this.refreshHeader(),n.events&&YS(this.events),s&&this.refreshBody(),(r||s)&&this.emitBeforeViewRender(),(n.activeDayIsOpen||n.viewDate||n.events||n.excludeDays||n.activeDay)&&this.checkActiveDayIsOpen()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}toggleDayHighlight(n,r){this.view.days.forEach(s=>{r&&s.events.indexOf(n)>-1?s.backgroundColor=n.color&&n.color.secondary||"#D1E8FF":delete s.backgroundColor})}eventDropped(n,r,s){if(n!==s){let o=this.dateAdapter.getYear(n.date),l=this.dateAdapter.getMonth(n.date),c=this.dateAdapter.getDate(n.date),d=this.dateAdapter.setDate(this.dateAdapter.setMonth(this.dateAdapter.setYear(r.start,o),l),c),h;if(r.end){let p=this.dateAdapter.differenceInSeconds(d,r.start);h=this.dateAdapter.addSeconds(r.end,p)}this.eventTimesChanged.emit({event:r,newStart:d,newEnd:h,day:n,type:_w.Drop})}}refreshHeader(){this.columnHeaders=this.utils.getWeekViewHeader({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}refreshBody(){this.view=this.utils.getMonthView({events:this.events,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays})}checkActiveDayIsOpen(){if(this.activeDayIsOpen===!0){let n=this.activeDay||this.viewDate;this.openDay=this.view.days.find(s=>this.dateAdapter.isSameDay(s.date,n));let r=this.view.days.indexOf(this.openDay);this.openRowIndex=Math.floor(r/this.view.totalDaysVisibleInWeek)*this.view.totalDaysVisibleInWeek}else this.openRowIndex=null,this.openDay=null}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender(),this.checkActiveDayIsOpen()}emitBeforeViewRender(){this.columnHeaders&&this.view&&this.beforeViewRender.emit({header:this.columnHeaders,body:this.view.days,period:this.view.period})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["mwl-calendar-month-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",activeDayIsOpen:"activeDayIsOpen",activeDay:"activeDay",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",cellTemplate:"cellTemplate",openDayEventsTemplate:"openDayEventsTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",weekendDays:"weekendDays"},outputs:{beforeViewRender:"beforeViewRender",dayClicked:"dayClicked",eventClicked:"eventClicked",columnHeaderClicked:"columnHeaderClicked",eventTimesChanged:"eventTimesChanged"},features:[wt],decls:5,vars:3,consts:[["role","grid",1,"cal-month-view"],[3,"columnHeaderClicked","days","locale","customTemplate"],[1,"cal-days"],["role","row",1,"cal-cell-row"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled"],["mwlDroppable","","dragOverClass","cal-drag-over",3,"eventClicked","drop","locale","isOpen","events","date","customTemplate","eventTitleTemplate","eventActionsTemplate"],["role","gridcell","mwlDroppable","","dragOverClass","cal-drag-over",3,"mwlClick","mwlKeydownEnter","highlightDay","unhighlightDay","drop","eventClicked","ngClass","day","openDay","locale","tooltipPlacement","tooltipAppendToBody","tooltipTemplate","tooltipDelay","customTemplate","ngStyle","clickListenerDisabled"]],template:function(r,s){r&1&&(z(0,"div",0)(1,"mwl-calendar-month-view-header",1),ue("columnHeaderClicked",function(l){return s.columnHeaderClicked.emit(l)}),U(),z(2,"div",2),nn(3,jS,6,11,"div",null,fy),U()()),r&2&&(N(),Q("days",s.columnHeaders)("locale",s.locale)("customTemplate",s.headerTemplate),N(2),rn(s.view.rowOffsets))},dependencies:[JS,ZS,aw,sn,Bl,Zl,ef,eA,Ty,Ko],encapsulation:2});let i=e;return i})();var tf=$l("pets"),yw=mi(tf,i=>i.pets),jF=i=>mi(tf,e=>e.pets.find(t=>t.id===i)),$F=mi(tf,i=>i.loading);var nf=$l("reminders"),ww=mi(nf,i=>i.reminders),GF=mi(nf,i=>i.loading),bw=mi(nf,i=>i.error);var Ew=()=>{};var Iw=function(i){let e=[],t=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},tA=function(i){let e=[],t=0,n=0;for(;t<i.length;){let r=i[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){let s=i[t++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=i[t++],o=i[t++],l=i[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{let s=i[t++],o=i[t++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){let s=i[r],o=r+1<i.length,l=o?i[r+1]:0,c=r+2<i.length,d=c?i[r+2]:0,h=s>>2,p=(s&3)<<4|l>>4,g=(l&15)<<2|d>>6,E=d&63;c||(E=64,o||(g=64)),n.push(t[h],t[p],t[g],t[E])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Iw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):tA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){let s=t[i.charAt(r++)],l=r<i.length?t[i.charAt(r)]:0;++r;let d=r<i.length?t[i.charAt(r)]:64;++r;let p=r<i.length?t[i.charAt(r)]:64;if(++r,s==null||l==null||d==null||p==null)throw new sf;let g=s<<2|l>>4;if(n.push(g),d!==64){let E=l<<4&240|d>>2;if(n.push(E),p!==64){let T=d<<6&192|p;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},sf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},nA=function(i){let e=Iw(i);return tc.encodeByteArray(e,!0)},Qo=function(i){return nA(i).replace(/\./g,"")},nc=function(i){try{return tc.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ic(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var iA=()=>ic().__FIREBASE_DEFAULTS__,rA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let i=process.env.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},sA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=i&&nc(i[1]);return e&&JSON.parse(e)},rc=()=>{try{return Ew()||iA()||rA()||sA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},af=i=>{var e,t;return(t=(e=rc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},Dw=i=>{let e=af(i);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},lf=()=>{var i;return(i=rc())===null||i===void 0?void 0:i.config},cf=i=>{var e;return(e=rc())===null||e===void 0?void 0:e[`_${i}`]};var lr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function vi(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}function sc(i){return _(this,null,function*(){return(yield fetch(i,{credentials:"include"})).ok})}function Sw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},n=e||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Qo(JSON.stringify(t)),Qo(JSON.stringify(o)),""].join(".")}var Xo={};function oA(){let i={prod:[],emulator:[]};for(let e of Object.keys(Xo))Xo[e]?i.emulator.push(e):i.prod.push(e);return i}function aA(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}var Tw=!1;function oc(i,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||Xo[i]===e||Xo[i]||Tw)return;Xo[i]=e;function t(g){return`__firebase__banner__${g}`}let n="__firebase__banner",s=oA().prod.length>0;function o(){let g=document.getElementById(n);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Tw=!0,o()},g}function h(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=aA(n),E=t("text"),T=document.getElementById(E)||document.createElement("span"),k=t("learnmore"),R=document.getElementById(k)||document.createElement("a"),B=t("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let M=g.element;l(M),h(R,k);let H=d();c(F,B),M.append(F,T,R,H),document.body.appendChild(M)}s?(T.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function kw(){var i;let e=(i=rc())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xw(){let i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Pw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ow(){let i=Ue();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function df(){return!kw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uf(){return!kw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function yi(){try{return typeof indexedDB=="object"}catch{return!1}}function ac(){return new Promise((i,e)=>{try{let t=!0,n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function Mw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var lA="FirebaseError",Rt=class i extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=lA,Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xt.prototype.create)}},xt=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?cA(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Rt(r,l,n)}};function cA(i,e){return i.replace(dA,(t,n)=>{let r=e[n];return r!=null?String(r):`<${n}?>`})}var dA=/\{\$([^}]+)}/g;function Vw(i){for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Tn(i,e){if(i===e)return!0;let t=Object.keys(i),n=Object.keys(e);for(let r of t){if(!n.includes(r))return!1;let s=i[r],o=e[r];if(Cw(s)&&Cw(o)){if(!Tn(s,o))return!1}else if(s!==o)return!1}for(let r of n)if(!t.includes(r))return!1;return!0}function Cw(i){return i!==null&&typeof i=="object"}function Jo(i){let e=[];for(let[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function us(i){let e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){let[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function hs(i){let e=i.indexOf("?");if(!e)return"";let t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function Nw(i,e){let t=new of(i,e);return t.subscribe.bind(t)}var of=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");uA(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=rf),r.error===void 0&&(r.error=rf),r.complete===void 0&&(r.complete=rf);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uA(i,e){if(typeof i!="object"||i===null)return!1;for(let t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function rf(){}var QF=14400*1e3;function ke(i){return i&&i._delegate?i._delegate:i}var He=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var cr="[DEFAULT]";var hf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let n=new lr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fA(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(let[t,n]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[s,o]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(e,t){var n;let r=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hA(i){return i===cr?void 0:i}function fA(i){return i.instantiationMode==="EAGER"}var lc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new hf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var pA=[],se=(function(i){return i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT",i})(se||{}),mA={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},gA=se.INFO,_A={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},vA=(i,e,...t)=>{if(e<i.logLevel)return;let n=new Date().toISOString(),r=_A[e];if(r)console[r](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Cn=class{constructor(e){this.name=e,this._logLevel=gA,this._logHandler=vA,this._userLogHandler=null,pA.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var yA=(i,e)=>e.some(t=>i instanceof t),Fw,Lw;function wA(){return Fw||(Fw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Lw||(Lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Bw=new WeakMap,pf=new WeakMap,zw=new WeakMap,ff=new WeakMap,gf=new WeakMap;function EA(i){let e=new Promise((t,n)=>{let r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{t(ln(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Bw.set(t,i)}).catch(()=>{}),gf.set(e,i),e}function TA(i){if(pf.has(i))return;let e=new Promise((t,n)=>{let r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});pf.set(i,e)}var mf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return pf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||zw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ln(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Uw(i){mf=i(mf)}function CA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let n=i.call(cc(this),e,...t);return zw.set(n,e.sort?e.sort():[e]),ln(n)}:bA().includes(i)?function(...e){return i.apply(cc(this),e),ln(Bw.get(this))}:function(...e){return ln(i.apply(cc(this),e))}}function IA(i){return typeof i=="function"?CA(i):(i instanceof IDBTransaction&&TA(i),yA(i,wA())?new Proxy(i,mf):i)}function ln(i){if(i instanceof IDBRequest)return EA(i);if(ff.has(i))return ff.get(i);let e=IA(i);return e!==i&&(ff.set(i,e),gf.set(e,i)),e}var cc=i=>gf.get(i);function dr(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){let o=indexedDB.open(i,e),l=ln(o);return n&&o.addEventListener("upgradeneeded",c=>{n(ln(o.result),c.oldVersion,c.newVersion,ln(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function dc(i,{blocked:e}={}){let t=indexedDB.deleteDatabase(i);return e&&t.addEventListener("blocked",n=>e(n.oldVersion,n)),ln(t).then(()=>{})}var DA=["get","getKey","getAll","getAllKeys","count"],SA=["put","add","delete","clear"],_f=new Map;function Hw(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(_f.get(e))return _f.get(e);let t=e.replace(/FromIndex$/,""),n=e!==t,r=SA.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||DA.includes(t)))return;let s=function(o,...l){return _(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),d=c.store;return n&&(d=d.index(l.shift())),(yield Promise.all([d[t](...l),r&&c.done]))[0]})};return _f.set(e,s),s}Uw(i=>_n(it({},i),{get:(e,t,n)=>Hw(e,t)||i.get(e,t,n),has:(e,t)=>!!Hw(e,t)||i.has(e,t)}));var yf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AA(t)){let n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}};function AA(i){let e=i.getComponent();return e?.type==="VERSION"}var wf="@firebase/app",jw="0.13.2";var Gn=new Cn("@firebase/app"),kA="@firebase/app-compat",RA="@firebase/analytics-compat",xA="@firebase/analytics",PA="@firebase/app-check-compat",OA="@firebase/app-check",MA="@firebase/auth",VA="@firebase/auth-compat",NA="@firebase/database",FA="@firebase/data-connect",LA="@firebase/database-compat",BA="@firebase/functions",zA="@firebase/functions-compat",UA="@firebase/installations",HA="@firebase/installations-compat",jA="@firebase/messaging",$A="@firebase/messaging-compat",WA="@firebase/performance",qA="@firebase/performance-compat",GA="@firebase/remote-config",YA="@firebase/remote-config-compat",KA="@firebase/storage",XA="@firebase/storage-compat",QA="@firebase/firestore",JA="@firebase/ai",ZA="@firebase/firestore-compat",ek="firebase",tk="11.10.0";var bf="[DEFAULT]",nk={[wf]:"fire-core",[kA]:"fire-core-compat",[xA]:"fire-analytics",[RA]:"fire-analytics-compat",[OA]:"fire-app-check",[PA]:"fire-app-check-compat",[MA]:"fire-auth",[VA]:"fire-auth-compat",[NA]:"fire-rtdb",[FA]:"fire-data-connect",[LA]:"fire-rtdb-compat",[BA]:"fire-fn",[zA]:"fire-fn-compat",[UA]:"fire-iid",[HA]:"fire-iid-compat",[jA]:"fire-fcm",[$A]:"fire-fcm-compat",[WA]:"fire-perf",[qA]:"fire-perf-compat",[GA]:"fire-rc",[YA]:"fire-rc-compat",[KA]:"fire-gcs",[XA]:"fire-gcs-compat",[QA]:"fire-fst",[ZA]:"fire-fst-compat",[JA]:"fire-vertex","fire-js":"fire-js",[ek]:"fire-js-all"};var Zo=new Map,ik=new Map,Ef=new Map;function $w(i,e){try{i.container.addComponent(e)}catch(t){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ht(i){let e=i.name;if(Ef.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Ef.set(e,i);for(let t of Zo.values())$w(t,i);for(let t of ik.values())$w(t,i);return!0}function cn(i,e){let t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ft(i){return i==null?!1:i.settings!==void 0}var rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new xt("app","Firebase",rk);var Tf=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new He("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}};var bi=tk;function Df(i,e={}){let t=i;typeof e!="object"&&(e={name:e});let n=Object.assign({name:bf,automaticDataCollectionEnabled:!0},e),r=n.name;if(typeof r!="string"||!r)throw wi.create("bad-app-name",{appName:String(r)});if(t||(t=lf()),!t)throw wi.create("no-options");let s=Zo.get(r);if(s){if(Tn(t,s.options)&&Tn(n,s.config))return s;throw wi.create("duplicate-app",{appName:r})}let o=new lc(r);for(let c of Ef.values())o.addComponent(c);let l=new Tf(t,n,o);return Zo.set(r,l),l}function In(i=bf){let e=Zo.get(i);if(!e&&i===bf&&lf())return Df();if(!e)throw wi.create("no-app",{appName:i});return e}function uc(){return Array.from(Zo.values())}function ve(i,e,t){var n;let r=(n=nk[i])!==null&&n!==void 0?n:i;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(l.join(" "));return}ht(new He(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var sk="firebase-heartbeat-database",ok=1,ea="firebase-heartbeat-store",vf=null;function Yw(){return vf||(vf=dr(sk,ok,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ea)}catch(t){console.warn(t)}}}}).catch(i=>{throw wi.create("idb-open",{originalErrorMessage:i.message})})),vf}function ak(i){return _(this,null,function*(){try{let t=(yield Yw()).transaction(ea),n=yield t.objectStore(ea).get(Kw(i));return yield t.done,n}catch(e){if(e instanceof Rt)Gn.warn(e.message);else{let t=wi.create("idb-get",{originalErrorMessage:e?.message});Gn.warn(t.message)}}})}function Ww(i,e){return _(this,null,function*(){try{let n=(yield Yw()).transaction(ea,"readwrite");yield n.objectStore(ea).put(e,Kw(i)),yield n.done}catch(t){if(t instanceof Rt)Gn.warn(t.message);else{let n=wi.create("idb-set",{originalErrorMessage:t?.message});Gn.warn(n.message)}}})}function Kw(i){return`${i.name}!${i.options.appId}`}var lk=1024,ck=30,Cf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new If(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>ck){let o=uk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Gn.warn(n)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=qw(),{heartbeatsToSend:n,unsentEntries:r}=dk(this._heartbeatsCache.heartbeats),s=Qo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Gn.warn(t),""}})}};function qw(){return new Date().toISOString().substring(0,10)}function dk(i,e=lk){let t=[],n=i.slice();for(let r of i){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Gw(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Gw(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}var If=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return yi()?ac().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ak(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ww(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ww(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Gw(i){return Qo(JSON.stringify({version:2,heartbeats:i})).length}function uk(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}function hk(i){ht(new He("platform-logger",e=>new yf(e),"PRIVATE")),ht(new He("heartbeat",e=>new Cf(e),"PRIVATE")),ve(wf,jw,i),ve(wf,jw,"esm2017"),ve("fire-js","")}hk("");var fk="firebase",pk="11.10.0";ve(fk,pk,"app");var Dn=new gh("ANGULARFIRE2_VERSION");function hr(i,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(i).getImmediate({optional:!0})}var Ei=(i,e)=>{let t=e?[e]:uc(),n=[];return t.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},fs=(function(i){return i[i.SILENT=0]="SILENT",i[i.WARN=1]="WARN",i[i.VERBOSE=2]="VERBOSE",i})(fs||{}),Xw=Ch()&&typeof Zone<"u"?fs.WARN:fs.SILENT;var hc=class{zone;delegate;constructor(e,t=ey){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){let r=this.zone,s=function(o){r?r.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,n)}},Sn=(()=>{class i{outsideAngular;insideAngular;constructor(){let t=S(ne);this.outsideAngular=t.runOutsideAngular(()=>new hc(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new hc(typeof Zone>"u"?void 0:Zone.current,Zv))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Qw=!1;function mk(i,e){!Qw&&(Xw>fs.SILENT||Ch())&&(Qw=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Xw>=e&&console.warn(`Firebase API called outside injection context: ${i.name}`)}function gk(i){let e=S(ne,{optional:!0});return e?e.runOutsideAngular(()=>i()):i()}function ur(i){let e=S(ne,{optional:!0});return e?e.run(()=>i()):i()}var _k=(i,e,t)=>(...n)=>(e&&setTimeout(e,0),xl(t,()=>ur(()=>i.apply(void 0,n)))),Pe=(i,e,t)=>(t||=e?fs.WARN:fs.VERBOSE,function(){let n,r=arguments,s,o,l;try{s=S(Sn),o=S(ly),l=S(ts)}catch{return mk(i,t),i.apply(this,r)}for(let d=0;d<arguments.length;d++)typeof r[d]=="function"&&(e&&(n||=ur(()=>o.add())),r[d]=_k(r[d],n,l));let c=gk(()=>i.apply(this,r));return e?c instanceof At?c.pipe(uh(s.outsideAngular),dh(s.insideAngular),Vy(l)):c instanceof Promise?ur(()=>{let d=o.add();return new Promise((h,p)=>{c.then(g=>xl(l,()=>ur(()=>h(g))),g=>xl(l,()=>ur(()=>p(g)))).finally(d)})}):typeof c=="function"&&n?function(){return setTimeout(n,0),c.apply(this,arguments)}:ur(()=>c):c instanceof At?c.pipe(uh(s.outsideAngular),dh(s.insideAngular)):ur(()=>c)});var dn=class{constructor(e){return e}},Yn=class{constructor(){return uc()}};function vk(i){return i&&i.length===1?i[0]:new dn(In())}var Sf=new pe("angularfire2._apps"),yk={provide:dn,useFactory:vk,deps:[[new ot,Sf]]},wk={provide:Yn,deps:[[new ot,Sf]]};function bk(i){return(e,t)=>{let n=t.get(No);ve("angularfire",Dn.full,"core"),ve("angularfire",Dn.full,"app"),ve("angular",sy.full,n.toString());let r=e.runOutsideAngular(()=>i(t));return new dn(r)}}function BL(i,...e){return ci([yk,wk,{provide:Sf,useFactory:bk(i),multi:!0,deps:[ne,De,Sn,...e]}])}var zL=Pe(Df,!0);var Ek=new Map,Tk={activated:!1,tokenObservers:[]},Ck={initialized:!1,enabled:!1};function un(i){return Ek.get(i)||Object.assign({},Tk)}function tb(){return Ck}var Ik="https://content-firebaseappcheck.googleapis.com/v1";var Dk="exchangeDebugToken",Jw={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},KL=1440*60*1e3;var Rf=class{constructor(e,t,n,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new lr,this.pending.promise.catch(t=>{}),yield Sk(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new lr,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Sk(i){return new Promise(e=>{setTimeout(e,i)})}var Ak={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ti=new xt("appCheck","AppCheck",Ak);function nb(i){if(!un(i).activated)throw Ti.create("use-before-activation",{appName:i.name})}function ib(n,r){return _(this,arguments,function*({url:i,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let E=yield o.getHeartbeatsHeader();E&&(s["X-Firebase-Client"]=E)}let l={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(i,l)}catch(E){throw Ti.create("fetch-network-error",{originalErrorMessage:E?.message})}if(c.status!==200)throw Ti.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(E){throw Ti.create("fetch-parse-error",{originalErrorMessage:E?.message})}let h=d.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:d.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function rb(i,e){let{projectId:t,appId:n,apiKey:r}=i.options;return{url:`${Ik}/projects/${t}/apps/${n}:${Dk}?key=${r}`,body:{debug_token:e}}}var kk="firebase-app-check-database",Rk=1,xf="firebase-app-check-store";var fc=null;function xk(){return fc||(fc=new Promise((i,e)=>{try{let t=indexedDB.open(kk,Rk);t.onsuccess=n=>{i(n.target.result)},t.onerror=n=>{var r;e(Ti.create("storage-open",{originalErrorMessage:(r=n.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(xf,{keyPath:"compositeKey"})}}}catch(t){e(Ti.create("storage-open",{originalErrorMessage:t?.message}))}}),fc)}function Pk(i,e){return Ok(Mk(i),e)}function Ok(i,e){return _(this,null,function*(){let n=(yield xk()).transaction(xf,"readwrite"),s=n.objectStore(xf).put({compositeKey:i,value:e});return new Promise((o,l)=>{s.onsuccess=c=>{o()},n.onerror=c=>{var d;l(Ti.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function Mk(i){return`${i.options.appId}-${i.name}`}var ta=new Cn("@firebase/app-check");function Af(i,e){return yi()?Pk(i,e).catch(t=>{ta.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sb(){return tb().enabled}function ob(){return _(this,null,function*(){let i=tb();if(i.enabled&&i.token)return i.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Vk={error:"UNKNOWN_ERROR"};function Nk(i){return tc.encodeString(JSON.stringify(i),!1)}function Pf(i,e=!1,t=!1){return _(this,null,function*(){let n=i.app;nb(n);let r=un(n),s=r.token,o;if(s&&!na(s)&&(r.token=void 0,s=void 0),!s){let d=yield r.cachedTokenPromise;d&&(na(d)?s=d:yield Af(n,void 0))}if(!e&&s&&na(s))return{token:s.token};let l=!1;if(sb())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=ib(rb(n,yield ob()),i.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);let d=yield r.exchangeTokenPromise;return yield Af(n,d),r.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?ta.warn(d.message):t&&ta.error(d),kf(d)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield un(n).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?ta.warn(d.message):t&&ta.error(d),o=d}let c;return s?o?na(s)?c={token:s.token,internalError:o}:c=kf(o):(c={token:s.token},r.token=s,yield Af(n,s)):c=kf(o),l&&zk(n,c),c})}function Fk(i){return _(this,null,function*(){let e=i.app;nb(e);let{provider:t}=un(e);if(sb()){let n=yield ob(),{token:r}=yield ib(rb(e,n),i.heartbeatServiceProvider);return{token:r}}else{let{token:n}=yield t.getToken();return{token:n}}})}function Lk(i,e,t,n){let{app:r}=i,s=un(r),o={next:t,error:n,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&na(s.token)){let l=s.token;Promise.resolve().then(()=>{t({token:l.token}),Zw(i)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Zw(i))}function ab(i,e){let t=un(i),n=t.tokenObservers.filter(r=>r.next!==e);n.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=n}function Zw(i){let{app:e}=i,t=un(e),n=t.tokenRefresher;n||(n=Bk(i),t.tokenRefresher=n),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function Bk(i){let{app:e}=i;return new Rf(()=>_(null,null,function*(){let t=un(e),n;if(t.token?n=yield Pf(i,!0):n=yield Pf(i),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let t=un(e);if(t.token){let n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-300*1e3;return n=Math.min(n,r),Math.max(0,n-Date.now())}else return 0},Jw.RETRIAL_MIN_WAIT,Jw.RETRIAL_MAX_WAIT)}function zk(i,e){let t=un(i).tokenObservers;for(let n of t)try{n.type==="EXTERNAL"&&e.error!=null?n.error(e.error):n.next(e)}catch{}}function na(i){return i.expireTimeMillis-Date.now()>0}function kf(i){return{token:Nk(Vk),error:i}}var Of=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=un(this.app);for(let t of e)ab(this.app,t.next);return Promise.resolve()}};function Uk(i,e){return new Of(i,e)}function Hk(i){return{getToken:e=>Pf(i,e),getLimitedUseToken:()=>Fk(i),addTokenListener:e=>Lk(i,"INTERNAL",e),removeTokenListener:e=>ab(i.app,e)}}var jk="@firebase/app-check",$k="0.10.1";var Wk="app-check",eb="app-check-internal";function qk(){ht(new He(Wk,i=>{let e=i.getProvider("app").getImmediate(),t=i.getProvider("heartbeat");return Uk(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,e,t)=>{i.getProvider(eb).initialize()})),ht(new He(eb,i=>{let e=i.getProvider("app-check").getImmediate();return Hk(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ve(jk,$k)}qk();var Gk="app-check";var ps=class{constructor(){return Ei(Gk)}};var Yk=["localhost","0.0.0.0","127.0.0.1"],l2=typeof window<"u"&&Yk.includes(window.location.hostname);function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Cb=Tb,Ib=new xt("auth","Firebase",Tb());var yc=new Cn("@firebase/auth");function Kk(i,...e){yc.logLevel<=se.WARN&&yc.warn(`Auth (${bi}): ${i}`,...e)}function mc(i,...e){yc.logLevel<=se.ERROR&&yc.error(`Auth (${bi}): ${i}`,...e)}function kn(i,...e){throw rp(i,...e)}function fr(i,...e){return rp(i,...e)}function Db(i,e,t){let n=Object.assign(Object.assign({},Cb()),{[e]:t});return new xt("auth","Firebase",n).create(e,{appName:i.name})}function Qn(i){return Db(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rp(i,...e){if(typeof i!="string"){let t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return Ib.create(i,...e)}function Z(i,e,...t){if(!i)throw rp(e,...t)}function Kn(i){let e="INTERNAL ASSERTION FAILED: "+i;throw mc(e),new Error(e)}function Di(i,e){i||Kn(e)}function Ff(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Xk(){return lb()==="http:"||lb()==="https:"}function lb(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function Qk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xk()||xw()||"connection"in navigator)?navigator.onLine:!0}function Jk(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var pr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Di(t>e,"Short delay should be less than long delay!"),this.isMobile=Aw()||Pw()}get(){return Qk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sp(i,e){Di(i.emulator,"Emulator should always be set here");let{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wc=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Zk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tR=new pr(3e4,6e4);function Si(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}function Ai(s,o,l,c){return _(this,arguments,function*(i,e,t,n,r={}){return Sb(i,r,()=>_(null,null,function*(){let d={},h={};n&&(e==="GET"?h=n:d={body:JSON.stringify(n)});let p=Jo(Object.assign({key:i.config.apiKey},h)).slice(1),g=yield i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);let E=Object.assign({method:e,headers:g},d);return Rw()||(E.referrerPolicy="no-referrer"),i.emulatorConfig&&vi(i.emulatorConfig.host)&&(E.credentials="include"),wc.fetch()(yield Ab(i,i.config.apiHost,t,p),E)}))})}function Sb(i,e,t){return _(this,null,function*(){i._canInitEmulator=!1;let n=Object.assign(Object.assign({},Zk),e);try{let r=new Lf(i),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw pc(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let l=s.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(i,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw pc(i,"email-already-in-use",o);if(c==="USER_DISABLED")throw pc(i,"user-disabled",o);let h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Db(i,h,d);kn(i,h)}}catch(r){if(r instanceof Rt)throw r;kn(i,"network-request-failed",{message:String(r)})}})}function ua(s,o,l,c){return _(this,arguments,function*(i,e,t,n,r={}){let d=yield Ai(i,e,t,n,r);return"mfaPendingCredential"in d&&kn(i,"multi-factor-auth-required",{_serverResponse:d}),d})}function Ab(i,e,t,n){return _(this,null,function*(){let r=`${e}${t}?${n}`,s=i,o=s.config.emulator?sp(i.config,r):`${i.config.apiScheme}://${r}`;return eR.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function nR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Lf=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(fr(this.auth,"network-request-failed")),tR.get())})}};function pc(i,e,t){let n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);let r=fr(i,e,n);return r.customData._tokenResponse=t,r}function cb(i){return i!==void 0&&i.enterprise!==void 0}var Bf=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function iR(i,e){return _(this,null,function*(){return Ai(i,"GET","/v2/recaptchaConfig",Si(i,e))})}function rR(i,e){return _(this,null,function*(){return Ai(i,"POST","/v1/accounts:delete",e)})}function bc(i,e){return _(this,null,function*(){return Ai(i,"POST","/v1/accounts:lookup",e)})}function ra(i){if(i)try{let e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function op(i,e=!1){return _(this,null,function*(){let t=ke(i),n=yield t.getIdToken(e),r=ap(n);Z(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:ra(Mf(r.auth_time)),issuedAtTime:ra(Mf(r.iat)),expirationTime:ra(Mf(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Mf(i){return Number(i)*1e3}function ap(i){let[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{let r=nc(t);return r?JSON.parse(r):(mc("Failed to decode base64 JWT payload"),null)}catch(r){return mc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function db(i){let e=ap(i);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function oa(i,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(n){throw n instanceof Rt&&sR(n)&&i.auth.currentUser===i&&(yield i.auth.signOut()),n}})}function sR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var zf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var aa=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ec(i){return _(this,null,function*(){var e;let t=i.auth,n=yield i.getIdToken(),r=yield oa(i,bc(t,{idToken:n}));Z(r?.users.length,t,"internal-error");let s=r.users[0];i._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?kb(s.providerUserInfo):[],l=oR(i.providerData,o),c=i.isAnonymous,d=!(i.email&&s.passwordHash)&&!l?.length,h=c?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new aa(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,p)})}function lp(i){return _(this,null,function*(){let e=ke(i);yield Ec(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function oR(i,e){return[...i.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function kb(i){return i.map(e=>{var{providerId:t}=e,n=ch(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function aR(i,e){return _(this,null,function*(){let t=yield Sb(i,{},()=>_(null,null,function*(){let n=Jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=yield Ab(i,r,"/v1/token",`key=${s}`),l=yield i._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:l,body:n};return i.emulatorConfig&&vi(i.emulatorConfig.host)&&(c.credentials="include"),wc.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function lR(i,e){return _(this,null,function*(){return Ai(i,"POST","/v2/accounts:revokeToken",Si(i,e))})}var sa=class i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=db(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:n,refreshToken:r,expiresIn:s}=yield aR(e,t);this.updateTokensAndExpiration(n,r,Number(s))})}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){let{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new i;return n&&(Z(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),r&&(Z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new i,this.toJSON())}_performRefresh(){return Kn("not implemented")}};function Ci(i,e){Z(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}var Ii=class i{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=ch(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new aa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield oa(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return op(this,e)}reload(){return lp(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&(yield Ec(this)),yield this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Ft(this.auth.app))return Promise.reject(Qn(this.auth));let e=yield this.getIdToken();return yield oa(this,rR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,l,c,d,h;let p=(n=t.displayName)!==null&&n!==void 0?n:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,E=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,k=(l=t.tenantId)!==null&&l!==void 0?l:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,B=(d=t.createdAt)!==null&&d!==void 0?d:void 0,F=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:M,emailVerified:H,isAnonymous:W,providerData:G,stsTokenManager:I}=t;Z(M&&I,e,"internal-error");let v=sa.fromJSON(this.name,I);Z(typeof M=="string",e,"internal-error"),Ci(p,e.name),Ci(g,e.name),Z(typeof H=="boolean",e,"internal-error"),Z(typeof W=="boolean",e,"internal-error"),Ci(E,e.name),Ci(T,e.name),Ci(k,e.name),Ci(R,e.name),Ci(B,e.name),Ci(F,e.name);let y=new i({uid:M,auth:e,email:g,emailVerified:H,displayName:p,isAnonymous:W,photoURL:T,phoneNumber:E,tenantId:k,stsTokenManager:v,createdAt:B,lastLoginAt:F});return G&&Array.isArray(G)&&(y.providerData=G.map(D=>Object.assign({},D))),R&&(y._redirectEventId=R),y}static _fromIdTokenResponse(e,t,n=!1){return _(this,null,function*(){let r=new sa;r.updateFromServerResponse(t);let s=new i({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield Ec(s),s})}static _fromGetAccountInfoResponse(e,t,n){return _(this,null,function*(){let r=t.users[0];Z(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?kb(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,l=new sa;l.updateFromIdToken(n);let c=new i({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new aa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var ub=new Map;function Xn(i){Di(i instanceof Function,"Expected a class definition");let e=ub.get(i);return e?(Di(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ub.set(i,e),e)}var cR=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,n){return _(this,null,function*(){this.storage[t]=n})}_get(t){return _(this,null,function*(){let n=this.storage[t];return n===void 0?null:n})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,n){}_removeListener(t,n){}}return i.type="NONE",i})(),Uf=cR;function gc(i,e,t){return`firebase:${i}:${e}:${t}`}var Tc=class i{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:s}=this.auth;this.fullUserKey=gc(this.userKey,r.apiKey,s),this.fullPersistenceKey=gc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield bc(this.auth,{idToken:e}).catch(()=>{});return t?Ii._fromGetAccountInfoResponse(this.auth,t,e):null}return Ii._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return _(this,null,function*(){if(!t.length)return new i(Xn(Uf),e,n);let r=(yield Promise.all(t.map(d=>_(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||Xn(Uf),o=gc(n,e.config.apiKey,e.name),l=null;for(let d of t)try{let h=yield d._get(o);if(h){let p;if(typeof h=="string"){let g=yield bc(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Ii._fromGetAccountInfoResponse(e,g,h)}else p=Ii._fromJSON(e,h);d!==s&&(l=p),s=d;break}}catch{}let c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new i(s,e,n):(s=c[0],l&&(yield s._set(o,l.toJSON())),yield Promise.all(t.map(d=>_(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new i(s,e,n))})}};function hb(i){let e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vb(e))return"Blackberry";if(Nb(e))return"Webos";if(xb(e))return"Safari";if((e.includes("chrome/")||Pb(e))&&!e.includes("edge/"))return"Chrome";if(Mb(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if(n?.length===2)return n[1]}return"Other"}function Rb(i=Ue()){return/firefox\//i.test(i)}function xb(i=Ue()){let e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pb(i=Ue()){return/crios\//i.test(i)}function Ob(i=Ue()){return/iemobile/i.test(i)}function Mb(i=Ue()){return/android/i.test(i)}function Vb(i=Ue()){return/blackberry/i.test(i)}function Nb(i=Ue()){return/webos/i.test(i)}function cp(i=Ue()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function dR(i=Ue()){var e;return cp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uR(){return Ow()&&document.documentMode===10}function Fb(i=Ue()){return cp(i)||Mb(i)||Nb(i)||Vb(i)||/windows phone/i.test(i)||Ob(i)}function Lb(i,e=[]){let t;switch(i){case"Browser":t=hb(Ue());break;case"Worker":t=`${hb(Ue())}-${i}`;break;default:t=i}let n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bi}/${n}`}var Hf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=s=>new Promise((o,l)=>{try{let c=e(s);o(c)}catch(c){l(c)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)yield n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}})}};function hR(t){return _(this,arguments,function*(i,e={}){return Ai(i,"GET","/v2/passwordPolicy",Si(i,e))})}var fR=6,jf=class{constructor(e){var t,n,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:fR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,o,l;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var $f=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cc(this),this.idTokenSubscription=new Cc(this),this.beforeStateQueue=new Hf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var n,r,s;if(!this._deleted&&(this.persistenceManager=yield Tc.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield bc(this,{idToken:e}),n=yield Ii._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Ft(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Ec(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Jk()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Ft(this.app))return Promise.reject(Qn(this));let t=e?ke(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Ft(this.app)?Promise.reject(Qn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ft(this.app)?Promise.reject(Qn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield hR(this),t=new jf(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),yield lR(this,n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let n=yield this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Xn(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield Tc.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,n;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,n,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Kk(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function gr(i){return ke(i)}var Cc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nw(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xc={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pR(i){xc=i}function Bb(i){return xc.loadJS(i)}function mR(){return xc.recaptchaEnterpriseScript}function gR(){return xc.gapiScript}function zb(i){return`__${i}${Math.floor(Math.random()*1e6)}`}var Wf=class{constructor(){this.enterprise=new qf}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},qf=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var _R="recaptcha-enterprise",Ub="NO_RECAPTCHA",Gf=class{constructor(e){this.type=_R,this.auth=gr(e)}verify(e="verify",t=!1){return _(this,null,function*(){function n(s){return _(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,l)=>_(null,null,function*(){iR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let d=new Bf(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})}))})}function r(s,o,l){let c=window.grecaptcha;cb(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(Ub)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wf().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!t&&cb(window.grecaptcha))r(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=mR();c.length!==0&&(c+=l),Bb(c).then(()=>{r(l,s,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})})}};function ia(i,e,t,n=!1,r=!1){return _(this,null,function*(){let s=new Gf(i),o;if(r)o=Ub;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){let c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){let c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})}function Yf(i,e,t,n,r){return _(this,null,function*(){var s,o;if(r==="EMAIL_PASSWORD_PROVIDER")if(!((s=i._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let l=yield ia(i,e,t,t==="getOobCode");return n(i,l)}else return n(i,e).catch(l=>_(null,null,function*(){if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield ia(i,e,t,t==="getOobCode");return n(i,c)}else return Promise.reject(l)}));else if(r==="PHONE_PROVIDER")if(!((o=i._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let l=yield ia(i,e,t);return n(i,l).catch(c=>_(null,null,function*(){var d;if(((d=i._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield ia(i,e,t,!1,!0);return n(i,h)}return Promise.reject(c)}))}else{let l=yield ia(i,e,t,!1,!0);return n(i,l)}else return Promise.reject(r+" provider is not supported.")})}function dp(i,e){let t=cn(i,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Tn(s,e??{}))return r;kn(r,"already-initialized")}return t.initialize({options:e})}function vR(i,e){let t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(Xn);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e?.popupRedirectResolver)}function up(i,e,t){let n=gr(i);Z(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Hb(e),{host:o,port:l}=yR(e),c=l===null?"":`:${l}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!n._canInitEmulator){Z(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Z(Tn(d,n.config.emulator)&&Tn(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,vi(o)?(sc(`${s}//${o}${c}`),oc("Auth",!0)):r||wR()}function Hb(i){let e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function yR(i){let e=Hb(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};let n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){let s=r[1];return{host:s,port:fb(n.substr(s.length+1))}}else{let[s,o]=n.split(":");return{host:s,port:fb(o)}}}function fb(i){if(!i)return null;let e=Number(i);return isNaN(e)?null:e}function wR(){function i(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var la=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,t){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}};function bR(i,e){return _(this,null,function*(){return Ai(i,"POST","/v1/accounts:signUp",e)})}function ER(i,e){return _(this,null,function*(){return ua(i,"POST","/v1/accounts:signInWithPassword",Si(i,e))})}function TR(i,e){return _(this,null,function*(){return ua(i,"POST","/v1/accounts:signInWithEmailLink",Si(i,e))})}function CR(i,e){return _(this,null,function*(){return ua(i,"POST","/v1/accounts:signInWithEmailLink",Si(i,e))})}var ca=class i extends la{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new i(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new i(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,t,"signInWithPassword",ER,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return TR(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,n,"signUpPassword",bR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return CR(e,{idToken:t,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Vf(i,e){return _(this,null,function*(){return ua(i,"POST","/v1/accounts:signInWithIdp",Si(i,e))})}function IR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DR(i){let e=us(hs(i)).link,t=e?us(hs(e)).deep_link_id:null,n=us(hs(i)).deep_link_id;return(n?us(hs(n)).link:null)||n||t||e||i}var Ic=class i{constructor(e){var t,n,r,s,o,l;let c=us(hs(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(n=c.oobCode)!==null&&n!==void 0?n:null,p=IR((r=c.mode)!==null&&r!==void 0?r:null);Z(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=DR(e);try{return new i(t)}catch{return null}}};var jb=(()=>{class i{constructor(){this.providerId=i.PROVIDER_ID}static credential(t,n){return ca._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){let r=Ic.parseLink(n);return Z(r,"argument-error"),ca._fromEmailAndCode(t,r.code,r.tenantId)}}i.PROVIDER_ID="password",i.EMAIL_PASSWORD_SIGN_IN_METHOD="password",i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return i})(),Dc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Kf=class extends Dc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function SR(i,e){return _(this,null,function*(){return ua(i,"POST","/v1/accounts:signUp",Si(i,e))})}var ms=class i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,r=!1){return _(this,null,function*(){let s=yield Ii._fromIdTokenResponse(e,n,r),o=pb(n);return new i({user:s,providerId:o,_tokenResponse:n,operationType:t})})}static _forOperation(e,t,n){return _(this,null,function*(){yield e._updateTokensIfNecessary(n,!0);let r=pb(n);return new i({user:e,providerId:r,_tokenResponse:n,operationType:t})})}};function pb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var Xf=class i extends Rt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new i(e,t,n,r)}};function $b(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xf._fromErrorAndOperation(i,s,e,n):s})}function AR(i,e,t=!1){return _(this,null,function*(){let n=yield oa(i,e._linkToIdToken(i.auth,yield i.getIdToken()),t);return ms._forOperation(i,"link",n)})}function kR(i,e,t=!1){return _(this,null,function*(){let{auth:n}=i;if(Ft(n.app))return Promise.reject(Qn(n));let r="reauthenticate";try{let s=yield oa(i,$b(n,r,e,i),t);Z(s.idToken,n,"internal-error");let o=ap(s.idToken);Z(o,n,"internal-error");let{sub:l}=o;return Z(i.uid===l,n,"user-mismatch"),ms._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&kn(n,"user-mismatch"),s}})}function Wb(i,e,t=!1){return _(this,null,function*(){if(Ft(i.app))return Promise.reject(Qn(i));let n="signIn",r=yield $b(i,n,e),s=yield ms._fromIdTokenResponse(i,n,r);return t||(yield i._updateCurrentUser(s.user)),s})}function hp(i,e){return _(this,null,function*(){return Wb(gr(i),e)})}function qb(i){return _(this,null,function*(){let e=gr(i);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function fp(i,e,t){return _(this,null,function*(){if(Ft(i.app))return Promise.reject(Qn(i));let n=gr(i),o=yield Yf(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SR,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qb(i),c}),l=yield ms._fromIdTokenResponse(n,"signIn",o);return yield n._updateCurrentUser(l.user),l})}function pp(i,e,t){return Ft(i.app)?Promise.reject(Qn(i)):hp(ke(i),jb.credential(e,t)).catch(n=>_(null,null,function*(){throw n.code==="auth/password-does-not-meet-requirements"&&qb(i),n}))}function Pc(i,e,t,n){return ke(i).onIdTokenChanged(e,t,n)}function mp(i,e,t){return ke(i).beforeAuthStateChanged(e,t)}function Oc(i,e,t,n){return ke(i).onAuthStateChanged(e,t,n)}function gp(i){return ke(i).signOut()}var Sc="__sak";var Ac=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RR=1e3,xR=10,PR=(()=>{class i extends Ac{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),s=this.localCache[n];r!==s&&t(n,s,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}let r=t.key;n?this.detachListener():this.stopPolling();let s=()=>{let l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);uR()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,xR):s()}notifyListeners(t,n){this.localCache[t]=n;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,n){return _(this,null,function*(){yield Bn(i.prototype,this,"_set").call(this,t,n),this.localCache[t]=JSON.stringify(n)})}_get(t){return _(this,null,function*(){let n=yield Bn(i.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(n),n})}_remove(t){return _(this,null,function*(){yield Bn(i.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return i.type="LOCAL",i})(),Gb=PR;var OR=(()=>{class i extends Ac{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}return i.type="SESSION",i})(),_p=OR;function MR(i){return Promise.all(i.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var VR=(()=>{class i{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;let r=new i(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let n=t,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(l).map(h=>_(this,null,function*(){return h(n.origin,o)})),d=yield MR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i.receivers=[];return i})();function Yb(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}var Qf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){return _(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{let d=Yb("",20);r.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(p){let g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function An(){return window}function NR(i){An().location.href=i}function Kb(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}function FR(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function LR(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function BR(){return Kb()?self:null}var Xb="firebaseLocalStorageDb",zR=1,kc="firebaseLocalStorage",Qb="fbase_key",mr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Mc(i,e){return i.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function UR(){let i=indexedDB.deleteDatabase(Xb);return new mr(i).toPromise()}function Jf(){let i=indexedDB.open(Xb,zR);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{let n=i.result;try{n.createObjectStore(kc,{keyPath:Qb})}catch(r){t(r)}}),i.addEventListener("success",()=>_(null,null,function*(){let n=i.result;n.objectStoreNames.contains(kc)?e(n):(n.close(),yield UR(),e(yield Jf()))}))})}function mb(i,e,t){return _(this,null,function*(){let n=Mc(i,!0).put({[Qb]:e,value:t});return new mr(n).toPromise()})}function HR(i,e){return _(this,null,function*(){let t=Mc(i,!1).get(e),n=yield new mr(t).toPromise();return n===void 0?null:n.value})}function gb(i,e){let t=Mc(i,!0).delete(e);return new mr(t).toPromise()}var jR=800,$R=3,WR=(()=>{class i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Jf(),this.db)})}_withRetries(t){return _(this,null,function*(){let n=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(n++>$R)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Kb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=VR._getInstance(BR()),this.receiver._subscribe("keyChanged",(t,n)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(t,n)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,n;if(this.activeServiceWorker=yield FR(),!this.activeServiceWorker)return;this.sender=new Qf(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||LR()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Jf();return yield mb(t,Sc,"1"),yield gb(t,Sc),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>mb(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let n=yield this._withRetries(r=>HR(r,t));return this.localCache[t]=n,n})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(n=>gb(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=Mc(s,!1).getAll();return new mr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(t,n){this.localCache[t]=n;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),jR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return i.type="LOCAL",i})(),Jb=WR;var g2=zb("rcb"),_2=new pr(3e4,6e4);function qR(i,e){return e?Xn(e):(Z(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var da=class extends la{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vf(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function GR(i){return Wb(i.auth,new da(i),i.bypassAuthState)}function YR(i){let{auth:e,user:t}=i;return Z(t,e,"internal-error"),kR(t,new da(i),i.bypassAuthState)}function KR(i){return _(this,null,function*(){let{auth:e,user:t}=i;return Z(t,e,"internal-error"),AR(t,new da(i),i.bypassAuthState)})}var Zf=class{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GR;case"linkViaPopup":case"linkViaRedirect":return KR;case"reauthViaPopup":case"reauthViaRedirect":return YR;default:kn(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var v2=new pr(2e3,1e4);var XR="pendingRedirect",_c=new Map,ep=class i extends Zf{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){return _(this,null,function*(){let e=_c.get(this.auth._key());if(!e){try{let n=(yield QR(this.resolver,this.auth))?yield Bn(i.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}_c.set(this.auth._key(),e)}return this.bypassAuthState||_c.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Bn(i.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Bn(i.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function QR(i,e){return _(this,null,function*(){let t=ex(e),n=ZR(i);if(!(yield n._isAvailable()))return!1;let r=(yield n._get(t))==="true";return yield n._remove(t),r})}function JR(i,e){_c.set(i._key(),e)}function ZR(i){return Xn(i._redirectPersistence)}function ex(i){return gc(XR,i.config.apiKey,i.name)}function tx(i,e,t=!1){return _(this,null,function*(){if(Ft(i.app))return Promise.reject(Qn(i));let n=gr(i),r=qR(n,e),o=yield new ep(n,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield n._persistUserIfCurrent(o.user),yield n._setRedirectUser(null,e)),o})}var nx=600*1e3,tp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ix(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Zb(e)){let r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(_b(e))}saveEventToCache(e){this.cachedEventUids.add(_b(e)),this.lastProcessedEventTime=Date.now()}};function _b(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Zb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function ix(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(i);default:return!1}}function rx(t){return _(this,arguments,function*(i,e={}){return Ai(i,"GET","/v1/projects",e)})}var sx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ox=/^https?/;function ax(i){return _(this,null,function*(){if(i.config.emulator)return;let{authorizedDomains:e}=yield rx(i);for(let t of e)try{if(lx(t))return}catch{}kn(i,"unauthorized-domain")})}function lx(i){let e=Ff(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){let o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!ox.test(t))return!1;if(sx.test(i))return n===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}var cx=new pr(3e4,6e4);function vb(){let i=An().___jsl;if(i?.H){for(let e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function dx(i){return new Promise((e,t)=>{var n,r,s;function o(){vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vb(),t(fr(i,"network-request-failed"))},timeout:cx.get()})}if(!((r=(n=An().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=An().gapi)===null||s===void 0)&&s.load)o();else{let l=zb("iframefcb");return An()[l]=()=>{gapi.load?o():t(fr(i,"network-request-failed"))},Bb(`${gR()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw vc=null,e})}var vc=null;function ux(i){return vc=vc||dx(i),vc}var hx=new pr(5e3,15e3),fx="__/auth/iframe",px="emulator/auth/iframe",mx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _x(i){let e=i.config;Z(e.authDomain,i,"auth-domain-config-required");let t=e.emulator?sp(e,px):`https://${i.config.authDomain}/${fx}`,n={apiKey:e.apiKey,appName:i.name,v:bi},r=gx.get(i.config.apiHost);r&&(n.eid=r);let s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Jo(n).slice(1)}`}function vx(i){return _(this,null,function*(){let e=yield ux(i),t=An().gapi;return Z(t,i,"internal-error"),e.open({where:document.body,url:_x(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mx,dontclear:!0},n=>new Promise((r,s)=>_(null,null,function*(){yield n.restyle({setHideOnLeave:!1});let o=fr(i,"network-request-failed"),l=An().setTimeout(()=>{s(o)},hx.get());function c(){An().clearTimeout(l),r(n)}n.ping(c).then(c,()=>{s(o)})})))})}var yx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wx=500,bx=600,Ex="_blank",Tx="http://localhost",Rc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Cx(i,e,t,n=wx,r=bx){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),l="",c=Object.assign(Object.assign({},yx),{width:n.toString(),height:r.toString(),top:s,left:o}),d=Ue().toLowerCase();t&&(l=Pb(d)?Ex:t),Rb(d)&&(e=e||Tx,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[E,T])=>`${g}${E}=${T},`,"");if(dR(d)&&l!=="_self")return Ix(e||"",l),new Rc(null);let p=window.open(e||"",l,h);Z(p,i,"popup-blocked");try{p.focus()}catch{}return new Rc(p)}function Ix(i,e){let t=document.createElement("a");t.href=i,t.target=e;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}var Dx="__/auth/handler",Sx="emulator/auth/handler",Ax=encodeURIComponent("fac");function yb(i,e,t,n,r,s){return _(this,null,function*(){Z(i.config.authDomain,i,"auth-domain-config-required"),Z(i.config.apiKey,i,"invalid-api-key");let o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:bi,eventId:r};if(e instanceof Dc){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",Vw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Kf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}i.tenantId&&(o.tid=i.tenantId);let l=o;for(let h of Object.keys(l))l[h]===void 0&&delete l[h];let c=yield i._getAppCheckToken(),d=c?`#${Ax}=${encodeURIComponent(c)}`:"";return`${kx(i)}?${Jo(l).slice(1)}${d}`})}function kx({config:i}){return i.emulator?sp(i,Sx):`https://${i.authDomain}/${Dx}`}var Nf="webStorageSupport",np=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_p,this._completeRedirectFn=tx,this._overrideRedirectResult=JR}_openPopup(e,t,n,r){return _(this,null,function*(){var s;Di((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield yb(e,t,n,Ff(),r);return Cx(e,o,Yb())})}_openRedirect(e,t,n,r){return _(this,null,function*(){yield this._originValidation(e);let s=yield yb(e,t,n,Ff(),r);return NR(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Di(s,"If manager is not set, promise should be"),s)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){return _(this,null,function*(){let t=yield vx(e),n=new tp(e);return t.register("authEvent",r=>(Z(r?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nf,{type:Nf},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Nf];o!==void 0&&t(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ax(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fb()||xb()||cp()}},e0=np;var wb="@firebase/auth",bb="1.10.8";var ip=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rx(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xx(i){ht(new He("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let c={apiKey:o,authDomain:l,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lb(i)},d=new $f(n,r,s,c);return vR(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ht(new He("auth-internal",e=>{let t=gr(e.getProvider("auth").getImmediate());return(n=>new ip(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ve(wb,bb,Rx(i)),ve(wb,bb,"esm2017")}var Px=300,Ox=cf("authIdTokenMaxAge")||Px,Eb=null,Mx=i=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ox)return;let r=t?.token;Eb!==r&&(Eb=r,yield fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function vp(i=In()){let e=cn(i,"auth");if(e.isInitialized())return e.getImmediate();let t=dp(i,{popupRedirectResolver:e0,persistence:[Jb,Gb,_p]}),n=cf("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(n,location.origin);if(location.origin===s.origin){let o=Mx(s.toString());mp(t,o,()=>o(t.currentUser)),Pc(t,l=>o(l))}}let r=af("auth");return r&&up(t,`http://${r}`),t}function Vx(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}pR({loadJS(i){return new Promise((e,t)=>{let n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=r=>{let s=fr("internal-error");s.customData=r,t(s)},n.type="text/javascript",n.charset="UTF-8",Vx().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xx("Browser");function n0(i){return new At(function(e){var t=Oc(i,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var i0="auth",_r=class{constructor(e){return e}},ha=class{constructor(){return Ei(i0)}};var yp=new pe("angularfire2.auth-instances");function TP(i,e){let t=hr(i0,i,e);return t&&new _r(t)}function CP(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new _r(n)}}var IP={provide:ha,deps:[[new ot,yp]]},DP={provide:_r,useFactory:TP,deps:[[new ot,yp],dn]};function dB(i,...e){return ve("angularfire",Dn.full,"auth"),ci([DP,IP,{provide:yp,useFactory:CP(i),multi:!0,deps:[ne,De,Sn,Yn,[new ot,ps],...e]}])}var uB=Pe(n0,!0);var hB=Pe(fp,!0,2);var fB=Pe(vp,!0);var pB=Pe(pp,!0,2);var mB=Pe(gp,!0,2);var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s0={};var Jn,wp;(function(){var i;function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(D,w,C){for(var b=Array(arguments.length-2),je=2;je<arguments.length;je++)b[je-2]=arguments[je];return v.prototype[w].apply(D,b)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var D=Array(16);if(typeof v=="string")for(var w=0;16>w;++w)D[w]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(w=0;16>w;++w)D[w]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],w=I.g[2];var C=I.g[3],b=v+(C^y&(w^C))+D[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=C+(w^v&(y^w))+D[1]+3905402710&4294967295,C=v+(b<<12&4294967295|b>>>20),b=w+(y^C&(v^y))+D[2]+606105819&4294967295,w=C+(b<<17&4294967295|b>>>15),b=y+(v^w&(C^v))+D[3]+3250441966&4294967295,y=w+(b<<22&4294967295|b>>>10),b=v+(C^y&(w^C))+D[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=C+(w^v&(y^w))+D[5]+1200080426&4294967295,C=v+(b<<12&4294967295|b>>>20),b=w+(y^C&(v^y))+D[6]+2821735955&4294967295,w=C+(b<<17&4294967295|b>>>15),b=y+(v^w&(C^v))+D[7]+4249261313&4294967295,y=w+(b<<22&4294967295|b>>>10),b=v+(C^y&(w^C))+D[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=C+(w^v&(y^w))+D[9]+2336552879&4294967295,C=v+(b<<12&4294967295|b>>>20),b=w+(y^C&(v^y))+D[10]+4294925233&4294967295,w=C+(b<<17&4294967295|b>>>15),b=y+(v^w&(C^v))+D[11]+2304563134&4294967295,y=w+(b<<22&4294967295|b>>>10),b=v+(C^y&(w^C))+D[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=C+(w^v&(y^w))+D[13]+4254626195&4294967295,C=v+(b<<12&4294967295|b>>>20),b=w+(y^C&(v^y))+D[14]+2792965006&4294967295,w=C+(b<<17&4294967295|b>>>15),b=y+(v^w&(C^v))+D[15]+1236535329&4294967295,y=w+(b<<22&4294967295|b>>>10),b=v+(w^C&(y^w))+D[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=C+(y^w&(v^y))+D[6]+3225465664&4294967295,C=v+(b<<9&4294967295|b>>>23),b=w+(v^y&(C^v))+D[11]+643717713&4294967295,w=C+(b<<14&4294967295|b>>>18),b=y+(C^v&(w^C))+D[0]+3921069994&4294967295,y=w+(b<<20&4294967295|b>>>12),b=v+(w^C&(y^w))+D[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=C+(y^w&(v^y))+D[10]+38016083&4294967295,C=v+(b<<9&4294967295|b>>>23),b=w+(v^y&(C^v))+D[15]+3634488961&4294967295,w=C+(b<<14&4294967295|b>>>18),b=y+(C^v&(w^C))+D[4]+3889429448&4294967295,y=w+(b<<20&4294967295|b>>>12),b=v+(w^C&(y^w))+D[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=C+(y^w&(v^y))+D[14]+3275163606&4294967295,C=v+(b<<9&4294967295|b>>>23),b=w+(v^y&(C^v))+D[3]+4107603335&4294967295,w=C+(b<<14&4294967295|b>>>18),b=y+(C^v&(w^C))+D[8]+1163531501&4294967295,y=w+(b<<20&4294967295|b>>>12),b=v+(w^C&(y^w))+D[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=C+(y^w&(v^y))+D[2]+4243563512&4294967295,C=v+(b<<9&4294967295|b>>>23),b=w+(v^y&(C^v))+D[7]+1735328473&4294967295,w=C+(b<<14&4294967295|b>>>18),b=y+(C^v&(w^C))+D[12]+2368359562&4294967295,y=w+(b<<20&4294967295|b>>>12),b=v+(y^w^C)+D[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=C+(v^y^w)+D[8]+2272392833&4294967295,C=v+(b<<11&4294967295|b>>>21),b=w+(C^v^y)+D[11]+1839030562&4294967295,w=C+(b<<16&4294967295|b>>>16),b=y+(w^C^v)+D[14]+4259657740&4294967295,y=w+(b<<23&4294967295|b>>>9),b=v+(y^w^C)+D[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=C+(v^y^w)+D[4]+1272893353&4294967295,C=v+(b<<11&4294967295|b>>>21),b=w+(C^v^y)+D[7]+4139469664&4294967295,w=C+(b<<16&4294967295|b>>>16),b=y+(w^C^v)+D[10]+3200236656&4294967295,y=w+(b<<23&4294967295|b>>>9),b=v+(y^w^C)+D[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=C+(v^y^w)+D[0]+3936430074&4294967295,C=v+(b<<11&4294967295|b>>>21),b=w+(C^v^y)+D[3]+3572445317&4294967295,w=C+(b<<16&4294967295|b>>>16),b=y+(w^C^v)+D[6]+76029189&4294967295,y=w+(b<<23&4294967295|b>>>9),b=v+(y^w^C)+D[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=C+(v^y^w)+D[12]+3873151461&4294967295,C=v+(b<<11&4294967295|b>>>21),b=w+(C^v^y)+D[15]+530742520&4294967295,w=C+(b<<16&4294967295|b>>>16),b=y+(w^C^v)+D[2]+3299628645&4294967295,y=w+(b<<23&4294967295|b>>>9),b=v+(w^(y|~C))+D[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=C+(y^(v|~w))+D[7]+1126891415&4294967295,C=v+(b<<10&4294967295|b>>>22),b=w+(v^(C|~y))+D[14]+2878612391&4294967295,w=C+(b<<15&4294967295|b>>>17),b=y+(C^(w|~v))+D[5]+4237533241&4294967295,y=w+(b<<21&4294967295|b>>>11),b=v+(w^(y|~C))+D[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=C+(y^(v|~w))+D[3]+2399980690&4294967295,C=v+(b<<10&4294967295|b>>>22),b=w+(v^(C|~y))+D[10]+4293915773&4294967295,w=C+(b<<15&4294967295|b>>>17),b=y+(C^(w|~v))+D[1]+2240044497&4294967295,y=w+(b<<21&4294967295|b>>>11),b=v+(w^(y|~C))+D[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=C+(y^(v|~w))+D[15]+4264355552&4294967295,C=v+(b<<10&4294967295|b>>>22),b=w+(v^(C|~y))+D[6]+2734768916&4294967295,w=C+(b<<15&4294967295|b>>>17),b=y+(C^(w|~v))+D[13]+1309151649&4294967295,y=w+(b<<21&4294967295|b>>>11),b=v+(w^(y|~C))+D[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=C+(y^(v|~w))+D[11]+3174756917&4294967295,C=v+(b<<10&4294967295|b>>>22),b=w+(v^(C|~y))+D[2]+718787259&4294967295,w=C+(b<<15&4294967295|b>>>17),b=y+(C^(w|~v))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(w+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+C&4294967295}n.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,D=this.B,w=this.h,C=0;C<v;){if(w==0)for(;C<=y;)r(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<v;)if(D[w++]=I.charCodeAt(C++),w==this.blockSize){r(this,D),w=0;break}}else for(;C<v;)if(D[w++]=I[C++],w==this.blockSize){r(this,D),w=0;break}}this.h=w,this.o+=v},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var D=0;32>D;D+=8)I[y++]=this.g[v]>>>D&255;return I};function s(I,v){var y=l;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],D=!0,w=I.length-1;0<=w;w--){var C=I[w]|0;D&&C==v||(y[w]=C,D=!1)}this.g=y}var l={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return R(d(-I));for(var v=[],y=1,D=0;I>=y;D++)v[D]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return R(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(v,8)),D=p,w=0;w<I.length;w+=8){var C=Math.min(8,I.length-w),b=parseInt(I.substring(w,w+C),v);8>C?(C=d(Math.pow(v,C)),D=D.j(C).add(d(b))):(D=D.j(y),D=D.add(d(b)))}return D}var p=c(0),g=c(1),E=c(16777216);i=o.prototype,i.m=function(){if(k(this))return-R(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var D=this.i(y);I+=(0<=D?D:4294967296+D)*v,v*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(k(this))return"-"+R(this).toString(I);for(var v=d(Math.pow(I,6)),y=this,D="";;){var w=H(y,v).g;y=B(y,w.j(v));var C=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=w,T(y))return C+D;for(;6>C.length;)C="0"+C;D=C+D}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}i.l=function(I){return I=B(this,I),k(I)?-1:T(I)?0:1};function R(I){for(var v=I.g.length,y=[],D=0;D<v;D++)y[D]=~I.g[D];return new o(y,~I.h).add(g)}i.abs=function(){return k(this)?R(this):this},i.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],D=0,w=0;w<=v;w++){var C=D+(this.i(w)&65535)+(I.i(w)&65535),b=(C>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);D=b>>>16,C&=65535,b&=65535,y[w]=b<<16|C}return new o(y,y[y.length-1]&-2147483648?-1:0)};function B(I,v){return I.add(R(v))}i.j=function(I){if(T(this)||T(I))return p;if(k(this))return k(I)?R(this).j(R(I)):R(R(this).j(I));if(k(I))return R(this.j(R(I)));if(0>this.l(E)&&0>I.l(E))return d(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],D=0;D<2*v;D++)y[D]=0;for(D=0;D<this.g.length;D++)for(var w=0;w<I.g.length;w++){var C=this.i(D)>>>16,b=this.i(D)&65535,je=I.i(w)>>>16,si=I.i(w)&65535;y[2*D+2*w]+=b*si,F(y,2*D+2*w),y[2*D+2*w+1]+=C*si,F(y,2*D+2*w+1),y[2*D+2*w+1]+=b*je,F(y,2*D+2*w+1),y[2*D+2*w+2]+=C*je,F(y,2*D+2*w+2)}for(D=0;D<v;D++)y[D]=y[2*D+1]<<16|y[2*D];for(D=v;D<2*v;D++)y[D]=0;return new o(y,0)};function F(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function M(I,v){this.g=I,this.h=v}function H(I,v){if(T(v))throw Error("division by zero");if(T(I))return new M(p,p);if(k(I))return v=H(R(I),v),new M(R(v.g),R(v.h));if(k(v))return v=H(I,R(v)),new M(R(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=g,D=v;0>=D.l(I);)y=W(y),D=W(D);var w=G(y,1),C=G(D,1);for(D=G(D,2),y=G(y,2);!T(D);){var b=C.add(D);0>=b.l(I)&&(w=w.add(y),C=b),D=G(D,1),y=G(y,1)}return v=B(I,w.j(v)),new M(w,v)}for(w=p;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),D=Math.ceil(Math.log(y)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),C=d(y),b=C.j(v);k(b)||0<b.l(I);)y-=D,C=d(y),b=C.j(v);T(C)&&(C=g),w=w.add(C),I=B(I,b)}return new M(w,I)}i.A=function(I){return H(this,I).h},i.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],D=0;D<v;D++)y[D]=this.i(D)&I.i(D);return new o(y,this.h&I.h)},i.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],D=0;D<v;D++)y[D]=this.i(D)|I.i(D);return new o(y,this.h|I.h)},i.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],D=0;D<v;D++)y[D]=this.i(D)^I.i(D);return new o(y,this.h^I.h)};function W(I){for(var v=I.g.length+1,y=[],D=0;D<v;D++)y[D]=I.i(D)<<1|I.i(D-1)>>>31;return new o(y,I.h)}function G(I,v){var y=v>>5;v%=32;for(var D=I.g.length-y,w=[],C=0;C<D;C++)w[C]=0<v?I.i(C+y)>>>v|I.i(C+y+1)<<32-v:I.i(C+y);return new o(w,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,wp=s0.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Jn=s0.Integer=o}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zn={};var bp,SP,gs,Ep,fa,Nc,Tp,Cp,Ip;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,f){return a==Array.prototype||a==Object.prototype||(a[u]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var u=0;u<a.length;++u){var f=a[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var n=t(this);function r(a,u){if(u)e:{var f=n;a=a.split(".");for(var m=0;m<a.length-1;m++){var A=a[m];if(!(A in f))break e;f=f[A]}a=a[a.length-1],m=f[a],u=u(m),u!=m&&u!=null&&e(f,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var f=0,m=!1,A={next:function(){if(!m&&f<a.length){var P=f++;return{value:u(P,a[P]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,f){return f})}});var o=o||{},l=this||self;function c(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function h(a,u,f){return a.call.apply(a.bind,arguments)}function p(a,u,f){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function g(a,u,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function E(a,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function T(a,u){function f(){}f.prototype=u.prototype,a.aa=u.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(m,A,P){for(var L=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)L[Ie-2]=arguments[Ie];return u.prototype[A].apply(m,L)}}function k(a){let u=a.length;if(0<u){let f=Array(u);for(let m=0;m<u;m++)f[m]=a[m];return f}return[]}function R(a,u){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let A=a.length||0,P=m.length||0;a.length=A+P;for(let L=0;L<P;L++)a[A+L]=m[L]}else a.push(m)}}class B{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function F(a){return/^[\s\xa0]*$/.test(a)}function M(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function H(a){return H[" "](a),a}H[" "]=function(){};var W=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function G(a,u,f){for(let m in a)u.call(f,a[m],m,a)}function I(a,u){for(let f in a)u.call(void 0,a[f],f,a)}function v(a){let u={};for(let f in a)u[f]=a[f];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(a,u){let f,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(f in m)a[f]=m[f];for(let P=0;P<y.length;P++)f=y[P],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function w(a){var u=1;a=a.split(":");let f=[];for(;0<u&&a.length;)f.push(a.shift()),u--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function b(){var a=vo;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class je{constructor(){this.h=this.g=null}add(u,f){let m=si.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var si=new B(()=>new Fu,a=>a.reset());class Fu{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Vt,Xi=!1,vo=new je,Kr=()=>{let a=l.Promise.resolve(void 0);Vt=()=>{a.then(dl)}};var dl=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(f){C(f)}var u=si;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Xi=!1};function Gt(){this.s=this.s,this.C=this.C}Gt.prototype.s=!1,Gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var Lu=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};l.addEventListener("test",f,u),l.removeEventListener("test",f,u)}catch{}return a})();function yo(a,u){if(lt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(W){e:{try{H(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else f=="mouseover"?u=a.fromElement:f=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fD[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&yo.aa.h.call(this)}}T(yo,lt);var fD={2:"touch",3:"pen",4:"mouse"};yo.prototype.h=function(){yo.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var wo="closure_listenable_"+(1e6*Math.random()|0),pD=0;function mD(a,u,f,m,A){this.listener=a,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=A,this.key=++pD,this.da=this.fa=!1}function ul(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function hl(a){this.src=a,this.g={},this.h=0}hl.prototype.add=function(a,u,f,m,A){var P=a.toString();a=this.g[P],a||(a=this.g[P]=[],this.h++);var L=zu(a,u,m,A);return-1<L?(u=a[L],f||(u.fa=!1)):(u=new mD(u,this.src,P,!!m,A),u.fa=f,a.push(u)),u};function Bu(a,u){var f=u.type;if(f in a.g){var m=a.g[f],A=Array.prototype.indexOf.call(m,u,void 0),P;(P=0<=A)&&Array.prototype.splice.call(m,A,1),P&&(ul(u),a.g[f].length==0&&(delete a.g[f],a.h--))}}function zu(a,u,f,m){for(var A=0;A<a.length;++A){var P=a[A];if(!P.da&&P.listener==u&&P.capture==!!f&&P.ha==m)return A}return-1}var Uu="closure_lm_"+(1e6*Math.random()|0),Hu={};function J_(a,u,f,m,A){if(m&&m.once)return ev(a,u,f,m,A);if(Array.isArray(u)){for(var P=0;P<u.length;P++)J_(a,u[P],f,m,A);return null}return f=qu(f),a&&a[wo]?a.K(u,f,d(m)?!!m.capture:!!m,A):Z_(a,u,f,!1,m,A)}function Z_(a,u,f,m,A,P){if(!u)throw Error("Invalid event type");var L=d(A)?!!A.capture:!!A,Ie=$u(a);if(Ie||(a[Uu]=Ie=new hl(a)),f=Ie.add(u,f,m,L,P),f.proxy)return f;if(m=gD(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)Lu||(A=L),A===void 0&&(A=!1),a.addEventListener(u.toString(),m,A);else if(a.attachEvent)a.attachEvent(nv(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function gD(){function a(f){return u.call(a.src,a.listener,f)}let u=_D;return a}function ev(a,u,f,m,A){if(Array.isArray(u)){for(var P=0;P<u.length;P++)ev(a,u[P],f,m,A);return null}return f=qu(f),a&&a[wo]?a.L(u,f,d(m)?!!m.capture:!!m,A):Z_(a,u,f,!0,m,A)}function tv(a,u,f,m,A){if(Array.isArray(u))for(var P=0;P<u.length;P++)tv(a,u[P],f,m,A);else m=d(m)?!!m.capture:!!m,f=qu(f),a&&a[wo]?(a=a.i,u=String(u).toString(),u in a.g&&(P=a.g[u],f=zu(P,f,m,A),-1<f&&(ul(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete a.g[u],a.h--)))):a&&(a=$u(a))&&(u=a.g[u.toString()],a=-1,u&&(a=zu(u,f,m,A)),(f=-1<a?u[a]:null)&&ju(f))}function ju(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[wo])Bu(u.i,a);else{var f=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(f,m,a.capture):u.detachEvent?u.detachEvent(nv(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=$u(u))?(Bu(f,a),f.h==0&&(f.src=null,u[Uu]=null)):ul(a)}}}function nv(a){return a in Hu?Hu[a]:Hu[a]="on"+a}function _D(a,u){if(a.da)a=!0;else{u=new yo(u,this);var f=a.listener,m=a.ha||a.src;a.fa&&ju(a),a=f.call(m,u)}return a}function $u(a){return a=a[Uu],a instanceof hl?a:null}var Wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function qu(a){return typeof a=="function"?a:(a[Wu]||(a[Wu]=function(u){return a.handleEvent(u)}),a[Wu])}function gt(){Gt.call(this),this.i=new hl(this),this.M=this,this.F=null}T(gt,Gt),gt.prototype[wo]=!0,gt.prototype.removeEventListener=function(a,u,f,m){tv(this,a,u,f,m)};function Dt(a,u){var f,m=a.F;if(m)for(f=[];m;m=m.F)f.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new lt(u,a);else if(u instanceof lt)u.target=u.target||a;else{var A=u;u=new lt(m,a),D(u,A)}if(A=!0,f)for(var P=f.length-1;0<=P;P--){var L=u.g=f[P];A=fl(L,m,!0,u)&&A}if(L=u.g=a,A=fl(L,m,!0,u)&&A,A=fl(L,m,!1,u)&&A,f)for(P=0;P<f.length;P++)L=u.g=f[P],A=fl(L,m,!1,u)&&A}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var f=a.g[u],m=0;m<f.length;m++)ul(f[m]);delete a.g[u],a.h--}}this.F=null},gt.prototype.K=function(a,u,f,m){return this.i.add(String(a),u,!1,f,m)},gt.prototype.L=function(a,u,f,m){return this.i.add(String(a),u,!0,f,m)};function fl(a,u,f,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,P=0;P<u.length;++P){var L=u[P];if(L&&!L.da&&L.capture==f){var Ie=L.listener,ct=L.ha||L.src;L.fa&&Bu(a.i,L),A=Ie.call(ct,m)!==!1&&A}}return A&&!m.defaultPrevented}function iv(a,u,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(a,u||0)}function rv(a){a.g=iv(()=>{a.g=null,a.i&&(a.i=!1,rv(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class vD extends Gt{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:rv(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bo(a){Gt.call(this),this.h=a,this.g={}}T(bo,Gt);var sv=[];function ov(a){G(a.g,function(u,f){this.g.hasOwnProperty(f)&&ju(u)},a),a.g={}}bo.prototype.N=function(){bo.aa.N.call(this),ov(this)},bo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gu=l.JSON.stringify,yD=l.JSON.parse,wD=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Yu(){}Yu.prototype.h=null;function av(a){return a.h||(a.h=a.i())}function lv(){}var Eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ku(){lt.call(this,"d")}T(Ku,lt);function Xu(){lt.call(this,"c")}T(Xu,lt);var Qi={},cv=null;function pl(){return cv=cv||new gt}Qi.La="serverreachability";function dv(a){lt.call(this,Qi.La,a)}T(dv,lt);function To(a){let u=pl();Dt(u,new dv(u))}Qi.STAT_EVENT="statevent";function uv(a,u){lt.call(this,Qi.STAT_EVENT,a),this.stat=u}T(uv,lt);function St(a){let u=pl();Dt(u,new uv(u,a))}Qi.Ma="timingevent";function hv(a,u){lt.call(this,Qi.Ma,a),this.size=u}T(hv,lt);function Co(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},u)}function Io(){this.g=!0}Io.prototype.xa=function(){this.g=!1};function bD(a,u,f,m,A,P){a.info(function(){if(a.g)if(P)for(var L="",Ie=P.split("&"),ct=0;ct<Ie.length;ct++){var fe=Ie[ct].split("=");if(1<fe.length){var _t=fe[0];fe=fe[1];var vt=_t.split("_");L=2<=vt.length&&vt[1]=="type"?L+(_t+"="+fe+"&"):L+(_t+"=redacted&")}}else L=null;else L=P;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+u+`
`+f+`
`+L})}function ED(a,u,f,m,A,P,L){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+u+`
`+f+`
`+P+" "+L})}function Xr(a,u,f,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+CD(a,f)+(m?" "+m:"")})}function TD(a,u){a.info(function(){return"TIMEOUT: "+u})}Io.prototype.info=function(){};function CD(a,u){if(!a.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var m=f[a];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(var L=1;L<A.length;L++)A[L]=""}}}}return Gu(f)}catch{return u}}var ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qu;function gl(){}T(gl,Yu),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},Qu=new gl;function oi(a,u,f,m){this.j=a,this.i=u,this.l=f,this.R=m||1,this.U=new bo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pv}function pv(){this.i=null,this.g="",this.h=!1}var mv={},Ju={};function Zu(a,u,f){a.L=1,a.v=wl(Fn(u)),a.m=f,a.P=!0,gv(a,null)}function gv(a,u){a.F=Date.now(),_l(a),a.A=Fn(a.v);var f=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Rv(f.i,"t",m),a.C=0,f=a.j.J,a.h=new pv,a.g=Yv(a.j,f?u:null,!a.m),0<a.O&&(a.M=new vD(g(a.Y,a,a.g),a.O)),u=a.U,f=a.g,m=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(sv[0]=A.toString()),A=sv);for(var P=0;P<A.length;P++){var L=J_(f,A[P],m||u.handleEvent,!1,u.h||u);if(!L)break;u.g[L.key]=L}u=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),To(),bD(a.i,a.u,a.A,a.l,a.R,a.m)}oi.prototype.ca=function(a){a=a.target;let u=this.M;u&&Ln(a)==3?u.j():this.Y(a)},oi.prototype.Y=function(a){try{if(a==this.g)e:{let vt=Ln(this.g);var u=this.g.Ba();let Zr=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||Fv(this.g)))){this.J||vt!=4||u==7||(u==8||0>=Zr?To(3):To(2)),eh(this);var f=this.g.Z();this.X=f;t:if(_v(this)){var m=Fv(this.g);a="";var A=m.length,P=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ji(this),Do(this);var L="";break t}this.h.i=new l.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(P&&u==A-1)});m.length=0,this.h.g+=a,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,ED(this.i,this.u,this.A,this.l,this.R,vt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,ct=this.g;if((Ie=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Ie)){var fe=Ie;break t}}fe=null}if(f=fe)Xr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,th(this,f);else{this.o=!1,this.s=3,St(12),Ji(this),Do(this);break e}}if(this.P){f=!0;let en;for(;!this.J&&this.C<L.length;)if(en=ID(this,L),en==Ju){vt==4&&(this.s=4,St(14),f=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(en==mv){this.s=4,St(15),Xr(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Xr(this.i,this.l,en,null),th(this,en);if(_v(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||L.length!=0||this.h.h||(this.s=1,St(16),f=!1),this.o=this.o&&f,!f)Xr(this.i,this.l,L,"[Invalid Chunked Response]"),Ji(this),Do(this);else if(0<L.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),ah(_t),_t.M=!0,St(11))}}else Xr(this.i,this.l,L,null),th(this,L);vt==4&&Ji(this),this.o&&!this.J&&(vt==4?$v(this.j,this):(this.o=!1,_l(this)))}else HD(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Ji(this),Do(this)}}}catch{}finally{}};function _v(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ID(a,u){var f=a.C,m=u.indexOf(`
`,f);return m==-1?Ju:(f=Number(u.substring(f,m)),isNaN(f)?mv:(m+=1,m+f>u.length?Ju:(u=u.slice(m,m+f),a.C=m+f,u)))}oi.prototype.cancel=function(){this.J=!0,Ji(this)};function _l(a){a.S=Date.now()+a.I,vv(a,a.I)}function vv(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Co(g(a.ba,a),u)}function eh(a){a.B&&(l.clearTimeout(a.B),a.B=null)}oi.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(TD(this.i,this.A),this.L!=2&&(To(),St(17)),Ji(this),this.s=2,Do(this)):vv(this,this.S-a)};function Do(a){a.j.G==0||a.J||$v(a.j,a)}function Ji(a){eh(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,ov(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function th(a,u){try{var f=a.j;if(f.G!=0&&(f.g==a||nh(f.h,a))){if(!a.K&&nh(f.h,a)&&f.G==3){try{var m=f.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Il(f),Tl(f);else break e;oh(f),St(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=Co(g(f.Za,f),6e3));if(1>=bv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else er(f,11)}else if((a.K||f.g==a)&&Il(f),!F(u))for(A=f.Da.g.parse(u),u=0;u<A.length;u++){let fe=A[u];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let _t=fe[3];_t!=null&&(f.la=_t,f.j.info("VER="+f.la));let vt=fe[4];vt!=null&&(f.Aa=vt,f.j.info("SVER="+f.Aa));let Zr=fe[5];Zr!=null&&typeof Zr=="number"&&0<Zr&&(m=1.5*Zr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let en=a.g;if(en){let Sl=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var P=m.h;P.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(ih(P,P.h),P.h=null))}if(m.D){let lh=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;lh&&(m.ya=lh,xe(m.I,m.D,lh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=a;if(m.qa=Gv(m,m.J?m.ia:null,m.W),L.K){Ev(m.h,L);var Ie=L,ct=m.L;ct&&(Ie.I=ct),Ie.B&&(eh(Ie),_l(Ie)),m.g=L}else Hv(m);0<f.i.length&&Cl(f)}else fe[0]!="stop"&&fe[0]!="close"||er(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?er(f,7):sh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}To(4)}catch{}}var DD=class{constructor(a,u){this.g=a,this.map=u}};function yv(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bv(a){return a.h?1:a.g?a.g.size:0}function nh(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function ih(a,u){a.g?a.g.add(u):a.h=u}function Ev(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}yv.prototype.cancel=function(){if(this.i=Tv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Tv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let f of a.g.values())u=u.concat(f.D);return u}return k(a.i)}function SD(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var u=[],f=a.length,m=0;m<f;m++)u.push(a[m]);return u}u=[],f=0;for(m in a)u[f++]=a[m];return u}function AD(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var u=[];a=a.length;for(var f=0;f<a;f++)u.push(f);return u}u=[],f=0;for(let m in a)u[f++]=m;return u}}}function Cv(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var f=AD(a),m=SD(a),A=m.length,P=0;P<A;P++)u.call(void 0,m[P],f&&f[P],a)}var Iv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kD(a,u){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].indexOf("="),A=null;if(0<=m){var P=a[f].substring(0,m);A=a[f].substring(m+1)}else P=a[f];u(P,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Zi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zi){this.h=a.h,vl(this,a.j),this.o=a.o,this.g=a.g,yl(this,a.s),this.l=a.l;var u=a.i,f=new ko;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),Dv(this,f),this.m=a.m}else a&&(u=String(a).match(Iv))?(this.h=!1,vl(this,u[1]||"",!0),this.o=So(u[2]||""),this.g=So(u[3]||"",!0),yl(this,u[4]),this.l=So(u[5]||"",!0),Dv(this,u[6]||"",!0),this.m=So(u[7]||"")):(this.h=!1,this.i=new ko(null,this.h))}Zi.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Ao(u,Sv,!0),":");var f=this.g;return(f||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Ao(u,Sv,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ao(f,f.charAt(0)=="/"?PD:xD,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ao(f,MD)),a.join("")};function Fn(a){return new Zi(a)}function vl(a,u,f){a.j=f?So(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function yl(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Dv(a,u,f){u instanceof ko?(a.i=u,VD(a.i,a.h)):(f||(u=Ao(u,OD)),a.i=new ko(u,a.h))}function xe(a,u,f){a.i.set(u,f)}function wl(a){return xe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function So(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ao(a,u,f){return typeof a=="string"?(a=encodeURI(a).replace(u,RD),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function RD(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sv=/[#\/\?@]/g,xD=/[#\?:]/g,PD=/[#\?]/g,OD=/[#\?@]/g,MD=/#/g;function ko(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function ai(a){a.g||(a.g=new Map,a.h=0,a.i&&kD(a.i,function(u,f){a.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}i=ko.prototype,i.add=function(a,u){ai(this),this.i=null,a=Qr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(u),this.h+=1,this};function Av(a,u){ai(a),u=Qr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function kv(a,u){return ai(a),u=Qr(a,u),a.g.has(u)}i.forEach=function(a,u){ai(this),this.g.forEach(function(f,m){f.forEach(function(A){a.call(u,A,m,this)},this)},this)},i.na=function(){ai(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let m=0;m<u.length;m++){let A=a[m];for(let P=0;P<A.length;P++)f.push(u[m])}return f},i.V=function(a){ai(this);let u=[];if(typeof a=="string")kv(this,a)&&(u=u.concat(this.g.get(Qr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)u=u.concat(a[f])}return u},i.set=function(a,u){return ai(this),this.i=null,a=Qr(this,a),kv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},i.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Rv(a,u,f){Av(a,u),0<f.length&&(a.i=null,a.g.set(Qr(a,u),k(f)),a.h+=f.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var m=u[f];let P=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var A=P;L[m]!==""&&(A+="="+encodeURIComponent(String(L[m]))),a.push(A)}}return this.i=a.join("&")};function Qr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function VD(a,u){u&&!a.j&&(ai(a),a.i=null,a.g.forEach(function(f,m){var A=m.toLowerCase();m!=A&&(Av(this,m),Rv(this,A,f))},a)),a.j=u}function ND(a,u){let f=new Io;if(l.Image){let m=new Image;m.onload=E(li,f,"TestLoadImage: loaded",!0,u,m),m.onerror=E(li,f,"TestLoadImage: error",!1,u,m),m.onabort=E(li,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=E(li,f,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function FD(a,u){let f=new Io,m=new AbortController,A=setTimeout(()=>{m.abort(),li(f,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(P=>{clearTimeout(A),P.ok?li(f,"TestPingServer: ok",!0,u):li(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),li(f,"TestPingServer: error",!1,u)})}function li(a,u,f,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(f)}catch{}}function LD(){this.g=new wD}function BD(a,u,f){let m=f||"";try{Cv(a,function(A,P){let L=A;d(A)&&(L=Gu(A)),u.push(m+P+"="+encodeURIComponent(L))})}catch(A){throw u.push(m+"type="+encodeURIComponent("_badmap")),A}}function Ro(a){this.l=a.Ub||null,this.j=a.eb||!1}T(Ro,Yu),Ro.prototype.g=function(){return new bl(this.l,this.j)},Ro.prototype.i=(function(a){return function(){return a}})({});function bl(a,u){gt.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(bl,gt),i=bl.prototype,i.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Po(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function xv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?xo(this):Po(this),this.readyState==3&&xv(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,xo(this))},i.Qa=function(a){this.g&&(this.response=a,xo(this))},i.ga=function(){this.g&&xo(this)};function xo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Po(a)}i.setRequestHeader=function(a,u){this.u.append(a,u)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=u.next();return a.join(`\r
`)};function Po(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Pv(a){let u="";return G(a,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function rh(a,u,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Pv(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):xe(a,u,f))}function Le(a){gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Le,gt);var zD=/^https?$/i,UD=["POST","PUT"];i=Le.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qu.g(),this.v=this.o?av(this.o):av(Qu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(P){Ov(this,P);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)f.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let P of m.keys())f.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),A=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(UD,u,void 0))||m||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,L]of f)this.g.setRequestHeader(P,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Nv(this),this.u=!0,this.g.send(a),this.u=!1}catch(P){Ov(this,P)}};function Ov(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Mv(a),El(a)}function Mv(a){a.A||(a.A=!0,Dt(a,"complete"),Dt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Dt(this,"complete"),Dt(this,"abort"),El(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),Le.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Vv(this):this.bb())},i.bb=function(){Vv(this)};function Vv(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ln(a)!=4||a.Z()!=2)){if(a.u&&Ln(a)==4)iv(a.Ea,0,a);else if(Dt(a,"readystatechange"),Ln(a)==4){a.h=!1;try{let L=a.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var m;if(m=L===0){var A=String(a.D).match(Iv)[1]||null;!A&&l.self&&l.self.location&&(A=l.self.location.protocol.slice(0,-1)),m=!zD.test(A?A.toLowerCase():"")}f=m}if(f)Dt(a,"complete"),Dt(a,"success");else{a.m=6;try{var P=2<Ln(a)?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.Z()+"]",Mv(a)}}finally{El(a)}}}}function El(a,u){if(a.g){Nv(a);let f=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Dt(a,"ready");try{f.onreadystatechange=m}catch{}}}function Nv(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function Ln(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),yD(u)}};function Fv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function HD(a){let u={};a=(a.g&&2<=Ln(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(F(a[m]))continue;var f=w(a[m]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let P=u[A]||[];u[A]=P,P.push(f)}I(u,function(m){return m.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||u}function Lv(a){this.Aa=0,this.i=[],this.j=new Io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new yv(a&&a.concurrentRequestLimit),this.Da=new LD,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Lv.prototype,i.la=8,i.G=1,i.connect=function(a,u,f,m){St(0),this.W=a,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Gv(this,null,this.W),Cl(this)};function sh(a){if(Bv(a),a.G==3){var u=a.U++,f=Fn(a.I);if(xe(f,"SID",a.K),xe(f,"RID",u),xe(f,"TYPE","terminate"),Mo(a,f),u=new oi(a,a.j,u),u.L=2,u.v=wl(Fn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=u.v,f=!0),f||(u.g=Yv(u.j,null),u.g.ea(u.v)),u.F=Date.now(),_l(u)}qv(a)}function Tl(a){a.g&&(ah(a),a.g.cancel(),a.g=null)}function Bv(a){Tl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Il(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Cl(a){if(!wv(a.h)&&!a.s){a.s=!0;var u=a.Ga;Vt||Kr(),Xi||(Vt(),Xi=!0),vo.add(u,a),a.B=0}}function jD(a,u){return bv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Co(g(a.Ga,a,u),Wv(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new oi(this,this.j,a),P=this.o;if(this.S&&(P?(P=v(P),D(P,this.S)):P=this.S),this.m!==null||this.O||(A.H=P,P=null),this.P)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=Uv(this,A,u),f=Fn(this.I),xe(f,"RID",a),xe(f,"CVER",22),this.D&&xe(f,"X-HTTP-Session-Id",this.D),Mo(this,f),P&&(this.O?u="headers="+encodeURIComponent(String(Pv(P)))+"&"+u:this.m&&rh(f,this.m,P)),ih(this.h,A),this.Ua&&xe(f,"TYPE","init"),this.P?(xe(f,"$req",u),xe(f,"SID","null"),A.T=!0,Zu(A,f,null)):Zu(A,f,u),this.G=2}}else this.G==3&&(a?zv(this,a):this.i.length==0||wv(this.h)||zv(this))};function zv(a,u){var f;u?f=u.l:f=a.U++;let m=Fn(a.I);xe(m,"SID",a.K),xe(m,"RID",f),xe(m,"AID",a.T),Mo(a,m),a.m&&a.o&&rh(m,a.m,a.o),f=new oi(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Uv(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ih(a.h,f),Zu(f,m,u)}function Mo(a,u){a.H&&G(a.H,function(f,m){xe(u,m,f)}),a.l&&Cv({},function(f,m){xe(u,m,f)})}function Uv(a,u,f){f=Math.min(a.i.length,f);var m=a.l?g(a.l.Na,a.l,a):null;e:{var A=a.i;let P=-1;for(;;){let L=["count="+f];P==-1?0<f?(P=A[0].g,L.push("ofs="+P)):P=0:L.push("ofs="+P);let Ie=!0;for(let ct=0;ct<f;ct++){let fe=A[ct].g,_t=A[ct].map;if(fe-=P,0>fe)P=Math.max(0,A[ct].g-100),Ie=!1;else try{BD(_t,L,"req"+fe+"_")}catch{m&&m(_t)}}if(Ie){m=L.join("&");break e}}}return a=a.i.splice(0,f),u.D=a,m}function Hv(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Vt||Kr(),Xi||(Vt(),Xi=!0),vo.add(u,a),a.v=0}}function oh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Co(g(a.Fa,a),Wv(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,jv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Co(g(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Tl(this),jv(this))};function ah(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function jv(a){a.g=new oi(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Fn(a.qa);xe(u,"RID","rpc"),xe(u,"SID",a.K),xe(u,"AID",a.T),xe(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&xe(u,"TO",a.ja),xe(u,"TYPE","xmlhttp"),Mo(a,u),a.m&&a.o&&rh(u,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=wl(Fn(u)),f.m=null,f.P=!0,gv(f,a)}i.Za=function(){this.C!=null&&(this.C=null,Tl(this),oh(this),St(19))};function Il(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function $v(a,u){var f=null;if(a.g==u){Il(a),ah(a),a.g=null;var m=2}else if(nh(a.h,u))f=u.D,Ev(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;m=pl(),Dt(m,new hv(m,f)),Cl(a)}else Hv(a);else if(A=u.s,A==3||A==0&&0<u.X||!(m==1&&jD(a,u)||m==2&&oh(a)))switch(f&&0<f.length&&(u=a.h,u.i=u.i.concat(f)),A){case 1:er(a,5);break;case 4:er(a,10);break;case 3:er(a,6);break;default:er(a,2)}}}function Wv(a,u){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*u}function er(a,u){if(a.j.info("Error code "+u),u==2){var f=g(a.fb,a),m=a.Xa;let A=!m;m=new Zi(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vl(m,"https"),wl(m),A?ND(m.toString(),f):FD(m.toString(),f)}else St(2);a.G=0,a.l&&a.l.sa(u),qv(a),Bv(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function qv(a){if(a.G=0,a.ka=[],a.l){let u=Tv(a.h);(u.length!=0||a.i.length!=0)&&(R(a.ka,u),R(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Gv(a,u,f){var m=f instanceof Zi?Fn(f):new Zi(f);if(m.g!="")u&&(m.g=u+"."+m.g),yl(m,m.s);else{var A=l.location;m=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var P=new Zi(null);m&&vl(P,m),u&&(P.g=u),A&&yl(P,A),f&&(P.l=f),m=P}return f=a.D,u=a.ya,f&&u&&xe(m,f,u),xe(m,"VER",a.la),Mo(a,m),m}function Yv(a,u,f){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Le(new Ro({eb:f})):new Le(a.pa),u.Ha(a.J),u}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kv(){}i=Kv.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Dl(){}Dl.prototype.g=function(a,u){return new zt(a,u)};function zt(a,u){gt.call(this),this.g=new Lv(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!F(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!F(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Jr(this)}T(zt,gt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){sh(this.g)},zt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Gu(a),a=f);u.i.push(new DD(u.Ya++,a)),u.G==3&&Cl(u)},zt.prototype.N=function(){this.g.l=null,delete this.j,sh(this.g),delete this.g,zt.aa.N.call(this)};function Xv(a){Ku.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let f in u){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}T(Xv,Ku);function Qv(){Xu.call(this),this.status=1}T(Qv,Xu);function Jr(a){this.g=a}T(Jr,Kv),Jr.prototype.ua=function(){Dt(this.g,"a")},Jr.prototype.ta=function(a){Dt(this.g,new Xv(a))},Jr.prototype.sa=function(a){Dt(this.g,new Qv)},Jr.prototype.ra=function(){Dt(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Ip=Zn.createWebChannelTransport=function(){return new Dl},Cp=Zn.getStatEventTarget=function(){return pl()},Tp=Zn.Event=Qi,Nc=Zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ml.NO_ERROR=0,ml.TIMEOUT=8,ml.HTTP_ERROR=6,fa=Zn.ErrorCode=ml,fv.COMPLETE="complete",Ep=Zn.EventType=fv,lv.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",gt.prototype.listen=gt.prototype.K,gs=Zn.WebChannel=lv,SP=Zn.FetchXmlHttpFactory=Ro,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,bp=Zn.XhrIo=Le}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});var o0="@firebase/firestore",a0="4.8.0";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var to="11.10.0";var Or=new Cn("@firebase/firestore");function Ts(){return Or.logLevel}function V(i,...e){if(Or.logLevel<=se.DEBUG){let t=e.map(Dg);Or.debug(`Firestore (${to}): ${i}`,...t)}}function Pt(i,...e){if(Or.logLevel<=se.ERROR){let t=e.map(Dg);Or.error(`Firestore (${to}): ${i}`,...t)}}function Mn(i,...e){if(Or.logLevel<=se.WARN){let t=e.map(Dg);Or.warn(`Firestore (${to}): ${i}`,...t)}}function Dg(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}function q(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,wE(i,n,t)}function wE(i,e,t){let n=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Pt(n),new Error(n)}function Y(i,e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,i||wE(e,r,n)}function te(i,e){return i}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Pn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Xc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Pp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ze.UNAUTHENTICATED))}shutdown(){}},Op=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Mp=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0,42304);let n=this.i,r=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve(),s=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},l=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?l(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Y(typeof n.accessToken=="string",31837,{l:n}),new Xc(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string",2055,{h:e}),new Ze(e)}},Vp=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Np=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Vp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Y(this.o===void 0,3512);let n=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};let r=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?r(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function AP(i){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}function bE(){return new TextEncoder}var Sa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),n="";for(;n.length<20;){let r=AP(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}};function ee(i,e){return i<e?-1:i>e?1:0}function Lp(i,e){let t=0;for(;t<i.length&&t<e.length;){let n=i.codePointAt(t),r=e.codePointAt(t);if(n!==r){if(n<128&&r<128)return ee(n,r);{let s=bE(),o=kP(s.encode(l0(i,t)),s.encode(l0(e,t)));return o!==0?o:ee(n,r)}}t+=n>65535?2:1}return ee(i.length,e.length)}function l0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function kP(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return ee(i[t],e[t]);return ee(i.length,e.length)}function Os(i,e,t){return i.length===e.length&&i.every((n,r)=>t(n,e[r]))}function EE(i){return i+"\0"}var c0="__name__",Jc=class i{constructor(e,t,n){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&q(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return i.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let s=i.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return ee(e.length,t.length)}static compareSegments(e,t){let n=i.isNumericId(e),r=i.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?i.extractNumericId(e).compare(i.extractNumericId(t)):Lp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jn.fromString(e.substring(4,e.length-2))}},Ee=class i extends Jc{construct(e,t,n){return new i(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new j(O.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(r=>r.length>0))}return new i(t)}static emptyPath(){return new i([])}},RP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,et=class i extends Jc{construct(e,t,n){return new i(e,t,n)}static isValidIdentifier(e){return RP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c0}static keyField(){return new i([c0])}static fromServerFormat(e){let t=[],n="",r=0,s=()=>{if(n.length===0)throw new j(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""},o=!1;for(;r<e.length;){let l=e[r];if(l==="\\"){if(r+1===e.length)throw new j(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new j(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new i(t)}static emptyPath(){return new i([])}};var $=class i{constructor(e){this.path=e}static fromPath(e){return new i(Ee.fromString(e))}static fromName(e){return new i(Ee.fromString(e).popFirst(5))}static empty(){return new i(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new i(new Ee(e.slice()))}};function TE(i,e,t){if(!t)throw new j(O.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function xP(i,e,t,n){if(e===!0&&n===!0)throw new j(O.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function d0(i){if(!$.isDocumentKey(i))throw new j(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function u0(i){if($.isDocumentKey(i))throw new j(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function CE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Sg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let e=(function(n){return n.constructor?n.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":q(12329,{type:typeof i})}function pn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new j(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sg(i);throw new j(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Ye(i,e){let t={typeString:i};return e&&(t.value=e),t}function Wa(i,e){if(!CE(i))throw new j(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(let n in e)if(e[n]){let r=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}let o=i[n];if(r&&typeof o!==r){t=`JSON field '${n}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new j(O.INVALID_ARGUMENT,t);return!0}var h0=-62135596800,f0=1e6,Re=class i{static now(){return i.fromMillis(Date.now())}static fromDate(e){return i.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*f0);return new i(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h0)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f0}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:i._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wa(e,i._jsonSchema))return new i(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-h0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Ye("string",Re._jsonSchemaVersion),seconds:Ye("number"),nanoseconds:Ye("number")};var J=class i{static fromTimestamp(e){return new i(e)}static min(){return new i(new Re(0,0))}static max(){return new i(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Aa=-1,Ms=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};function Bp(i){return i.fields.find(e=>e.kind===2)}function yr(i){return i.fields.filter(e=>e.kind!==2)}Ms.UNKNOWN_ID=-1;var ks=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ka=class i{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new i(0,Jt.min())}};function PP(i,e){let t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=J.fromTimestamp(n===1e9?new Re(t+1,0):new Re(t,n));return new Jt(r,$.empty(),e)}function IE(i){return new Jt(i.readTime,i.key,Aa)}var Jt=class i{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new i(J.min(),$.empty(),Aa)}static max(){return new i(J.max(),$.empty(),Aa)}};function Ag(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(i.documentKey,e.documentKey),t!==0?t:ee(i.largestBatchId,e.largestBatchId))}var DE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zr(i){return _(this,null,function*(){if(i.code!==O.FAILED_PRECONDITION||i.message!==DE)throw i;V("LocalStore","Unexpectedly lost primary lease")})}var x=class i{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new i((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof i?t:i.resolve(t)}catch(t){return i.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):i.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):i.reject(t)}static resolve(e){return new i((t,n)=>{t(e)})}static reject(e){return new i((t,n)=>{n(e)})}static waitFor(e){return new i((t,n)=>{let r=0,s=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&t()},c=>n(c))}),o=!0,s===r&&t()})}static or(e){let t=i.resolve(!1);for(let n of e)t=t.next(r=>r?i.resolve(r):n());return t}static forEach(e,t){let n=[];return e.forEach((r,s)=>{n.push(t.call(this,r,s))}),this.waitFor(n)}static mapArray(e,t){return new i((n,r)=>{let s=e.length,o=new Array(s),l=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++l,l===s&&n(o)},h=>r(h))}})}static doWhile(e,t){return new i((n,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):n()};s()})}};var jt="SimpleDb",ed=class i{static open(e,t,n,r){try{return new i(t,e.transaction(r,n))}catch(s){throw new Ar(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Pn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ar(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{let r=kg(n.target.error);this.S.reject(new Ar(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(V(jt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Up(t)}},Vs=class i{static delete(e){return V(jt,"Removing database:",e),br(ic().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!yi())return!1;if(i.F())return!0;let e=Ue(),t=i.M(e),n=0<t&&t<10,r=SE(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,i.M(Ue())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return _(this,null,function*(){return this.db||(V(jt,"Opening database:",this.name),this.db=yield new Promise((t,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;t(o)},r.onblocked=()=>{n(new Ar(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?n(new j(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new j(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Ar(e,o))},r.onupgradeneeded=s=>{V(jt,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;if(this.L!==null&&this.L!==s.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${s.oldVersion}, event.newVersion=${s.newVersion}, db.version=${o.version}`);this.B.q(o,r.transaction,s.oldVersion,this.version).next(()=>{V(jt,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let n=t.target;this.L=n.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var n;t.newVersion===null&&(Mn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(n=this.databaseDeletedListener)===null||n===void 0||n.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,n,r){return _(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.k(e);let l=ed.open(this.db,e,s?"readonly":"readwrite",n),c=r(l).next(d=>(l.v(),d)).catch(d=>(l.abort(d),x.reject(d))).toPromise();return c.catch(()=>{}),yield l.D,c}catch(l){let c=l,d=c.name!=="FirebaseError"&&o<3;if(V(jt,"Transaction failed with error:",c.message,"Retrying:",d),this.close(),!d)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function SE(i){let e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var zp=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return br(this.$.delete())}},Ar=class extends j{constructor(e,t){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function qi(i){return i.name==="IndexedDbTransactionError"}var Up=class{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(V(jt,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(V(jt,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),br(n)}add(e){return V(jt,"ADD",this.store.name,e,e),br(this.store.add(e))}get(e){return br(this.store.get(e)).next(t=>(t===void 0&&(t=null),V(jt,"GET",this.store.name,e,t),t))}delete(e){return V(jt,"DELETE",this.store.name,e),br(this.store.delete(e))}count(){return V(jt,"COUNT",this.store.name),br(this.store.count())}j(e,t){let n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(n.range);return new x((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(n),o=[];return this.J(s,(l,c)=>{o.push(c)}).next(()=>o)}}H(e,t){let n=this.store.getAll(e,t===null?void 0:t);return new x((r,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{r(o.target.result)}})}Y(e,t){V(jt,"DELETE ALL",this.store.name);let n=this.options(e,t);n.Z=!1;let r=this.cursor(n);return this.J(r,(s,o,l)=>l.delete())}X(e,t){let n;t?n=e:(n={},t=e);let r=this.cursor(n);return this.J(r,t)}ee(e){let t=this.cursor({});return new x((n,r)=>{t.onerror=s=>{let o=kg(s.target.error);r(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}J(e,t){let n=[];return new x((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let l=o.target.result;if(!l)return void r();let c=new zp(l),d=t(l.primaryKey,l.value,c);if(d instanceof x){let h=d.catch(p=>(c.done(),x.reject(p)));n.push(h)}c.isDone?r():c.W===null?l.continue():l.continue(c.W)}}).next(()=>x.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function br(i){return new x((e,t)=>{i.onsuccess=n=>{let r=n.target.result;e(r)},i.onerror=n=>{let r=kg(n.target.error);t(r)}})}var p0=!1;function kg(i){let e=Vs.M(Ue());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){let n=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p0||(p0=!0,setTimeout(()=>{throw n},0)),n}}return i}var wa="IndexBackfiller",Hp=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){V(wa,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>_(this,null,function*(){this.task=null;try{let t=yield this.te.re();V(wa,`Documents written: ${t}`)}catch(t){qi(t)?V(wa,"Ignoring IndexedDB error during index backfill: ",t):yield zr(t)}yield this.ne(6e4)}))}},jp=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let n=new Set,r=t,s=!0;return x.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return V(wa,`Processing collection: ${o}`),this.se(e,o,r).next(l=>{r-=l,n.add(o)});s=!1})).next(()=>t-r)}se(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.oe(r,s)).next(l=>(V(wa,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l))).next(()=>o.size)}))}oe(e,t){let n=e;return t.changes.forEach((r,s)=>{let o=IE(s);Ag(o,n)>0&&(n=o)}),new Jt(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}};var fn=(()=>{class i{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}i.ue=-1;return i})(),kr=-1;function Kd(i){return i==null}function Ra(i){return i===0&&1/i==-1/0}function OP(i){return typeof i=="number"&&Number.isInteger(i)&&!Ra(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var td="";function Ct(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=m0(e)),e=MP(i.get(t),e);return m0(e)}function MP(i,e){let t=e,n=i.length;for(let r=0;r<n;r++){let s=i.charAt(r);switch(s){case"\0":t+="";break;case td:t+="";break;default:t+=s}}return t}function m0(i){return i+td+""}function Rn(i){let e=i.length;if(Y(e>=2,64408,{path:i}),e===2)return Y(i.charAt(0)===td&&i.charAt(1)==="",56145,{path:i}),Ee.emptyPath();let t=e-2,n=[],r="";for(let s=0;s<e;){let o=i.indexOf(td,s);switch((o<0||o>t)&&q(50515,{path:i}),i.charAt(o+1)){case"":let l=i.substring(s,o),c;r.length===0?c=l:(r+=l,c=r,r=""),n.push(c);break;case"":r+=i.substring(s,o),r+="\0";break;case"":r+=i.substring(s,o+1);break;default:q(61167,{path:i})}s=o+2}return new Ee(n)}var wr="remoteDocuments",qa="owner",_s="owner",xa="mutationQueues",VP="userId",hn="mutations",g0="batchId",Ir="userMutationsIndex",_0=["userId","batchId"];function Hc(i,e){return[i,Ct(e)]}function AE(i,e,t){return[i,Ct(e),t]}var NP={},Ns="documentMutations",nd="remoteDocumentsV14",FP=["prefixPath","collectionGroup","readTime","documentId"],jc="documentKeyIndex",LP=["prefixPath","collectionGroup","documentId"],kE="collectionGroupIndex",BP=["collectionGroup","readTime","prefixPath","documentId"],Pa="remoteDocumentGlobal",$p="remoteDocumentGlobalKey",Fs="targets",RE="queryTargetsIndex",zP=["canonicalId","targetId"],Ls="targetDocuments",UP=["targetId","path"],Rg="documentTargetsIndex",HP=["path","targetId"],id="targetGlobalKey",Rr="targetGlobal",Oa="collectionParents",jP=["collectionId","parent"],Bs="clientMetadata",$P="clientId",Xd="bundles",WP="bundleId",Qd="namedQueries",qP="name",xg="indexConfiguration",GP="indexId",Wp="collectionGroupIndex",YP="collectionGroup",ba="indexState",KP=["indexId","uid"],xE="sequenceNumberIndex",XP=["uid","sequenceNumber"],Ea="indexEntries",QP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PE="documentKeyIndex",JP=["indexId","uid","orderedDocumentKey"],Jd="documentOverlays",ZP=["userId","collectionPath","documentId"],qp="collectionPathOverlayIndex",e1=["userId","collectionPath","largestBatchId"],OE="collectionGroupOverlayIndex",t1=["userId","collectionGroup","largestBatchId"],Pg="globals",n1="name",ME=[xa,hn,Ns,wr,Fs,qa,Rr,Ls,Bs,Pa,Oa,Xd,Qd],i1=[...ME,Jd],VE=[xa,hn,Ns,nd,Fs,qa,Rr,Ls,Bs,Pa,Oa,Xd,Qd,Jd],NE=VE,Og=[...NE,xg,ba,Ea],r1=Og,FE=[...Og,Pg],s1=FE;var Ma=class extends Zc{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function nt(i,e){let t=te(i);return Vs.N(t.ce,e)}function v0(i){let e=0;for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Gi(i,e){for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function LE(i){for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}var Fe=class i{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new As(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new As(this.root,e,this.comparator,!1)}getReverseIterator(){return new As(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new As(this.root,e,this.comparator,!0)}},As=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class i{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=n??i.RED,this.left=r??i.EMPTY,this.right=s??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new i(e??this.key,t??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class i{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new i(this.comparator);return t.data=e,t}},rd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function vs(i){return i.hasNext()?i.getNext():void 0}var $t=class i{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new i([])}unionWith(e){let t=new Ce(et.comparator);for(let n of this.fields)t=t.add(n);for(let n of e)t=t.add(n);return new i(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(t,n)=>t.isEqual(n))}};var sd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var tt=class i{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sd("Invalid base64 string: "+s):s}})(e);return new i(t)}static fromUint8Array(e){let t=(function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s})(e);return new i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tt.EMPTY_BYTE_STRING=new tt("");var o1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(i){if(Y(!!i,39018),typeof i=="string"){let e=0,t=o1.exec(i);if(Y(!!t,46558,{timestamp:i}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ne(i.seconds),nanos:Ne(i.nanos)}}function Ne(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ni(i){return typeof i=="string"?tt.fromBase64String(i):tt.fromUint8Array(i)}var BE="server_timestamp",zE="__type__",UE="__previous_value__",HE="__local_write_time__";function Mg(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zE])===null||t===void 0?void 0:t.stringValue)===BE}function Zd(i){let e=i.mapValue.fields[UE];return Mg(e)?Zd(e):e}function Va(i){let e=ti(i.mapValue.fields[HE].timestampValue);return new Re(e.seconds,e.nanos)}var Gp=class{constructor(e,t,n,r,s,o,l,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},od="(default)",zs=class i{constructor(e,t){this.projectId=e,this.database=t||od}static empty(){return new i("","")}get isDefaultDatabase(){return this.database===od}isEqual(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database}};var Vg="__type__",jE="__max__",Oi={mapValue:{fields:{__type__:{stringValue:jE}}}},Ng="__vector__",Us="value",$c={nullValue:"NULL_VALUE"};function Li(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Mg(i)?4:$E(i)?9007199254740991:eu(i)?10:11:q(28295,{value:i})}function Vn(i,e){if(i===e)return!0;let t=Li(i);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Va(i).isEqual(Va(e));case 3:return(function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ti(r.timestampValue),l=ti(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(r,s){return ni(r.bytesValue).isEqual(ni(s.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(r,s){return Ne(r.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(r.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)})(i,e);case 2:return(function(r,s){if("integerValue"in r&&"integerValue"in s)return Ne(r.integerValue)===Ne(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ne(r.doubleValue),l=Ne(s.doubleValue);return o===l?Ra(o)===Ra(l):isNaN(o)&&isNaN(l)}return!1})(i,e);case 9:return Os(i.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return(function(r,s){let o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(v0(o)!==v0(l))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Vn(o[c],l[c])))return!1;return!0})(i,e);default:return q(52216,{left:i})}}function Na(i,e){return(i.values||[]).find(t=>Vn(t,e))!==void 0}function Bi(i,e){if(i===e)return 0;let t=Li(i),n=Li(e);if(t!==n)return ee(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ee(i.booleanValue,e.booleanValue);case 2:return(function(s,o){let l=Ne(s.integerValue||s.doubleValue),c=Ne(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(i,e);case 3:return y0(i.timestampValue,e.timestampValue);case 4:return y0(Va(i),Va(e));case 5:return Lp(i.stringValue,e.stringValue);case 6:return(function(s,o){let l=ni(s),c=ni(o);return l.compareTo(c)})(i.bytesValue,e.bytesValue);case 7:return(function(s,o){let l=s.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){let h=ee(l[d],c[d]);if(h!==0)return h}return ee(l.length,c.length)})(i.referenceValue,e.referenceValue);case 8:return(function(s,o){let l=ee(Ne(s.latitude),Ne(o.latitude));return l!==0?l:ee(Ne(s.longitude),Ne(o.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return w0(i.arrayValue,e.arrayValue);case 10:return(function(s,o){var l,c,d,h;let p=s.fields||{},g=o.fields||{},E=(l=p[Us])===null||l===void 0?void 0:l.arrayValue,T=(c=g[Us])===null||c===void 0?void 0:c.arrayValue,k=ee(((d=E?.values)===null||d===void 0?void 0:d.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:w0(E,T)})(i.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Oi.mapValue&&o===Oi.mapValue)return 0;if(s===Oi.mapValue)return 1;if(o===Oi.mapValue)return-1;let l=s.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=Lp(c[p],h[p]);if(g!==0)return g;let E=Bi(l[c[p]],d[h[p]]);if(E!==0)return E}return ee(c.length,h.length)})(i.mapValue,e.mapValue);default:throw q(23264,{le:t})}}function y0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ee(i,e);let t=ti(i),n=ti(e),r=ee(t.seconds,n.seconds);return r!==0?r:ee(t.nanos,n.nanos)}function w0(i,e){let t=i.values||[],n=e.values||[];for(let r=0;r<t.length&&r<n.length;++r){let s=Bi(t[r],n[r]);if(s)return s}return ee(t.length,n.length)}function Hs(i){return Yp(i)}function Yp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){let n=ti(t);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return ni(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return $.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let n="[",r=!0;for(let s of t.values||[])r?r=!1:n+=",",n+=Yp(s);return n+"]"})(i.arrayValue):"mapValue"in i?(function(t){let n=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of n)s?s=!1:r+=",",r+=`${o}:${Yp(t.fields[o])}`;return r+"}"})(i.mapValue):q(61005,{value:i})}function Wc(i){switch(Li(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Zd(i);return e?16+Wc(e):16;case 5:return 2*i.stringValue.length;case 6:return ni(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce((r,s)=>r+Wc(s),0)})(i.arrayValue);case 10:case 11:return(function(n){let r=0;return Gi(n.fields,(s,o)=>{r+=s.length+Wc(o)}),r})(i.mapValue);default:throw q(13486,{value:i})}}function Fg(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Kp(i){return!!i&&"integerValue"in i}function Fa(i){return!!i&&"arrayValue"in i}function b0(i){return!!i&&"nullValue"in i}function E0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qc(i){return!!i&&"mapValue"in i}function eu(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vg])===null||t===void 0?void 0:t.stringValue)===Ng}function Ta(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let e={mapValue:{fields:{}}};return Gi(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ta(n)),e}if(i.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ta(i.arrayValue.values[t]);return e}return Object.assign({},i)}function $E(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===jE}var WE={mapValue:{fields:{[Vg]:{stringValue:Ng},[Us]:{arrayValue:{}}}}};function a1(i){return"nullValue"in i?$c:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Fg(zs.empty(),$.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?eu(i)?WE:{mapValue:{}}:q(35942,{value:i})}function l1(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Fg(zs.empty(),$.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?WE:"mapValue"in i?eu(i)?{mapValue:{}}:Oi:q(61959,{value:i})}function T0(i,e){let t=Bi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function C0(i,e){let t=Bi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}var Ot=class i{constructor(e){this.value=e}static empty(){return new i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ta(t)}setAll(e){let t=et.emptyPath(),n={},r=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){let c=this.getFieldsMap(t);this.applyChanges(c,n,r),n={},r=[],t=l.popLast()}o?n[l.lastSegment()]=Ta(o):r.push(l.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){let t=this.field(e.popLast());qc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Gi(t,(r,s)=>e[r]=s);for(let r of n)delete e[r]}clone(){return new i(Ta(this.value))}};function qE(i){let e=[];return Gi(i.fields,(t,n)=>{let r=new et([t]);if(qc(n)){let s=qE(n.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new $t(e)}var ft=class i{constructor(e,t,n,r,s,o,l){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new i(e,0,J.min(),J.min(),J.min(),Ot.empty(),0)}static newFoundDocument(e,t,n,r){return new i(e,1,t,J.min(),n,r,0)}static newNoDocument(e,t){return new i(e,2,t,J.min(),J.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new i(e,3,t,J.min(),J.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var zi=class{constructor(e,t){this.position=e,this.inclusive=t}};function I0(i,e,t){let n=0;for(let r=0;r<i.position.length;r++){let s=e[r],o=i.position[r];if(s.field.isKeyField()?n=$.comparator($.fromName(o.referenceValue),t.key):n=Bi(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function D0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Vn(i.position[t],e.position[t]))return!1;return!0}var js=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function c1(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}var ad=class{},le=class i extends ad{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Jp(e,t,n):t==="array-contains"?new tm(e,n):t==="in"?new ld(e,n):t==="not-in"?new nm(e,n):t==="array-contains-any"?new im(e,n):new i(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Zp(e,n):new em(e,n)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bi(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Bi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class i extends ad{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new i(e,t)}matches(e){return $s(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function $s(i){return i.op==="and"}function Xp(i){return i.op==="or"}function Lg(i){return GE(i)&&$s(i)}function GE(i){for(let e of i.filters)if(e instanceof Te)return!1;return!0}function Qp(i){if(i instanceof le)return i.field.canonicalString()+i.op.toString()+Hs(i.value);if(Lg(i))return i.filters.map(e=>Qp(e)).join(",");{let e=i.filters.map(t=>Qp(t)).join(",");return`${i.op}(${e})`}}function YE(i,e){return i instanceof le?(function(n,r){return r instanceof le&&n.op===r.op&&n.field.isEqual(r.field)&&Vn(n.value,r.value)})(i,e):i instanceof Te?(function(n,r){return r instanceof Te&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&YE(o,r.filters[l]),!0):!1})(i,e):void q(19439)}function KE(i,e){let t=i.filters.concat(e);return Te.create(t,i.op)}function XE(i){return i instanceof le?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hs(t.value)}`})(i):i instanceof Te?(function(t){return t.op.toString()+" {"+t.getFilters().map(XE).join(" ,")+"}"})(i):"Filter"}var Jp=class extends le{constructor(e,t,n){super(e,t,n),this.key=$.fromName(n.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Zp=class extends le{constructor(e,t){super(e,"in",t),this.keys=QE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},em=class extends le{constructor(e,t){super(e,"not-in",t),this.keys=QE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function QE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>$.fromName(n.referenceValue))}var tm=class extends le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Fa(t)&&Na(t.arrayValue,this.value)}},ld=class extends le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Na(this.value.arrayValue,t)}},nm=class extends le{constructor(e,t){super(e,"not-in",t)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Na(this.value.arrayValue,t)}},im=class extends le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Fa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Na(this.value.arrayValue,n))}};var rm=class{constructor(e,t=null,n=[],r=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.Pe=null}};function sm(i,e=null,t=[],n=[],r=null,s=null,o=null){return new rm(i,e,t,n,r,s,o)}function Mr(i){let e=te(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Qp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>(function(s){return s.field.canonicalString()+s.dir})(n)).join(","),Kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Hs(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Hs(n)).join(",")),e.Pe=t}return e.Pe}function Ga(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!c1(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!YE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!D0(i.startAt,e.startAt)&&D0(i.endAt,e.endAt)}function cd(i){return $.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function dd(i,e){return i.filters.filter(t=>t instanceof le&&t.field.isEqual(e))}function S0(i,e,t){let n=$c,r=!0;for(let s of dd(i,e)){let o=$c,l=!0;switch(s.op){case"<":case"<=":o=a1(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=$c}T0({value:n,inclusive:r},{value:o,inclusive:l})<0&&(n=o,r=l)}if(t!==null){for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(e)){let o=t.position[s];T0({value:n,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(n=o,r=t.inclusive);break}}return{value:n,inclusive:r}}function A0(i,e,t){let n=Oi,r=!0;for(let s of dd(i,e)){let o=Oi,l=!0;switch(s.op){case">=":case">":o=l1(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=Oi}C0({value:n,inclusive:r},{value:o,inclusive:l})>0&&(n=o,r=l)}if(t!==null){for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(e)){let o=t.position[s];C0({value:n,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(n=o,r=t.inclusive);break}}return{value:n,inclusive:r}}var Ws=class{constructor(e,t=null,n=[],r=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function d1(i,e,t,n,r,s,o,l){return new Ws(i,e,t,n,r,s,o,l)}function tu(i){return new Ws(i)}function k0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function u1(i){return i.collectionGroup!==null}function Ca(i){let e=te(i);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ce(et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new js(s,n))}),t.has(et.keyField().canonicalString())||e.Te.push(new js(et.keyField(),n))}return e.Te}function Qt(i){let e=te(i);return e.Ie||(e.Ie=h1(e,Ca(i))),e.Ie}function h1(i,e){if(i.limitType==="F")return sm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new js(r.field,s)});let t=i.endAt?new zi(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new zi(i.startAt.position,i.startAt.inclusive):null;return sm(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function om(i,e,t){return new Ws(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function nu(i,e){return Ga(Qt(i),Qt(e))&&i.limitType===e.limitType}function JE(i){return`${Mr(Qt(i))}|lt:${i.limitType}`}function Cs(i){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(r=>XE(r)).join(", ")}]`),Kd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Hs(r)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Hs(r)).join(",")),`Target(${n})`})(Qt(i))}; limitType=${i.limitType})`}function Ya(i,e){return e.isFoundDocument()&&(function(n,r){let s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):$.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(i,e)&&(function(n,r){for(let s of Ca(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0})(i,e)&&(function(n,r){for(let s of n.filters)if(!s.matches(r))return!1;return!0})(i,e)&&(function(n,r){return!(n.startAt&&!(function(o,l,c){let d=I0(o,l,c);return o.inclusive?d<=0:d<0})(n.startAt,Ca(n),r)||n.endAt&&!(function(o,l,c){let d=I0(o,l,c);return o.inclusive?d>=0:d>0})(n.endAt,Ca(n),r))})(i,e)}function f1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ZE(i){return(e,t)=>{let n=!1;for(let r of Ca(i)){let s=p1(r,e,t);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function p1(i,e,t){let n=i.field.isKeyField()?$.comparator(e.key,t.key):(function(s,o,l){let c=o.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Bi(c,d):q(42886)})(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return q(19790,{direction:i.dir})}}var mn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[r,s]of n)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,n)=>{for(let[r,s]of n)e(r,s)})}isEmpty(){return LE(this.inner)}size(){return this.innerSize}};var m1=new Fe($.comparator);function Wt(){return m1}var eT=new Fe($.comparator);function va(...i){let e=eT;for(let t of i)e=e.insert(t.key,t);return e}function tT(i){let e=eT;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function xn(){return Ia()}function nT(){return Ia()}function Ia(){return new mn(i=>i.toString(),(i,e)=>i.isEqual(e))}var g1=new Fe($.comparator),_1=new Ce($.comparator);function re(...i){let e=_1;for(let t of i)e=e.add(t);return e}var v1=new Ce(ee);function y1(){return v1}function Bg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ra(e)?"-0":e}}function iT(i){return{integerValue:""+i}}function w1(i,e){return OP(e)?iT(e):Bg(i,e)}var qs=class{constructor(){this._=void 0}};function b1(i,e,t){return i instanceof Vr?(function(r,s){let o={fields:{[zE]:{stringValue:BE},[HE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Mg(s)&&(s=Zd(s)),s&&(o.fields[UE]=s),{mapValue:o}})(t,e):i instanceof Ui?sT(i,e):i instanceof Hi?oT(i,e):(function(r,s){let o=rT(r,s),l=R0(o)+R0(r.Ee);return Kp(o)&&Kp(r.Ee)?iT(l):Bg(r.serializer,l)})(i,e)}function E1(i,e,t){return i instanceof Ui?sT(i,e):i instanceof Hi?oT(i,e):t}function rT(i,e){return i instanceof Nr?(function(n){return Kp(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}var Vr=class extends qs{},Ui=class extends qs{constructor(e){super(),this.elements=e}};function sT(i,e){let t=aT(e);for(let n of i.elements)t.some(r=>Vn(r,n))||t.push(n);return{arrayValue:{values:t}}}var Hi=class extends qs{constructor(e){super(),this.elements=e}};function oT(i,e){let t=aT(e);for(let n of i.elements)t=t.filter(r=>!Vn(r,n));return{arrayValue:{values:t}}}var Nr=class extends qs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function R0(i){return Ne(i.integerValue||i.doubleValue)}function aT(i){return Fa(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var am=class{constructor(e,t){this.field=e,this.transform=t}};function T1(i,e){return i.field.isEqual(e.field)&&(function(n,r){return n instanceof Ui&&r instanceof Ui||n instanceof Hi&&r instanceof Hi?Os(n.elements,r.elements,Vn):n instanceof Nr&&r instanceof Nr?Vn(n.Ee,r.Ee):n instanceof Vr&&r instanceof Vr})(i.transform,e.transform)}var lm=class{constructor(e,t){this.version=e,this.transformResults=t}},Bt=class i{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new i}static exists(e){return new i(void 0,e)}static updateTime(e){return new i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}var Gs=class{};function lT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ys(i.key,Bt.none()):new ji(i.key,i.data,Bt.none());{let t=i.data,n=Ot.empty(),r=new Ce(et.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new gn(i.key,n,new $t(r.toArray()),Bt.none())}}function C1(i,e,t){i instanceof ji?(function(r,s,o){let l=r.value.clone(),c=P0(r.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(i,e,t):i instanceof gn?(function(r,s,o){if(!Gc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let l=P0(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(cT(r)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(i,e,t):(function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Da(i,e,t,n){return i instanceof ji?(function(s,o,l,c){if(!Gc(s.precondition,o))return l;let d=s.value.clone(),h=O0(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(i,e,t,n):i instanceof gn?(function(s,o,l,c){if(!Gc(s.precondition,o))return l;let d=O0(s.fieldTransforms,c,o),h=o.data;return h.setAll(cT(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(i,e,t,n):(function(s,o,l){return Gc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(i,e,t)}function I1(i,e){let t=null;for(let n of i.fieldTransforms){let r=e.data.field(n.field),s=rT(n.transform,r||null);s!=null&&(t===null&&(t=Ot.empty()),t.set(n.field,s))}return t||null}function x0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Os(n,r,(s,o)=>T1(s,o))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}var ji=class extends Gs{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},gn=class extends Gs{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function cT(i){let e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let n=i.data.field(t);e.set(t,n)}}),e}function P0(i,e,t){let n=new Map;Y(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let r=0;r<t.length;r++){let s=i[r],o=s.transform,l=e.data.field(s.field);n.set(s.field,E1(o,l,t[r]))}return n}function O0(i,e,t){let n=new Map;for(let r of i){let s=r.transform,o=t.data.field(r.field);n.set(r.field,b1(s,o,e))}return n}var Ys=class extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ud=class extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var La=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&C1(s,e,n[r])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=Da(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=Da(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=nT();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,l=this.applyToLocalView(o,s.mutatedFields);l=t.has(r.key)?null:l;let c=lT(o,l);c!==null&&n.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(J.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(t,n)=>x0(t,n))&&Os(this.baseMutations,e.baseMutations,(t,n)=>x0(t,n))}},cm=class i{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Y(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=(function(){return g1})(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new i(e,t,n,r)}};var Ba=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var qe,he;function D1(i){switch(i){case O.OK:return q(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return q(15467,{code:i})}}function dT(i){if(i===void 0)return Pt("GRPC error has no .code"),O.UNKNOWN;switch(i){case qe.OK:return O.OK;case qe.CANCELLED:return O.CANCELLED;case qe.UNKNOWN:return O.UNKNOWN;case qe.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case qe.INTERNAL:return O.INTERNAL;case qe.UNAVAILABLE:return O.UNAVAILABLE;case qe.UNAUTHENTICATED:return O.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case qe.NOT_FOUND:return O.NOT_FOUND;case qe.ALREADY_EXISTS:return O.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return O.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case qe.ABORTED:return O.ABORTED;case qe.OUT_OF_RANGE:return O.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return O.UNIMPLEMENTED;case qe.DATA_LOSS:return O.DATA_LOSS;default:return q(39323,{code:i})}}(he=qe||(qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var M0=null;var S1=new Jn([4294967295,4294967295],0);function V0(i){let e=bE().encode(i),t=new wp;return t.update(e),new Uint8Array(t.digest())}function N0(i){let e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jn([t,n],0),new Jn([r,s],0)]}var um=class i{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dr(`Invalid padding: ${t}`);if(n<0)throw new Dr(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dr(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Dr(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Jn.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(Jn.fromNumber(n)));return r.compare(S1)===1&&(r=new Jn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=V0(e),[n,r]=N0(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(n,r,s);if(!this.ye(o))return!1}return!0}static create(e,t,n){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new i(s,r,t);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.fe===0)return;let t=V0(e),[n,r]=N0(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(n,r,s);this.we(o)}}we(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Dr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hd=class i{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){let r=new Map;return r.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new i(J.min(),r,new Fe(ee),Wt(),re())}},za=class i{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new i(n,t,re(),re(),re())}};var Rs=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}},fd=class{constructor(e,t){this.targetId=e,this.De=t}},pd=class{constructor(e,t,n=tt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},md=class{constructor(){this.ve=0,this.Ce=F0(),this.Fe=tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=re(),t=re(),n=re();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:q(38017,{changeType:s})}}),new za(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=F0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Y(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},hm=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wt(),this.je=Fc(),this.Je=Fc(),this.He=new Fe(ee)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((n,r)=>{this.nt(r)&&t(r)})}it(e){let t=e.targetId,n=e.De.count,r=this.st(t);if(r){let s=r.target;if(cd(s))if(n===0){let o=new $(s.path);this.Xe(t,o,ft.newNoDocument(o,J.min()))}else Y(n===1,20013,{expectedCount:n});else{let o=this.ot(t);if(o!==n){let l=this._t(e),c=l?this.ut(l,e,o):1;if(c!==0){this.rt(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}M0?.ct((function(h,p,g,E,T){var k,R,B,F,M,H;let W={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},G=p.unchangedNames;return G&&(W.bloomFilter={applied:T===0,hashCount:(k=G?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(F=(B=(R=G?.bits)===null||R===void 0?void 0:R.bitmap)===null||B===void 0?void 0:B.length)!==null&&F!==void 0?F:0,padding:(H=(M=G?.bits)===null||M===void 0?void 0:M.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var v;return(v=E?.mightContain(I))!==null&&v!==void 0&&v}}),W})(o,e.De,this.We.lt(),l,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t,o,l;try{o=ni(n).toUint8Array()}catch(c){if(c instanceof sd)return Mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new um(o,r,s)}catch(c){return Mn(c instanceof Dr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){let n=this.We.getRemoteKeysForTarget(t),r=0;return n.forEach(s=>{let o=this.We.lt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,s,null),r++)}),r}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let l=this.st(o);if(l){if(s.current&&cd(l.target)){let c=new $(l.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,ft.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let n=re();this.Je.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{let d=this.st(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let r=new hd(e,t,this.He,this.ze,n);return this.ze=Wt(),this.je=Fc(),this.Je=Fc(),this.He=new Fe(ee),r}Ze(e,t){if(!this.nt(e))return;let n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;let r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new md,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ce(ee),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ce(ee),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new md),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Fc(){return new Fe($.comparator)}function F0(){return new Fe($.comparator)}var A1={asc:"ASCENDING",desc:"DESCENDING"},k1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},R1={and:"AND",or:"OR"},fm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function pm(i,e){return i.useProto3Json||Kd(e)?e:{value:e}}function Ks(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function x1(i,e){return Ks(i,e.toTimestamp())}function Mt(i){return Y(!!i,49232),J.fromTimestamp((function(t){let n=ti(t);return new Re(n.seconds,n.nanos)})(i))}function zg(i,e){return mm(i,e).canonicalString()}function mm(i,e){let t=(function(r){return new Ee(["projects",r.projectId,"databases",r.database])})(i).child("documents");return e===void 0?t:t.child(e)}function hT(i){let e=Ee.fromString(i);return Y(bT(e),10190,{key:e.toString()}),e}function gd(i,e){return zg(i.databaseId,e.path)}function xr(i,e){let t=hT(e);if(t.get(1)!==i.databaseId.projectId)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new $(mT(t))}function fT(i,e){return zg(i.databaseId,e)}function pT(i){let e=hT(i);return e.length===4?Ee.emptyPath():mT(e)}function gm(i){return new Ee(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mT(i){return Y(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function L0(i,e,t){return{name:gd(i,e),fields:t.value.mapValue.fields}}function P1(i,e,t){let n=xr(i,e.name),r=Mt(e.updateTime),s=e.createTime?Mt(e.createTime):J.min(),o=new Ot({mapValue:{fields:e.fields}}),l=ft.newFoundDocument(n,r,s,o);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function O1(i,e){let t;if("targetChange"in e){e.targetChange;let n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:q(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(Y(h===void 0||typeof h=="string",58123),tt.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),tt.fromUint8Array(h||new Uint8Array))})(i,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(d){let h=d.code===void 0?O.UNKNOWN:dT(d.code);return new j(h,d.message||"")})(o);t=new pd(n,r,s,l||null)}else if("documentChange"in e){e.documentChange;let n=e.documentChange;n.document,n.document.name,n.document.updateTime;let r=xr(i,n.document.name),s=Mt(n.document.updateTime),o=n.document.createTime?Mt(n.document.createTime):J.min(),l=new Ot({mapValue:{fields:n.document.fields}}),c=ft.newFoundDocument(r,s,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];t=new Rs(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let n=e.documentDelete;n.document;let r=xr(i,n.document),s=n.readTime?Mt(n.readTime):J.min(),o=ft.newNoDocument(r,s),l=n.removedTargetIds||[];t=new Rs([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;let n=e.documentRemove;n.document;let r=xr(i,n.document),s=n.removedTargetIds||[];t=new Rs([],s,r,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let n=e.filter;n.targetId;let{count:r=0,unchangedNames:s}=n,o=new dm(r,s),l=n.targetId;t=new fd(l,o)}}return t}function _d(i,e){let t;if(e instanceof ji)t={update:L0(i,e.key,e.value)};else if(e instanceof Ys)t={delete:gd(i,e.key)};else if(e instanceof gn)t={update:L0(i,e.key,e.data),updateMask:B1(e.fieldMask)};else{if(!(e instanceof ud))return q(16599,{Rt:e.type});t={verify:gd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>(function(s,o){let l=o.transform;if(l instanceof Vr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ui)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nr)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw q(20930,{transform:o.transform})})(0,n))),e.precondition.isNone||(t.currentDocument=(function(r,s){return s.updateTime!==void 0?{updateTime:x1(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q(27497)})(i,e.precondition)),t}function _m(i,e){let t=e.currentDocument?(function(s){return s.updateTime!==void 0?Bt.updateTime(Mt(s.updateTime)):s.exists!==void 0?Bt.exists(s.exists):Bt.none()})(e.currentDocument):Bt.none(),n=e.updateTransforms?e.updateTransforms.map(r=>(function(o,l){let c=null;if("setToServerValue"in l)Y(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new Vr;else if("appendMissingElements"in l){let h=l.appendMissingElements.values||[];c=new Ui(h)}else if("removeAllFromArray"in l){let h=l.removeAllFromArray.values||[];c=new Hi(h)}else"increment"in l?c=new Nr(o,l.increment):q(16584,{proto:l});let d=et.fromServerFormat(l.fieldPath);return new am(d,c)})(i,r)):[];if(e.update){e.update.name;let r=xr(i,e.update.name),s=new Ot({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=(function(c){let d=c.fieldPaths||[];return new $t(d.map(h=>et.fromServerFormat(h)))})(e.updateMask);return new gn(r,s,o,t,n)}return new ji(r,s,t,n)}if(e.delete){let r=xr(i,e.delete);return new Ys(r,t)}if(e.verify){let r=xr(i,e.verify);return new ud(r,t)}return q(1463,{proto:e})}function M1(i,e){return i&&i.length>0?(Y(e!==void 0,14353),i.map(t=>(function(r,s){let o=r.updateTime?Mt(r.updateTime):Mt(s);return o.isEqual(J.min())&&(o=Mt(s)),new lm(o,r.transformResults||[])})(t,e))):[]}function gT(i,e){return{documents:[fT(i,e.path)]}}function _T(i,e){let t={structuredQuery:{}},n=e.path,r;e.collectionGroup!==null?(r=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=fT(i,r);let s=(function(d){if(d.length!==0)return wT(Te.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(g){return{field:Is(g.field),direction:N1(g.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let l=pm(i,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:r}}function vT(i){let e=pT(i.parent),t=i.structuredQuery,n=t.from?t.from.length:0,r=null;if(n>0){Y(n===1,65062);let h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let g=yT(p);return g instanceof Te&&Lg(g)?g.getFilters():[g]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(g=>(function(T){return new js(Ds(T.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(t.orderBy));let l=null;t.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,Kd(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(p){let g=!!p.before,E=p.values||[];return new zi(E,g)})(t.startAt));let d=null;return t.endAt&&(d=(function(p){let g=!p.before,E=p.values||[];return new zi(E,g)})(t.endAt)),d1(e,r,o,s,l,"F",c,d)}function V1(i,e){let t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let n=Ds(t.unaryFilter.field);return le.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=Ds(t.unaryFilter.field);return le.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ds(t.unaryFilter.field);return le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ds(t.unaryFilter.field);return le.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(i):i.fieldFilter!==void 0?(function(t){return le.create(Ds(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Te.create(t.compositeFilter.filters.map(n=>yT(n)),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(i):q(30097,{filter:i})}function N1(i){return A1[i]}function F1(i){return k1[i]}function L1(i){return R1[i]}function Is(i){return{fieldPath:i.canonicalString()}}function Ds(i){return et.fromServerFormat(i.fieldPath)}function wT(i){return i instanceof le?(function(t){if(t.op==="=="){if(E0(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NAN"}};if(b0(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(E0(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NAN"}};if(b0(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(t.field),op:F1(t.op),value:t.value}}})(i):i instanceof Te?(function(t){let n=t.getFilters().map(r=>wT(r));return n.length===1?n[0]:{compositeFilter:{op:L1(t.op),filters:n}}})(i):q(54877,{filter:i})}function B1(i){let e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}var Xs=class i{constructor(e,t,n,r,s=J.min(),o=J.min(),l=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vd=class{constructor(e){this.gt=e}};function z1(i,e){let t;if(e.document)t=P1(i.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let n=$.fromSegments(e.noDocument.path),r=Lr(e.noDocument.readTime);t=ft.newNoDocument(n,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q(56709);{let n=$.fromSegments(e.unknownDocument.path),r=Lr(e.unknownDocument.version);t=ft.newUnknownDocument(n,r)}}return e.readTime&&t.setReadTime((function(r){let s=new Re(r[0],r[1]);return J.fromTimestamp(s)})(e.readTime)),t}function B0(i,e){let t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,o){return{name:gd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ks(s,o.version.toTimestamp()),createTime:Ks(s,o.createTime.toTimestamp())}})(i.gt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Fr(e.version)};else{if(!e.isUnknownDocument())return q(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Fr(e.version)}}return n}function yd(i){let e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Fr(i){let e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lr(i){let e=new Re(i.seconds,i.nanoseconds);return J.fromTimestamp(e)}function Er(i,e){let t=(e.baseMutations||[]).map(s=>_m(i.gt,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let n=e.mutations.map(s=>_m(i.gt,s)),r=Re.fromMillis(e.localWriteTimeMs);return new La(e.batchId,r,t,n)}function ya(i){let e=Lr(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Lr(i.lastLimboFreeSnapshotVersion):J.min(),n;return n=(function(s){return s.documents!==void 0})(i.query)?(function(s){let o=s.documents.length;return Y(o===1,1966,{count:o}),Qt(tu(pT(s.documents[0])))})(i.query):(function(s){return Qt(vT(s))})(i.query),new Xs(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,tt.fromBase64String(i.resumeToken))}function ET(i,e){let t=Fr(e.snapshotVersion),n=Fr(e.lastLimboFreeSnapshotVersion),r;r=cd(e.target)?gT(i.gt,e.target):_T(i.gt,e.target).Vt;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mr(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function TT(i){let e=vT({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?om(e,e.limit,"L"):e}function Dp(i,e){return new Ba(e.largestBatchId,_m(i.gt,e.overlayMutation))}function z0(i,e){let t=e.path.lastSegment();return[i,Ct(e.path.popLast()),t]}function U0(i,e,t,n){return{indexId:i,uid:e,sequenceNumber:t,readTime:Fr(n.readTime),documentKey:Ct(n.documentKey.path),largestBatchId:n.largestBatchId}}var vm=class{getBundleMetadata(e,t){return H0(e).get(t).next(n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Lr(s.createTime),version:s.version}})(n)})}saveBundleMetadata(e,t){return H0(e).put((function(r){return{bundleId:r.id,createTime:Fr(Mt(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return j0(e).get(t).next(n=>{if(n)return(function(s){return{name:s.name,query:TT(s.bundledQuery),readTime:Lr(s.readTime)}})(n)})}saveNamedQuery(e,t){return j0(e).put((function(r){return{name:r.name,readTime:Fr(Mt(r.readTime)),bundledQuery:r.bundledQuery}})(t))}};function H0(i){return nt(i,Xd)}function j0(i){return nt(i,Qd)}var wd=class i{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let n=t.uid||"";return new i(e,n)}getOverlay(e,t){return pa(e).get(z0(this.userId,t)).next(n=>n?Dp(this.serializer,n):null)}getOverlays(e,t){let n=xn();return x.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){let r=[];return n.forEach((s,o)=>{let l=new Ba(t,o);r.push(this.wt(e,l))}),x.waitFor(r)}removeOverlaysForBatchId(e,t,n){let r=new Set;t.forEach(o=>r.add(Ct(o.getCollectionPath())));let s=[];return r.forEach(o=>{let l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(pa(e).Y(qp,l))}),x.waitFor(s)}getOverlaysForCollection(e,t,n){let r=xn(),s=Ct(t),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pa(e).j(qp,o).next(l=>{for(let c of l){let d=Dp(this.serializer,c);r.set(d.getKey(),d)}return r})}getOverlaysForCollectionGroup(e,t,n,r){let s=xn(),o,l=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pa(e).X({index:OE,range:l},(c,d,h)=>{let p=Dp(this.serializer,d);s.size()<r||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}wt(e,t){return pa(e).put((function(r,s,o){let[l,c,d]=z0(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_d(r.gt,o.mutation)}})(this.serializer,this.userId,t))}};function pa(i){return nt(i,Jd)}var ym=class{St(e){return nt(e,Pg)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let n=t?.value;return n?tt.fromUint8Array(n):tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ei=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ne(e.integerValue));else if("doubleValue"in e){let n=Ne(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),Ra(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),typeof n=="string"&&(n=ti(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ni(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?$E(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):eu(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let n=e.fields||{};this.Ct(t,55);for(let r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;let s=e.fields||{};this.Ct(t,53);let o=Us,l=((r=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.length)||0;this.Ct(t,15),t.Ft(Ne(l)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let n=e.values||[];this.Ct(t,50);for(let r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),$.fromName(e).path.forEach(n=>{this.Ct(t,60),this.$t(n,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};ei.Ut=new ei;var ys=255;function U1(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function $0(i){let e=64-(function(n){let r=0;for(let s=0;s<8;++s){let o=U1(255&n[s]);if(r+=o,o!==8)break}return r})(i);return Math.ceil(e/8)}var wm=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Wt(n.value),n=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.jt(n.value),n=t.next();this.Jt()}Ht(e){for(let t of e){let n=t.charCodeAt(0);if(n<128)this.Wt(n);else if(n<2048)this.Wt(960|n>>>6),this.Wt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|n>>>12),this.Wt(128|63&n>>>6),this.Wt(128|63&n);else{let r=t.codePointAt(0);this.Wt(240|r>>>18),this.Wt(128|63&r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r)}}this.Gt()}Yt(e){for(let t of e){let n=t.charCodeAt(0);if(n<128)this.jt(n);else if(n<2048)this.jt(960|n>>>6),this.jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|n>>>12),this.jt(128|63&n>>>6),this.jt(128|63&n);else{let r=t.codePointAt(0);this.jt(240|r>>>18),this.jt(128|63&r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r)}}this.Jt()}Zt(e){let t=this.Xt(e),n=$0(t);this.en(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}tn(e){let t=this.Xt(e),n=$0(t);this.en(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}nn(){this.rn(ys),this.rn(255)}sn(){this._n(ys),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===ys?(this.rn(ys),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===ys?(this._n(ys),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},bm=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},Em=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},Tr=class{constructor(){this.un=new wm,this.cn=new bm(this.un),this.ln=new Em(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var Cr=class i{constructor(e,t,n,r){this.Pn=e,this.Tn=t,this.In=n,this.dn=r}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new i(this.Pn,this.Tn,this.In,n)}An(e,t,n){return{indexId:this.Pn,uid:e,arrayValue:Yc(this.In),directionalValue:Yc(this.dn),orderedDocumentKey:Yc(t),documentKey:n.path.toArray()}}Rn(e,t,n){let r=this.An(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}};function ki(i,e){let t=i.Pn-e.Pn;return t!==0?t:(t=W0(i.In,e.In),t!==0?t:(t=W0(i.dn,e.dn),t!==0?t:$.comparator(i.Tn,e.Tn)))}function W0(i,e){for(let t=0;t<i.length&&t<e.length;++t){let n=i[t]-e[t];if(n!==0)return n}return i.length-e.length}function Yc(i){return uf()?(function(t){let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n})(i):i}function q0(i){return typeof i!="string"?i:(function(t){let n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})(i)}var bd=class{constructor(e){this.Vn=new Ce((t,n)=>et.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let n=t;n.isInequality()?this.Vn=this.Vn.add(n):this.fn.push(n)}}get gn(){return this.Vn.size>1}pn(e){if(Y(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=Bp(e);if(t!==void 0&&!this.yn(t))return!1;let n=yr(e),r=new Set,s=0,o=0;for(;s<n.length&&this.yn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Vn.size>0){let l=this.Vn.getIterator().getNext();if(!r.has(l.field.canonicalString())){let c=n[s];if(!this.wn(l,c)||!this.Sn(this.mn[o++],c))return!1}++s}for(;s<n.length;++s){let l=n[s];if(o>=this.mn.length||!this.Sn(this.mn[o++],l))return!1}return!0}bn(){if(this.gn)return null;let e=new Ce(et.comparator),t=[];for(let n of this.fn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new ks(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ks(n.field,0))}for(let n of this.mn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ks(n.field,n.dir==="asc"?0:1)));return new Ms(Ms.UNKNOWN_ID,this.collectionId,t,ka.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function CT(i){var e,t;if(Y(i instanceof le||i instanceof Te,20012),i instanceof le){if(i instanceof ld){let r=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>le.create(i.field,"==",s)))||[];return Te.create(r,"or")}return i}let n=i.filters.map(r=>CT(r));return Te.create(n,i.op)}function H1(i){if(i.getFilters().length===0)return[];let e=Im(CT(i));return Y(IT(e),7391),Tm(e)||Cm(e)?[e]:e.getFilters()}function Tm(i){return i instanceof le}function Cm(i){return i instanceof Te&&Lg(i)}function IT(i){return Tm(i)||Cm(i)||(function(t){if(t instanceof Te&&Xp(t)){for(let n of t.getFilters())if(!Tm(n)&&!Cm(n))return!1;return!0}return!1})(i)}function Im(i){if(Y(i instanceof le||i instanceof Te,34018),i instanceof le)return i;if(i.filters.length===1)return Im(i.filters[0]);let e=i.filters.map(n=>Im(n)),t=Te.create(e,i.op);return t=Ed(t),IT(t)?t:(Y(t instanceof Te,64498),Y($s(t),40251),Y(t.filters.length>1,57927),t.filters.reduce((n,r)=>Ug(n,r)))}function Ug(i,e){let t;return Y(i instanceof le||i instanceof Te,38388),Y(e instanceof le||e instanceof Te,25473),t=i instanceof le?e instanceof le?(function(r,s){return Te.create([r,s],"and")})(i,e):G0(i,e):e instanceof le?G0(e,i):(function(r,s){if(Y(r.filters.length>0&&s.filters.length>0,48005),$s(r)&&$s(s))return KE(r,s.getFilters());let o=Xp(r)?r:s,l=Xp(r)?s:r,c=o.filters.map(d=>Ug(d,l));return Te.create(c,"or")})(i,e),Ed(t)}function G0(i,e){if($s(e))return KE(e,i.getFilters());{let t=e.filters.map(n=>Ug(i,n));return Te.create(t,"or")}}function Ed(i){if(Y(i instanceof le||i instanceof Te,11850),i instanceof le)return i;let e=i.getFilters();if(e.length===1)return Ed(e[0]);if(GE(i))return i;let t=e.map(r=>Ed(r)),n=[];return t.forEach(r=>{r instanceof le?n.push(r):r instanceof Te&&(r.op===i.op?n.push(...r.filters):n.push(r))}),n.length===1?n[0]:Te.create(n,i.op)}var Dm=class{constructor(){this.Dn=new Ua}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Jt.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Jt.min())}updateCollectionGroup(e,t,n){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Ua=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ce(Ee.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ce(Ee.comparator)).toArray()}};var Y0="IndexedDbIndexManager",Lc=new Uint8Array(0),Sm=class{constructor(e,t){this.databaseId=t,this.vn=new Ua,this.Cn=new mn(n=>Mr(n),(n,r)=>Ga(n,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let s={collectionId:n,parent:Ct(r)};return K0(e).put(s)}return x.resolve()}getCollectionParents(e,t){let n=[],r=IDBKeyRange.bound([t,""],[EE(t),""],!1,!0);return K0(e).j(r).next(s=>{for(let o of s){if(o.collectionId!==t)break;n.push(Rn(o.parent))}return n})}addFieldIndex(e,t){let n=ma(e),r=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}})(t);delete r.indexId;let s=n.add(r);if(t.indexState){let o=bs(e);return s.next(l=>{o.put(U0(l,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let n=ma(e),r=bs(e),s=ws(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ma(e),n=ws(e),r=bs(e);return t.Y().next(()=>n.Y()).next(()=>r.Y())}createTargetIndexes(e,t){return x.forEach(this.Fn(t),n=>this.getIndexType(e,n).next(r=>{if(r===0||r===1){let s=new bd(n).bn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let n=ws(e),r=!0,s=new Map;return x.forEach(this.Fn(t),o=>this.Mn(e,o).next(l=>{r&&(r=!!l),s.set(o,l)})).next(()=>{if(r){let o=re(),l=[];return x.forEach(s,(c,d)=>{V(Y0,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`})(c)} to execute ${Mr(t)}`);let h=(function(M,H){let W=Bp(H);if(W===void 0)return null;for(let G of dd(M,W.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null})(d,c),p=(function(M,H){let W=new Map;for(let G of yr(H))for(let I of dd(M,G.fieldPath))switch(I.op){case"==":case"in":W.set(G.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return W.set(G.fieldPath.canonicalString(),I.value),Array.from(W.values())}return null})(d,c),g=(function(M,H){let W=[],G=!0;for(let I of yr(H)){let v=I.kind===0?S0(M,I.fieldPath,M.startAt):A0(M,I.fieldPath,M.startAt);W.push(v.value),G&&(G=v.inclusive)}return new zi(W,G)})(d,c),E=(function(M,H){let W=[],G=!0;for(let I of yr(H)){let v=I.kind===0?A0(M,I.fieldPath,M.endAt):S0(M,I.fieldPath,M.endAt);W.push(v.value),G&&(G=v.inclusive)}return new zi(W,G)})(d,c),T=this.xn(c,d,g),k=this.xn(c,d,E),R=this.On(c,d,p),B=this.Nn(c.indexId,h,T,g.inclusive,k,E.inclusive,R);return x.forEach(B,F=>n.H(F,t.limit).next(M=>{M.forEach(H=>{let W=$.fromSegments(H.documentKey);o.has(W)||(o=o.add(W),l.push(W))})}))}).next(()=>l)}return x.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=H1(Te.create(e.filters,"and")).map(n=>sm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,n,r,s,o,l){let c=(t!=null?t.length:1)*Math.max(n.length,s.length),d=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let g=t?this.Bn(t[p/d]):Lc,E=this.Ln(e,g,n[p%d],r),T=this.kn(e,g,s[p%d],o),k=l.map(R=>this.Ln(e,g,R,!0));h.push(...this.createRange(E,T,k))}return h}Ln(e,t,n,r){let s=new Cr(e,$.empty(),t,n);return r?s:s.En()}kn(e,t,n,r){let s=new Cr(e,$.empty(),t,n);return r?s.En():s}Mn(e,t){let n=new bd(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let l of s)n.pn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,t){let n=2,r=this.Fn(t);return x.forEach(r,s=>this.Mn(e,s).next(o=>{o?n!==0&&o.fields.length<(function(c){let d=new Ce(et.comparator),h=!1;for(let p of c.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:d=d.add(g.field));for(let p of c.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(h?1:0)})(s)&&(n=1):n=0})).next(()=>(function(o){return o.limit!==null})(t)&&r.length>1&&n===2?1:n)}qn(e,t){let n=new Tr;for(let r of yr(e)){let s=t.data.field(r.fieldPath);if(s==null)return null;let o=n.hn(r.kind);ei.Ut.bt(s,o)}return n.an()}Bn(e){let t=new Tr;return ei.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let n=new Tr;return ei.Ut.bt(Fg(this.databaseId,t),n.hn((function(s){let o=yr(s);return o.length===0?0:o[o.length-1].kind})(e))),n.an()}On(e,t,n){if(n===null)return[];let r=[];r.push(new Tr);let s=0;for(let o of yr(e)){let l=n[s++];for(let c of r)if(this.$n(t,o.fieldPath)&&Fa(l))r=this.Un(r,o,l);else{let d=c.hn(o.kind);ei.Ut.bt(l,d)}}return this.Kn(r)}xn(e,t,n){return this.On(e,t,n.position)}Kn(e){let t=[];for(let n=0;n<e.length;++n)t[n]=e[n].an();return t}Un(e,t,n){let r=[...e],s=[];for(let o of n.arrayValue.values||[])for(let l of r){let c=new Tr;c.seed(l.an()),ei.Ut.bt(o,c.hn(t.kind)),s.push(c)}return s}$n(e,t){return!!e.filters.find(n=>n instanceof le&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){let n=ma(e),r=bs(e);return(t?n.j(Wp,IDBKeyRange.bound(t,t)):n.j()).next(s=>{let o=[];return x.forEach(s,l=>r.get([l.indexId,this.uid]).next(c=>{o.push((function(h,p){let g=p?new ka(p.sequenceNumber,new Jt(Lr(p.readTime),new $(Rn(p.documentKey)),p.largestBatchId)):ka.empty(),E=h.fields.map(([T,k])=>new ks(et.fromServerFormat(T),k));return new Ms(h.indexId,h.collectionGroup,E,g)})(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,r)=>{let s=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ee(n.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){let r=ma(e),s=bs(e);return this.Wn(e).next(o=>r.j(Wp,IDBKeyRange.bound(t,t)).next(l=>x.forEach(l,c=>s.put(U0(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,t){let n=new Map;return x.forEach(t,(r,s)=>{let o=n.get(r.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(l=>(n.set(r.collectionGroup,l),x.forEach(l,c=>this.Gn(e,r,c).next(d=>{let h=this.zn(s,c);return d.isEqual(h)?x.resolve():this.jn(e,s,c,d,h)}))))})}Jn(e,t,n,r){return ws(e).put(r.An(this.uid,this.Qn(n,t.key),t.key))}Hn(e,t,n,r){return ws(e).delete(r.Rn(this.uid,this.Qn(n,t.key),t.key))}Gn(e,t,n){let r=ws(e),s=new Ce(ki);return r.X({index:PE,range:IDBKeyRange.only([n.indexId,this.uid,Yc(this.Qn(n,t))])},(o,l)=>{s=s.add(new Cr(n.indexId,t,q0(l.arrayValue),q0(l.directionalValue)))}).next(()=>s)}zn(e,t){let n=new Ce(ki),r=this.qn(t,e);if(r==null)return n;let s=Bp(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Fa(o))for(let l of o.arrayValue.values||[])n=n.add(new Cr(t.indexId,e.key,this.Bn(l),r))}else n=n.add(new Cr(t.indexId,e.key,Lc,r));return n}jn(e,t,n,r,s){V(Y0,"Updating index entries for document '%s'",t.key);let o=[];return(function(c,d,h,p,g){let E=c.getIterator(),T=d.getIterator(),k=vs(E),R=vs(T);for(;k||R;){let B=!1,F=!1;if(k&&R){let M=h(k,R);M<0?F=!0:M>0&&(B=!0)}else k!=null?F=!0:B=!0;B?(p(R),R=vs(T)):F?(g(k),k=vs(E)):(k=vs(E),R=vs(T))}})(r,s,ki,l=>{o.push(this.Jn(e,t,n,l))},l=>{o.push(this.Hn(e,t,n,l))}),x.waitFor(o)}Wn(e){let t=1;return bs(e).X({index:xE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((o,l)=>ki(o,l)).filter((o,l,c)=>!l||ki(o,c[l-1])!==0);let r=[];r.push(e);for(let o of n){let l=ki(o,e),c=ki(o,t);if(l===0)r[0]=e.En();else if(l>0&&c<0)r.push(o),r.push(o.En());else if(c>0)break}r.push(t);let s=[];for(let o=0;o<r.length;o+=2){if(this.Yn(r[o],r[o+1]))return[];let l=r[o].Rn(this.uid,Lc,$.empty()),c=r[o+1].Rn(this.uid,Lc,$.empty());s.push(IDBKeyRange.bound(l,c))}return s}Yn(e,t){return ki(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(X0)}getMinOffset(e,t){return x.mapArray(this.Fn(t),n=>this.Mn(e,n).next(r=>r||q(44426))).next(X0)}};function K0(i){return nt(i,Oa)}function ws(i){return nt(i,Ea)}function ma(i){return nt(i,xg)}function bs(i){return nt(i,ba)}function X0(i){Y(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<i.length;n++){let r=i[n].indexState.offset;Ag(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Jt(e.readTime,e.documentKey,t)}var Q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DT=41943040,Lt=class i{static withCacheSize(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};function ST(i,e,t){let n=i.store(hn),r=i.store(Ns),s=[],o=IDBKeyRange.only(t.batchId),l=0,c=n.X({range:o},(h,p,g)=>(l++,g.delete()));s.push(c.next(()=>{Y(l===1,47070,{batchId:t.batchId})}));let d=[];for(let h of t.mutations){let p=AE(e,h.key.path,t.batchId);s.push(r.delete(p)),d.push(h.key)}return x.waitFor(s).next(()=>d)}function Td(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw q(14731);e=i.noDocument}return JSON.stringify(e).length}Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(DT,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var Cd=class i{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Zn={}}static yt(e,t,n,r){Y(e.uid!=="",64387);let s=e.isAuthenticated()?e.uid:"";return new i(s,t,n,r)}checkEmpty(e){let t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ri(e).X({index:Ir,range:n},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,n,r){let s=Ss(e),o=Ri(e);return o.add({}).next(l=>{Y(typeof l=="number",49019);let c=new La(l,t,n,r),d=(function(E,T,k){let R=k.baseMutations.map(F=>_d(E.gt,F)),B=k.mutations.map(F=>_d(E.gt,F));return{userId:T,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:R,mutations:B}})(this.serializer,this.userId,c),h=[],p=new Ce((g,E)=>ee(g.canonicalString(),E.canonicalString()));for(let g of r){let E=AE(this.userId,g.key.path,l);p=p.add(g.key.path.popLast()),h.push(o.put(d)),h.push(s.put(E,NP))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Zn[l]=c.keys()}),x.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Ri(e).get(t).next(n=>n?(Y(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),Er(this.serializer,n)):null)}Xn(e,t){return this.Zn[t]?x.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){let r=n.keys();return this.Zn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]),s=null;return Ri(e).X({index:Ir,range:r},(o,l,c)=>{l.userId===this.userId&&(Y(l.batchId>=n,47524,{er:n}),s=Er(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=kr;return Ri(e).X({index:Ir,range:t,reverse:!0},(r,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,kr],[this.userId,Number.POSITIVE_INFINITY]);return Ri(e).j(Ir,t).next(n=>n.map(r=>Er(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let n=Hc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Ss(e).X({range:r},(o,l,c)=>{let[d,h,p]=o,g=Rn(h);if(d===this.userId&&t.path.isEqual(g))return Ri(e).get(p).next(E=>{if(!E)throw q(61480,{tr:o,batchId:p});Y(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:p}),s.push(Er(this.serializer,E))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ce(ee),r=[];return t.forEach(s=>{let o=Hc(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Ss(e).X({range:l},(d,h,p)=>{let[g,E,T]=d,k=Rn(E);g===this.userId&&s.path.isEqual(k)?n=n.add(T):p.done()});r.push(c)}),x.waitFor(r).next(()=>this.nr(e,n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,s=Hc(this.userId,n),o=IDBKeyRange.lowerBound(s),l=new Ce(ee);return Ss(e).X({range:o},(c,d,h)=>{let[p,g,E]=c,T=Rn(g);p===this.userId&&n.isPrefixOf(T)?T.length===r&&(l=l.add(E)):h.done()}).next(()=>this.nr(e,l))}nr(e,t){let n=[],r=[];return t.forEach(s=>{r.push(Ri(e).get(s).next(o=>{if(o===null)throw q(35274,{batchId:s});Y(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),n.push(Er(this.serializer,o))}))}),x.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ST(e.ce,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),x.forEach(n,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return x.resolve();let n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),r=[];return Ss(e).X({range:n},(s,o,l)=>{if(s[0]===this.userId){let c=Rn(s[1]);r.push(c)}else l.done()}).next(()=>{Y(r.length===0,56720,{ir:r.map(s=>s.canonicalString())})})})}containsKey(e,t){return AT(e,this.userId,t)}sr(e){return kT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:kr,lastStreamToken:""})}};function AT(i,e,t){let n=Hc(e,t.path),r=n[1],s=IDBKeyRange.lowerBound(n),o=!1;return Ss(i).X({range:s,Z:!0},(l,c,d)=>{let[h,p,g]=l;h===e&&p===r&&(o=!0),d.done()}).next(()=>o)}function Ri(i){return nt(i,hn)}function Ss(i){return nt(i,Ns)}function kT(i){return nt(i,xa)}var Qs=class i{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new i(0)}static ur(){return new i(-1)}};var Am=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let n=new Qs(t.highestTargetId);return t.highestTargetId=n.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>J.fromTimestamp(new Re(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.cr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.lr(e,r)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(n=>(n.targetCount+=1,this.Pr(t,n),this.lr(e,n))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Es(e).delete(t.targetId)).next(()=>this.cr(e)).next(n=>(Y(n.targetCount>0,8065),n.targetCount-=1,this.lr(e,n)))}removeTargets(e,t,n){let r=0,s=[];return Es(e).X((o,l)=>{let c=ya(l);c.sequenceNumber<=t&&n.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>x.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Es(e).X((n,r)=>{let s=ya(r);t(s)})}cr(e){return J0(e).get(id).next(t=>(Y(t!==null,2888),t))}lr(e,t){return J0(e).put(id,t)}hr(e,t){return Es(e).put(ET(this.serializer,t))}Pr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let n=Mr(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),s=null;return Es(e).X({range:r,index:RE},(o,l,c)=>{let d=ya(l);Ga(t,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,t,n){let r=[],s=Pi(e);return t.forEach(o=>{let l=Ct(o.path);r.push(s.put({targetId:n,path:l})),r.push(this.referenceDelegate.addReference(e,n,o))}),x.waitFor(r)}removeMatchingKeys(e,t,n){let r=Pi(e);return x.forEach(t,s=>{let o=Ct(s.path);return x.waitFor([r.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,t){let n=Pi(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){let n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pi(e),s=re();return r.X({range:n,Z:!0},(o,l,c)=>{let d=Rn(o[1]),h=new $(d);s=s.add(h)}).next(()=>s)}containsKey(e,t){let n=Ct(t.path),r=IDBKeyRange.bound([n],[EE(n)],!1,!0),s=0;return Pi(e).X({index:Rg,Z:!0,range:r},([o,l],c,d)=>{o!==0&&(s++,d.done())}).next(()=>s>0)}Et(e,t){return Es(e).get(t).next(n=>n?ya(n):null)}};function Es(i){return nt(i,Fs)}function J0(i){return nt(i,Rr)}function Pi(i){return nt(i,Ls)}var Z0="LruGarbageCollector",j1=1048576;function eE([i,e],[t,n]){let r=ee(i,t);return r===0?ee(e,n):r}var km=class{constructor(e){this.Tr=e,this.buffer=new Ce(eE),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let n=this.buffer.last();eE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}},Id=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(Z0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){qi(t)?V(Z0,"Ignoring IndexedDB error during garbage collection: ",t):yield zr(t)}yield this.Rr(3e5)}))}},Rm=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return x.resolve(fn.ue);let n=new km(t);return this.Vr.forEachTarget(e,r=>n.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>n.Er(r))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(Q0)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q0):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,o,l,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(n=p,l=Date.now(),this.removeTargets(e,n,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(d=Date.now(),Ts()<=se.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}};function RT(i,e){return new Rm(i,e)}var xm=class{constructor(e,t){this.db=e,this.garbageCollector=RT(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(r=>n+r))}yr(e){let t=0;return this.gr(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(n,r)=>t(r))}addReference(e,t,n){return Bc(e,n)}removeReference(e,t,n){return Bc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Bc(e,t)}Sr(e,t){return(function(r,s){let o=!1;return kT(r).ee(l=>AT(r,l,s).next(c=>(c&&(o=!0),x.resolve(!c)))).next(()=>o)})(e,t)}removeOrphanedDocuments(e,t){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.wr(e,(o,l)=>{if(l<=t){let c=this.Sr(e,o).next(d=>{if(!d)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,J.min()),Pi(e).delete((function(p){return[0,Ct(p.path)]})(o))))});r.push(c)}}).next(()=>x.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Bc(e,t)}wr(e,t){let n=Pi(e),r,s=fn.ue;return n.X({index:Rg},([o,l],{path:c,sequenceNumber:d})=>{o===0?(s!==fn.ue&&t(new $(Rn(r)),s),s=d,r=c):s=fn.ue}).next(()=>{s!==fn.ue&&t(new $(Rn(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Bc(i,e){return Pi(i).put((function(n,r){return{targetId:0,path:Ct(n.path),sequenceNumber:r}})(e,i.currentSequenceNumber))}var Dd=class{constructor(){this.changes=new mn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n!==void 0?x.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Pm=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return vr(e).put(n)}removeEntry(e,t,n){return vr(e).delete((function(s,o){let l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],yd(o),l[l.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.br(e,n)))}getEntry(e,t){let n=ft.newInvalidDocument(t);return vr(e).X({index:jc,range:IDBKeyRange.only(ga(t))},(r,s)=>{n=this.Dr(t,s)}).next(()=>n)}vr(e,t){let n={size:0,document:ft.newInvalidDocument(t)};return vr(e).X({index:jc,range:IDBKeyRange.only(ga(t))},(r,s)=>{n={document:this.Dr(t,s),size:Td(s)}}).next(()=>n)}getEntries(e,t){let n=Wt();return this.Cr(e,t,(r,s)=>{let o=this.Dr(r,s);n=n.insert(r,o)}).next(()=>n)}Fr(e,t){let n=Wt(),r=new Fe($.comparator);return this.Cr(e,t,(s,o)=>{let l=this.Dr(s,o);n=n.insert(s,l),r=r.insert(s,Td(o))}).next(()=>({documents:n,Mr:r}))}Cr(e,t,n){if(t.isEmpty())return x.resolve();let r=new Ce(iE);t.forEach(c=>r=r.add(c));let s=IDBKeyRange.bound(ga(r.first()),ga(r.last())),o=r.getIterator(),l=o.getNext();return vr(e).X({index:jc,range:s},(c,d,h)=>{let p=$.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;l&&iE(l,p)<0;)n(l,null),l=o.getNext();l&&l.isEqual(p)&&(n(l,d),l=o.hasNext()?o.getNext():null),l?h.G(ga(l)):h.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){let o=t.path,l=[o.popLast().toArray(),o.lastSegment(),yd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vr(e).j(IDBKeyRange.bound(l,c,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let h=Wt();for(let p of d){let g=this.Dr($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Ya(t,g)||r.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,n,r){let s=Wt(),o=nE(t,n),l=nE(t,Jt.max());return vr(e).X({index:kE,range:IDBKeyRange.bound(o,l,!0)},(c,d,h)=>{let p=this.Dr($.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(p.key,p),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Om(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tE(e).get($p).next(t=>(Y(!!t,20021),t))}br(e,t){return tE(e).put($p,t)}Dr(e,t){if(t){let n=z1(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(J.min())))return n}return ft.newInvalidDocument(e)}};function xT(i){return new Pm(i)}var Om=class extends Dd{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new mn(n=>n.toString(),(n,r)=>n.isEqual(r))}applyChanges(e){let t=[],n=0,r=new Ce((s,o)=>ee(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let l=this.Nr.get(s);if(t.push(this.Or.removeEntry(e,s,l.readTime)),o.isValidDocument()){let c=B0(this.Or.serializer,o);r=r.add(s.path.popLast());let d=Td(c);n+=d-l.size,t.push(this.Or.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){let c=B0(this.Or.serializer,o.convertToNoDocument(J.min()));t.push(this.Or.addEntry(e,s,c))}}),r.forEach(s=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Or.updateMetadata(e,n)),x.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(n=>(this.Nr.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:n,Mr:r})=>(r.forEach((s,o)=>{this.Nr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}};function tE(i){return nt(i,Pa)}function vr(i){return nt(i,nd)}function ga(i){let e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nE(i,e){let t=e.documentKey.path.toArray();return[i,yd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iE(i,e){let t=i.path.toArray(),n=e.path.toArray(),r=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(r=ee(t[s],n[s]),r)return r;return r=ee(t.length,n.length),r||(r=ee(t[t.length-2],n[n.length-2]),r||ee(t[t.length-1],n[n.length-1]))}var Mm=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sd=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(n!==null&&Da(n.mutation,r,$t.empty(),Re.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,re()).next(()=>n))}getLocalViewOfDocuments(e,t,n=re()){let r=xn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(s=>{let o=va();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let n=xn();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,re()))}populateOverlays(e,t,n){let r=[];return n.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,n,r){let s=Wt(),o=Ia(),l=(function(){return Ia()})();return t.forEach((c,d)=>{let h=n.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof gn)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Da(h.mutation,d,h.mutation.getFieldMask(),Re.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var p;return l.set(d,new Mm(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){let n=Ia(),r=new Fe((o,l)=>o-l),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let l of o)l.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=n.get(c)||$t.empty();h=l.applyToLocalView(d,h),n.set(c,h);let p=(r.get(l.batchId)||re()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{let o=[],l=r.getReverseIterator();for(;l.hasNext();){let c=l.getNext(),d=c.key,h=c.value,p=nT();h.forEach(g=>{if(!s.has(g)){let E=lT(t.get(g),n.get(g));E!==null&&p.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return x.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,r){return(function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):u1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):x.resolve(xn()),l=Aa,c=s;return o.next(d=>x.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,re())).next(h=>({batchId:l,changes:tT(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(n=>{let r=va();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let s=t.collectionGroup,o=va();return this.indexManager.getCollectionParents(e,s).next(l=>x.forEach(l,c=>{let d=(function(p,g){return new Ws(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,ft.newInvalidDocument(h)))});let l=va();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Da(h.mutation,d,$t.empty(),Re.now()),Ya(t,d)&&(l=l.insert(c,d))}),l})}};var Vm=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Mt(r.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(r){return{name:r.name,query:TT(r.bundledQuery),readTime:Mt(r.readTime)}})(t)),x.resolve()}};var Nm=class{constructor(){this.overlays=new Fe($.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let n=xn();return x.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((r,s)=>{this.wt(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.kr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(n)),x.resolve()}getOverlaysForCollection(e,t,n){let r=xn(),s=t.length+1,o=new $(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){let c=l.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>n&&r.set(c.getKey(),c)}return x.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Fe((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let h=s.get(d.largestBatchId);h===null&&(h=xn(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let l=xn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=r)););return x.resolve(l)}wt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let o=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Ba(t,n));let s=this.kr.get(t);s===void 0&&(s=re(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}};var Fm=class{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Ha=class{constructor(){this.qr=new Ce(Ge.Qr),this.$r=new Ce(Ge.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let n=new Ge(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Wr(new Ge(e,t))}Gr(e,t){e.forEach(n=>this.removeReference(n,t))}zr(e){let t=new $(new Ee([])),n=new Ge(t,e),r=new Ge(t,e+1),s=[];return this.$r.forEachInRange([n,r],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new $(new Ee([])),n=new Ge(t,e),r=new Ge(t,e+1),s=re();return this.$r.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ge(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Ge=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return $.comparator(e.key,t.key)||ee(e.Hr,t.Hr)}static Ur(e,t){return ee(e.Hr,t.Hr)||$.comparator(e.key,t.key)}};var Lm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ce(Ge.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new La(s,t,n,r);this.mutationQueue.push(o);for(let l of r)this.Yr=this.Yr.add(new Ge(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),s=r<0?0:r;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?kr:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Ge(t,0),r=new Ge(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],o=>{let l=this.Zr(o.Hr);s.push(l)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ce(ee);return t.forEach(r=>{let s=new Ge(r,0),o=new Ge(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],l=>{n=n.add(l.Hr)})}),x.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,s=n;$.isDocumentKey(s)||(s=s.child(""));let o=new Ge(new $(s),0),l=new Ce(ee);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.Hr)),!0)},o),x.resolve(this.ei(l))}ei(e){let t=[];return e.forEach(n=>{let r=this.Zr(n);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Y(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return x.forEach(t.mutations,r=>{let s=new Ge(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){let n=new Ge(t,0),r=this.Yr.firstAfterOrEqual(n);return x.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Bm=class{constructor(e){this.ni=e,this.docs=(function(){return new Fe($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return x.resolve(n?n.document.mutableCopy():ft.newInvalidDocument(t))}getEntries(e,t){let n=Wt();return t.forEach(r=>{let s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():ft.newInvalidDocument(r))}),x.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Wt(),o=t.path,l=new $(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Ag(IE(h),n)<=0||(r.has(h.key)||Ya(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,n,r){q(9500)}ri(e,t){return x.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new zm(this)}getSize(e){return x.resolve(this.size)}},zm=class extends Dd{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Um=class{constructor(e){this.persistence=e,this.ii=new mn(t=>Mr(t),Ga),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.si=0,this.oi=new Ha,this.targetCount=0,this._i=Qs.ar()}forEachTarget(e,t){return this.ii.forEach((n,r)=>t(r)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Qs(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,n){let r=0,s=[];return this.ii.forEach((o,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),x.waitFor(s).next(()=>r)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let n=this.ii.get(t)||null;return x.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),x.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let n=this.oi.Jr(t);return x.resolve(n)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var ja=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new fn(0),this.ci=!1,this.ci=!0,this.li=new Fm,this.referenceDelegate=e(this),this.hi=new Um(this),this.indexManager=new Dm,this.remoteDocumentCache=(function(r){return new Bm(r)})(n=>this.referenceDelegate.Pi(n)),this.serializer=new vd(t),this.Ti=new Vm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new Lm(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){V("MemoryPersistence","Starting transaction:",e);let r=new Hm(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ei(e,t){return x.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}},Hm=class extends Zc{constructor(e){super(),this.currentSequenceNumber=e}},Ad=class i{constructor(e){this.persistence=e,this.Ai=new Ha,this.Ri=null}static Vi(e){return new i(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),x.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(r=>this.mi.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.mi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,n=>{let r=$.fromPath(n);return this.fi(e,r).next(s=>{s||t.removeEntry(r,J.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(n=>{n?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},kd=class i{constructor(e,t){this.persistence=e,this.gi=new mn(n=>Ct(n.path),(n,r)=>n.isEqual(r)),this.garbageCollector=RT(this,t)}static Vi(e,t){return new i(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(r=>n+r))}yr(e){let t=0;return this.gr(e,n=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(s=>s?x.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,o=>this.Sr(e,o,t).next(l=>{l||(n++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wc(e.data.value)),t}Sr(e,t,n){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let r=this.gi.get(t);return x.resolve(r!==void 0&&r>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var jm=class{constructor(e){this.serializer=e}q(e,t,n,r){let s=new ed("createOrUpgrade",t);n<1&&r>=1&&((function(c){c.createObjectStore(qa)})(e),(function(c){c.createObjectStore(xa,{keyPath:VP}),c.createObjectStore(hn,{keyPath:g0,autoIncrement:!0}).createIndex(Ir,_0,{unique:!0}),c.createObjectStore(Ns)})(e),rE(e),(function(c){c.createObjectStore(wr)})(e));let o=x.resolve();return n<3&&r>=3&&(n!==0&&((function(c){c.deleteObjectStore(Ls),c.deleteObjectStore(Fs),c.deleteObjectStore(Rr)})(e),rE(e)),o=o.next(()=>(function(c){let d=c.store(Rr),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return d.put(id,h)})(s))),n<4&&r>=4&&(n!==0&&(o=o.next(()=>(function(c,d){return d.store(hn).j().next(p=>{c.deleteObjectStore(hn),c.createObjectStore(hn,{keyPath:g0,autoIncrement:!0}).createIndex(Ir,_0,{unique:!0});let g=d.store(hn),E=p.map(T=>g.put(T));return x.waitFor(E)})})(e,s))),o=o.next(()=>{(function(c){c.createObjectStore(Bs,{keyPath:$P})})(e)})),n<5&&r>=5&&(o=o.next(()=>this.pi(s))),n<6&&r>=6&&(o=o.next(()=>((function(c){c.createObjectStore(Pa)})(e),this.yi(s)))),n<7&&r>=7&&(o=o.next(()=>this.wi(s))),n<8&&r>=8&&(o=o.next(()=>this.Si(e,s))),n<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&r>=10&&(o=o.next(()=>this.bi(s))),n<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Xd,{keyPath:WP})})(e),(function(c){c.createObjectStore(Qd,{keyPath:qP})})(e)})),n<12&&r>=12&&(o=o.next(()=>{(function(c){let d=c.createObjectStore(Jd,{keyPath:ZP});d.createIndex(qp,e1,{unique:!1}),d.createIndex(OE,t1,{unique:!1})})(e)})),n<13&&r>=13&&(o=o.next(()=>(function(c){let d=c.createObjectStore(nd,{keyPath:FP});d.createIndex(jc,LP),d.createIndex(kE,BP)})(e)).next(()=>this.Di(e,s)).next(()=>e.deleteObjectStore(wr))),n<14&&r>=14&&(o=o.next(()=>this.Ci(e,s))),n<15&&r>=15&&(o=o.next(()=>(function(c){c.createObjectStore(xg,{keyPath:GP,autoIncrement:!0}).createIndex(Wp,YP,{unique:!1}),c.createObjectStore(ba,{keyPath:KP}).createIndex(xE,XP,{unique:!1}),c.createObjectStore(Ea,{keyPath:QP}).createIndex(PE,JP,{unique:!1})})(e))),n<16&&r>=16&&(o=o.next(()=>{t.objectStore(ba).clear()}).next(()=>{t.objectStore(Ea).clear()})),n<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Pg,{keyPath:n1})})(e)})),n<18&&r>=18&&uf()&&(o=o.next(()=>{t.objectStore(ba).clear()}).next(()=>{t.objectStore(Ea).clear()})),o}yi(e){let t=0;return e.store(wr).X((n,r)=>{t+=Td(r)}).next(()=>{let n={byteSize:t};return e.store(Pa).put($p,n)})}pi(e){let t=e.store(xa),n=e.store(hn);return t.j().next(r=>x.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,kr],[s.userId,s.lastAcknowledgedBatchId]);return n.j(Ir,o).next(l=>x.forEach(l,c=>{Y(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let d=Er(this.serializer,c);return ST(e,s.userId,d).next(()=>{})}))}))}wi(e){let t=e.store(Ls),n=e.store(wr);return e.store(Rr).get(id).next(r=>{let s=[];return n.X((o,l)=>{let c=new Ee(o),d=(function(p){return[0,Ct(p)]})(c);s.push(t.get(d).next(h=>h?x.resolve():(p=>t.put({targetId:0,path:Ct(p),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>x.waitFor(s))})}Si(e,t){e.createObjectStore(Oa,{keyPath:jP});let n=t.store(Oa),r=new Ua,s=o=>{if(r.add(o)){let l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:Ct(c)})}};return t.store(wr).X({Z:!0},(o,l)=>{let c=new Ee(o);return s(c.popLast())}).next(()=>t.store(Ns).X({Z:!0},([o,l,c],d)=>{let h=Rn(l);return s(h.popLast())}))}bi(e){let t=e.store(Fs);return t.X((n,r)=>{let s=ya(r),o=ET(this.serializer,s);return t.put(o)})}Di(e,t){let n=t.store(wr),r=[];return n.X((s,o)=>{let l=t.store(nd),c=(function(p){return p.document?new $(Ee.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):q(36783)})(o).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(l.put(d))}).next(()=>x.waitFor(r))}Ci(e,t){let n=t.store(hn),r=xT(this.serializer),s=new ja(Ad.Vi,this.serializer.gt);return n.j().next(o=>{let l=new Map;return o.forEach(c=>{var d;let h=(d=l.get(c.userId))!==null&&d!==void 0?d:re();Er(this.serializer,c).keys().forEach(p=>h=h.add(p)),l.set(c.userId,h)}),x.forEach(l,(c,d)=>{let h=new Ze(d),p=wd.yt(this.serializer,h),g=s.getIndexManager(h),E=Cd.yt(h,this.serializer,g,s.referenceDelegate);return new Sd(r,E,p,g).recalculateAndSaveOverlaysForDocumentKeys(new Ma(t,fn.ue),c).next()})})}};function rE(i){i.createObjectStore(Ls,{keyPath:UP}).createIndex(Rg,HP,{unique:!0}),i.createObjectStore(Fs,{keyPath:"targetId"}).createIndex(RE,zP,{unique:!0}),i.createObjectStore(Rr)}var xi="IndexedDbPersistence",Sp=18e5,Ap=5e3,kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$1="main",$m=class i{constructor(e,t,n,r,s,o,l,c,d,h,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Fi=s,this.window=o,this.document=l,this.Mi=d,this.xi=h,this.Oi=p,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=g=>Promise.resolve(),!i.C())throw new j(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xm(this,r),this.Qi=t+$1,this.serializer=new vd(c),this.$i=new Vs(this.Qi,this.Oi,new jm(this.serializer)),this.li=new ym,this.hi=new Am(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xT(this.serializer),this.Ti=new vm,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&Pt(xi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(O.FAILED_PRECONDITION,kp);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new fn(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>_(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(qi(e))return V(xi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V(xi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return _a(e).get(_s).next(t=>x.resolve(this.Xi(t)))}es(e){return zc(e).delete(this.clientId)}ts(){return _(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,Sp)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let n=nt(t,Bs);return n.j().next(r=>{let s=this.rs(r,Sp),o=r.filter(l=>s.indexOf(l)===-1);return x.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?x.resolve(!0):_a(e).get(_s).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Ap)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new j(O.FAILED_PRECONDITION,kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||zc(e).j().next(n=>this.rs(n,Ap).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,l=this.networkEnabled===r.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&V(xi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return _(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[qa,Bs],e=>{let t=new Ma(e,fn.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(n=>this.ns(n.updateTimeMs,t)&&!this._s(n.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>zc(e).j().next(t=>this.rs(t,Sp).map(n=>n.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Cd.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Sm(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return wd.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,n){V(xi,"Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",s=(function(c){return c===18?s1:c===17?FE:c===16?r1:c===15?Og:c===14?NE:c===13?VE:c===12?i1:c===11?ME:void q(60245)})(this.Oi),o;return this.$i.runTransaction(e,r,s,l=>(o=new Ma(l,this.ui?this.ui.next():fn.ue),t==="readwrite-primary"?this.Ji(o).next(c=>!!c||this.Hi(o)).next(c=>{if(!c)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new j(O.FAILED_PRECONDITION,DE);return n(o)}).next(c=>this.Zi(o).next(()=>c)):this.Ts(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ts(e){return _a(e).get(_s).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Ap)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(O.FAILED_PRECONDITION,kp)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _a(e).put(_s,t)}static C(){return Vs.C()}Yi(e){let t=_a(e);return t.get(_s).next(n=>this.Xi(n)?(V(xi,"Releasing primary lease."),t.delete(_s)):x.resolve())}ns(e,t){let n=Date.now();return!(e<n-t)&&(!(e>n)||(Pt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;df()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let n=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return V(xi,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Pt(xi,"Failed to get zombied client id.",n),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function _a(i){return nt(i,qa)}function zc(i){return nt(i,Bs)}function W1(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}var Wm=class i{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=re(),r=re();for(let s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new i(e,t.fromCache,n,r)}};var qm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Rd=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return df()?8:SE(Ue())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new qm;return this.ws(e,t,o).next(l=>{if(s.result=l,this.Rs)return this.Ss(e,t,o,l.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(Ts()<=se.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Cs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Ts()<=se.DEBUG&&V("QueryEngine","Query:",Cs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(Ts()<=se.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Cs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):x.resolve())}ps(e,t){if(k0(t))return x.resolve(null);let n=Qt(t);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=om(t,null,"F"),n=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{let o=re(...s);return this.gs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{let d=this.bs(t,l);return this.Ds(t,d,o,c.readTime)?this.ps(e,om(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,n,r){return k0(t)||r.isEqual(J.min())?x.resolve(null):this.gs.getDocuments(e,n).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,n,r)?x.resolve(null):(Ts()<=se.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cs(t)),this.vs(e,o,t,PP(r,Aa)).next(l=>l))})}bs(e,t){let n=new Ce(ZE(e));return t.forEach((r,s)=>{Ya(e,s)&&(n=n.add(s))}),n}Ds(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return Ts()<=se.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Cs(t)),this.gs.getDocumentsMatchingQuery(e,t,Jt.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Hg="LocalStore",q1=3e8,Gm=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Fe(ee),this.Ms=new mn(s=>Mr(s),Ga),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sd(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function PT(i,e,t,n){return new Gm(i,e,t,n)}function OT(i,e){return _(this,null,function*(){let t=te(i);return yield t.persistence.runTransaction("Handle user change","readonly",n=>{let r;return t.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{let o=[],l=[],c=re();for(let d of r){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){l.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(n,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:l}))})})})}function G1(i,e){let t=te(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(l,c,d,h){let p=d.batch,g=p.keys(),E=x.resolve();return g.forEach(T=>{E=E.next(()=>h.getEntry(c,T)).next(k=>{let R=d.docVersions.get(T);Y(R!==null,48541),k.version.compareTo(R)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,p))})(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(l){let c=re();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(n,r))})}function MT(i){let e=te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Y1(i,e){let t=te(i),n=e.snapshotVersion,r=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});r=t.Fs;let l=[];e.targetChanges.forEach((h,p)=>{let g=r.get(p);if(!g)return;l.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(tt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,n)),r=r.insert(p,E),(function(k,R,B){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=q1?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(g,E,h)&&l.push(t.hi.updateTargetData(s,E))});let c=Wt(),d=re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(K1(s,o,e.documentUpdates).next(h=>{c=h.Ls,d=h.ks})),!n.isEqual(J.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return x.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Fs=r,s))}function K1(i,e,t){let n=re(),r=re();return t.forEach(s=>n=n.add(s)),e.getEntries(i,n).next(s=>{let o=Wt();return t.forEach((l,c)=>{let d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):V(Hg,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ls:o,ks:r}})}function X1(i,e){let t=te(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=kr),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Q1(i,e){let t=te(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return t.hi.getTargetData(n,e).next(s=>s?(r=s,x.resolve(r)):t.hi.allocateTargetId(n).next(o=>(r=new Xs(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.hi.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=t.Fs.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(n.targetId,n),t.Ms.set(e,n.targetId)),n})}function Ym(i,e,t){return _(this,null,function*(){let n=te(i),r=n.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!qi(o))throw o;V(Hg,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(r.target)})}function sE(i,e,t){let n=te(i),r=J.min(),s=re();return n.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let p=te(c),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(d,h)})(n,o,Qt(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(o,e,t?r:J.min(),t?s:re())).next(l=>(J1(n,f1(e),l),{documents:l,qs:s})))}function J1(i,e,t){let n=i.xs.get(e)||J.min();t.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.xs.set(e,n)}var xd=class{constructor(){this.activeTargetIds=y1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Pd=class{constructor(){this.Fo=new xd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Km=class{xo(e){}shutdown(){}};var oE="ConnectivityMonitor",Od=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(oE,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(oE,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Uc=null;function Xm(){return Uc===null?Uc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uc++,"0x"+Uc.toString(16)}var Rp="RestConnection",Z1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Qm=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===od?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,s){let o=Xm(),l=this.Go(e,t.toUriEncodedString());V(Rp,`Sending RPC '${e}' ${o}:`,l,n);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,r,s);let{host:d}=new URL(l),h=vi(d);return this.jo(e,l,c,n,h).then(p=>(V(Rp,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Mn(Rp,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",n),p})}Jo(e,t,n,r,s,o){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+to})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),n&&n.headers.forEach((r,s)=>e[s]=r)}Go(e,t){let n=Z1[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}};var Jm=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Tt="WebChannelConnection",Zm=class extends Qm{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){let o=Xm();return new Promise((l,c)=>{let d=new bp;d.setWithCredentials(!0),d.listenOnce(Ep.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fa.NO_ERROR:let p=d.getResponseJson();V(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case fa.TIMEOUT:V(Tt,`RPC '${e}' ${o} timed out`),c(new j(O.DEADLINE_EXCEEDED,"Request time out"));break;case fa.HTTP_ERROR:let g=d.getStatus();if(V(Tt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);let T=E?.error;if(T&&T.status&&T.message){let k=(function(B){let F=B.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(F)>=0?F:O.UNKNOWN})(T.status);c(new j(k,T.message))}else c(new j(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new j(O.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{V(Tt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(r);V(Tt,`RPC '${e}' ${o} sending request:`,r),d.send(t,"POST",h,n,15)})}P_(e,t,n){let r=Xm(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ip(),l=Cp(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;let h=s.join("");V(Tt,`Creating RPC '${e}' stream ${r}: ${h}`,c);let p=o.createWebChannel(h,c);this.T_(p);let g=!1,E=!1,T=new Jm({Ho:R=>{E?V(Tt,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(g||(V(Tt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),V(Tt,`RPC '${e}' stream ${r} sending:`,R),p.send(R))},Yo:()=>p.close()}),k=(R,B,F)=>{R.listen(B,M=>{try{F(M)}catch(H){setTimeout(()=>{throw H},0)}})};return k(p,gs.EventType.OPEN,()=>{E||(V(Tt,`RPC '${e}' stream ${r} transport opened.`),T.s_())}),k(p,gs.EventType.CLOSE,()=>{E||(E=!0,V(Tt,`RPC '${e}' stream ${r} transport closed`),T.__(),this.I_(p))}),k(p,gs.EventType.ERROR,R=>{E||(E=!0,Mn(Tt,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),T.__(new j(O.UNAVAILABLE,"The operation could not be completed")))}),k(p,gs.EventType.MESSAGE,R=>{var B;if(!E){let F=R.data[0];Y(!!F,16349);let M=F,H=M?.error||((B=M[0])===null||B===void 0?void 0:B.error);if(H){V(Tt,`RPC '${e}' stream ${r} received error:`,H);let W=H.status,G=(function(y){let D=qe[y];if(D!==void 0)return dT(D)})(W),I=H.message;G===void 0&&(G=O.INTERNAL,I="Unknown error status: "+W+" with message "+H.message),E=!0,T.__(new j(G,I)),p.close()}else V(Tt,`RPC '${e}' stream ${r} received:`,F),T.a_(F)}}),k(l,Tp.STAT_EVENT,R=>{R.stat===Nc.PROXY?V(Tt,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===Nc.NOPROXY&&V(Tt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function eO(){return typeof window<"u"?window:null}function Kc(){return typeof document<"u"?document:null}function iu(i){return new fm(i,!0)}var Md=class{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&V("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var aE="PersistentStream",Vd=class{constructor(e,t,n,r,s,o,l,c){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Md(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return _(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return _(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.b_===t&&this.W_(n,r)},n=>{e(()=>{let r=new j(O.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(r)})})}W_(e,t){let n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{n(()=>this.G_(r))}),this.stream.onMessage(r=>{n(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(()=>_(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(aE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(aE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eg=class extends Vd{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=O1(this.serializer,e),n=(function(s){if(!("targetChange"in s))return J.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Mt(o.readTime):J.min()})(e);return this.listener.J_(t,n)}H_(e){let t={};t.database=gm(this.serializer),t.addTarget=(function(s,o){let l,c=o.target;if(l=cd(c)?{documents:gT(s,c)}:{query:_T(s,c).Vt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=uT(s,o.resumeToken);let d=pm(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){l.readTime=Ks(s,o.snapshotVersion.toTimestamp());let d=pm(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l})(this.serializer,e);let n=V1(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){let t={};t.database=gm(this.serializer),t.removeTarget=e,this.k_(t)}},tg=class extends Vd{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Y(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Y(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=M1(e.writeResults,e.commitTime),n=Mt(e.commitTime);return this.listener.ta(n,t)}na(){let e={};e.database=gm(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(n=>_d(this.serializer,n))};this.k_(t)}};var ng=class{},ig=class extends ng{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,mm(t,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(O.UNKNOWN,s.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Jo(e,mm(t,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(O.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},rg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pt(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Br="RemoteStore",sg=class{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{n.enqueueAndForget(()=>_(this,null,function*(){Ur(this)&&(V(Br,"Restarting streams for network reachability change."),yield(function(c){return _(this,null,function*(){let d=te(c);d.Ia.add(4),yield Ka(d),d.Aa.set("Unknown"),d.Ia.delete(4),yield ru(d)})})(this))}))}),this.Aa=new rg(n,r)}};function ru(i){return _(this,null,function*(){if(Ur(i))for(let e of i.da)yield e(!0)})}function Ka(i){return _(this,null,function*(){for(let e of i.da)yield e(!1)})}function VT(i,e){let t=te(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),qg(t)?Wg(t):no(t).x_()&&$g(t,e))}function jg(i,e){let t=te(i),n=no(t);t.Ta.delete(e),n.x_()&&NT(t,e),t.Ta.size===0&&(n.x_()?n.B_():Ur(t)&&t.Aa.set("Unknown"))}function $g(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}no(i).H_(e)}function NT(i,e){i.Ra.$e(e),no(i).Y_(e)}function Wg(i){i.Ra=new hm({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),no(i).start(),i.Aa.aa()}function qg(i){return Ur(i)&&!no(i).M_()&&i.Ta.size>0}function Ur(i){return te(i).Ia.size===0}function FT(i){i.Ra=void 0}function tO(i){return _(this,null,function*(){i.Aa.set("Online")})}function nO(i){return _(this,null,function*(){i.Ta.forEach((e,t)=>{$g(i,e)})})}function iO(i,e){return _(this,null,function*(){FT(i),qg(i)?(i.Aa.la(e),Wg(i)):i.Aa.set("Unknown")})}function rO(i,e,t){return _(this,null,function*(){if(i.Aa.set("Online"),e instanceof pd&&e.state===2&&e.cause)try{yield(function(r,s){return _(this,null,function*(){let o=s.cause;for(let l of s.targetIds)r.Ta.has(l)&&(yield r.remoteSyncer.rejectListen(l,o),r.Ta.delete(l),r.Ra.removeTarget(l))})})(i,e)}catch(n){V(Br,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield Nd(i,n)}else if(e instanceof Rs?i.Ra.Ye(e):e instanceof fd?i.Ra.it(e):i.Ra.et(e),!t.isEqual(J.min()))try{let n=yield MT(i.localStore);t.compareTo(n)>=0&&(yield(function(s,o){let l=s.Ra.Pt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ta.get(d);h&&s.Ta.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{let h=s.Ta.get(c);if(!h)return;s.Ta.set(c,h.withResumeToken(tt.EMPTY_BYTE_STRING,h.snapshotVersion)),NT(s,c);let p=new Xs(h.target,c,d,h.sequenceNumber);$g(s,p)}),s.remoteSyncer.applyRemoteEvent(l)})(i,t))}catch(n){V(Br,"Failed to raise snapshot:",n),yield Nd(i,n)}})}function Nd(i,e,t){return _(this,null,function*(){if(!qi(e))throw e;i.Ia.add(1),yield Ka(i),i.Aa.set("Offline"),t||(t=()=>MT(i.localStore)),i.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){V(Br,"Retrying IndexedDB access"),yield t(),i.Ia.delete(1),yield ru(i)}))})}function LT(i,e){return e().catch(t=>Nd(i,t,e))}function Xa(i){return _(this,null,function*(){let e=te(i),t=$i(e),n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:kr;for(;sO(e);)try{let r=yield X1(e.localStore,n);if(r===null){e.Pa.length===0&&t.B_();break}n=r.batchId,oO(e,r)}catch(r){yield Nd(e,r)}BT(e)&&zT(e)})}function sO(i){return Ur(i)&&i.Pa.length<10}function oO(i,e){i.Pa.push(e);let t=$i(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function BT(i){return Ur(i)&&!$i(i).M_()&&i.Pa.length>0}function zT(i){$i(i).start()}function aO(i){return _(this,null,function*(){$i(i).na()})}function lO(i){return _(this,null,function*(){let e=$i(i);for(let t of i.Pa)e.X_(t.mutations)})}function cO(i,e,t){return _(this,null,function*(){let n=i.Pa.shift(),r=cm.from(n,e,t);yield LT(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),yield Xa(i)})}function dO(i,e){return _(this,null,function*(){e&&$i(i).Z_&&(yield(function(n,r){return _(this,null,function*(){if((function(o){return D1(o)&&o!==O.ABORTED})(r.code)){let s=n.Pa.shift();$i(n).N_(),yield LT(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Xa(n)}})})(i,e)),BT(i)&&zT(i)})}function lE(i,e){return _(this,null,function*(){let t=te(i);t.asyncQueue.verifyOperationInProgress(),V(Br,"RemoteStore received new credentials");let n=Ur(t);t.Ia.add(3),yield Ka(t),n&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ru(t)})}function uO(i,e){return _(this,null,function*(){let t=te(i);e?(t.Ia.delete(2),yield ru(t)):e||(t.Ia.add(2),yield Ka(t),t.Aa.set("Unknown"))})}function no(i){return i.Va||(i.Va=(function(t,n,r){let s=te(t);return s.ia(),new eg(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(i.datastore,i.asyncQueue,{Zo:tO.bind(null,i),e_:nO.bind(null,i),n_:iO.bind(null,i),J_:rO.bind(null,i)}),i.da.push(e=>_(null,null,function*(){e?(i.Va.N_(),qg(i)?Wg(i):i.Aa.set("Unknown")):(yield i.Va.stop(),FT(i))}))),i.Va}function $i(i){return i.ma||(i.ma=(function(t,n,r){let s=te(t);return s.ia(),new tg(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:aO.bind(null,i),n_:dO.bind(null,i),ea:lO.bind(null,i),ta:cO.bind(null,i)}),i.da.push(e=>_(null,null,function*(){e?(i.ma.N_(),yield Xa(i)):(yield i.ma.stop(),i.Pa.length>0&&(V(Br,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}var og=class i{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){let o=Date.now()+n,l=new i(e,t,o,r,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gg(i,e){if(Pt("AsyncQueue",`${e}: ${i}`),qi(i))return new j(O.UNAVAILABLE,`${e}: ${i}`);throw i}var Fd=class i{static emptySet(e){return new i(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||$.comparator(t.key,n.key):(t,n)=>$.comparator(t.key,n.key),this.keyedMap=va(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let n=new i;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}};var Ld=class{constructor(){this.fa=new Fe($.comparator)}track(e){let t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):q(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}},Js=class i{constructor(e,t,n,r,s,o,l,c,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,r,s){let o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new i(e,t,Fd.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}};var ag=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},lg=class{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,n){let r=te(t),s=r.queries;r.queries=cE(),s.forEach((o,l)=>{for(let c of l.wa)c.onError(n)})})(this,new j(O.ABORTED,"Firestore shutting down"))}};function cE(){return new mn(i=>JE(i),nu)}function hO(i,e){return _(this,null,function*(){let t=te(i),n=3,r=e.query,s=t.queries.get(r);s?!s.Sa()&&e.ba()&&(n=2):(s=new ag,n=e.ba()?0:1);try{switch(n){case 0:s.ya=yield t.onListen(r,!0);break;case 1:s.ya=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let l=Gg(o,`Initialization of query '${Cs(e.query)}' failed`);return void e.onError(l)}t.queries.set(r,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Yg(t)})}function fO(i,e){return _(this,null,function*(){let t=te(i),n=e.query,r=3,s=t.queries.get(n);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?r=e.ba()?0:1:!s.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}})}function pO(i,e){let t=te(i),n=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let l of o.wa)l.Ca(r)&&(n=!0);o.ya=r}}n&&Yg(t)}function mO(i,e,t){let n=te(i),r=n.queries.get(e);if(r)for(let s of r.wa)s.onError(t);n.queries.delete(e)}function Yg(i){i.Da.forEach(e=>{e.next()})}var cg,dE;(dE=cg||(cg={})).Fa="default",dE.Cache="cache";var dg=class{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){let n=[];for(let r of e.docChanges)r.type!==3&&n.push(r);e=new Js(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let n=t!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cg.Cache}};var Bd=class{constructor(e){this.key=e}},zd=class{constructor(e){this.key=e}},ug=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=re(),this.mutatedKeys=re(),this.Xa=ZE(e),this.eu=new Fd(this.Xa)}get tu(){return this.Ha}nu(e,t){let n=t?t.ru:new Ld,r=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=r,l=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{let g=r.get(h),E=Ya(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),R=!1;g&&E?g.data.isEqual(E.data)?T!==k&&(n.track({type:3,doc:E}),R=!0):this.iu(g,E)||(n.track({type:2,doc:E}),R=!0,(c&&this.Xa(E,c)>0||d&&this.Xa(E,d)<0)&&(l=!0)):!g&&E?(n.track({type:0,doc:E}),R=!0):g&&!E&&(n.track({type:1,doc:g}),R=!0,(c||d)&&(l=!0)),R&&(E?(o=o.add(E),s=k?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{eu:o,ru:n,Ds:l,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(E,T){let k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return k(E)-k(T)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(n),r=r!=null&&r;let l=t&&!r?this.ou():[],c=this.Za.size===0&&this.current&&!r?1:0,d=c!==this.Ya;return this.Ya=c,o.length!==0||d?{snapshot:new Js(this.query,e.eu,s,o,e.mutatedKeys,c===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ld,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=re(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});let t=[];return e.forEach(n=>{this.Za.has(n)||t.push(new zd(n))}),this.Za.forEach(n=>{e.has(n)||t.push(new Bd(n))}),t}uu(e){this.Ha=e.qs,this.Za=re();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Js.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Kg="SyncEngine",hg=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},fg=class{constructor(e){this.key=e,this.lu=!1}},pg=class{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new mn(l=>JE(l),nu),this.Tu=new Map,this.Iu=new Set,this.du=new Fe($.comparator),this.Eu=new Map,this.Au=new Ha,this.Ru={},this.Vu=new Map,this.mu=Qs.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function gO(i,e,t=!0){return _(this,null,function*(){let n=qT(i),r,s=n.Pu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.cu()):r=yield UT(n,e,t,!0),r})}function _O(i,e){return _(this,null,function*(){let t=qT(i);yield UT(t,e,!0,!1)})}function UT(i,e,t,n){return _(this,null,function*(){let r=yield Q1(i.localStore,Qt(e)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,t),l;return n&&(l=yield vO(i,e,s,o==="current",r.resumeToken)),i.isPrimaryClient&&t&&VT(i.remoteStore,r),l})}function vO(i,e,t,n,r){return _(this,null,function*(){i.gu=(p,g,E)=>(function(k,R,B,F){return _(this,null,function*(){let M=R.view.nu(B);M.Ds&&(M=yield sE(k.localStore,R.query,!1).then(({documents:I})=>R.view.nu(I,M)));let H=F&&F.targetChanges.get(R.targetId),W=F&&F.targetMismatches.get(R.targetId)!=null,G=R.view.applyChanges(M,k.isPrimaryClient,H,W);return hE(k,R.targetId,G._u),G.snapshot})})(i,p,g,E);let s=yield sE(i.localStore,e,!0),o=new ug(e,s.qs),l=o.nu(s.documents),c=za.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",r),d=o.applyChanges(l,i.isPrimaryClient,c);hE(i,t,d._u);let h=new hg(e,t,o);return i.Pu.set(e,h),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),d.snapshot})}function yO(i,e,t){return _(this,null,function*(){let n=te(i),r=n.Pu.get(e),s=n.Tu.get(r.targetId);if(s.length>1)return n.Tu.set(r.targetId,s.filter(o=>!nu(o,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ym(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),t&&jg(n.remoteStore,r.targetId),mg(n,r.targetId)}).catch(zr))):(mg(n,r.targetId),yield Ym(n.localStore,r.targetId,!0))})}function wO(i,e){return _(this,null,function*(){let t=te(i),n=t.Pu.get(e),r=t.Tu.get(n.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),jg(t.remoteStore,n.targetId))})}function bO(i,e,t){return _(this,null,function*(){let n=GT(i);try{let r=yield(function(o,l){let c=te(o),d=Re.now(),h=l.reduce((E,T)=>E.add(T.key),re()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=Wt(),k=re();return c.Os.getEntries(E,h).next(R=>{T=R,T.forEach((B,F)=>{F.isValidDocument()||(k=k.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,T)).next(R=>{p=R;let B=[];for(let F of l){let M=I1(F,p.get(F.key).overlayedDocument);M!=null&&B.push(new gn(F.key,M,qE(M.value.mapValue),Bt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,B,l)}).next(R=>{g=R;let B=R.applyToLocalDocumentSet(p,k);return c.documentOverlayCache.saveOverlays(E,R.batchId,B)})}).then(()=>({batchId:g.batchId,changes:tT(p)}))})(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new Fe(ee)),d=d.insert(l,c),o.Ru[o.currentUser.toKey()]=d})(n,r.batchId,t),yield Qa(n,r.changes),yield Xa(n.remoteStore)}catch(r){let s=Gg(r,"Failed to persist write");t.reject(s)}})}function HT(i,e){return _(this,null,function*(){let t=te(i);try{let n=yield Y1(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Eu.get(s);o&&(Y(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.lu=!0:r.modifiedDocuments.size>0?Y(o.lu,14607):r.removedDocuments.size>0&&(Y(o.lu,42227),o.lu=!1))}),yield Qa(t,n,e)}catch(n){yield zr(n)}})}function uE(i,e,t){let n=te(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){let r=[];n.Pu.forEach((s,o)=>{let l=o.view.va(e);l.snapshot&&r.push(l.snapshot)}),(function(o,l){let c=te(o);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(let g of p.wa)g.va(l)&&(d=!0)}),d&&Yg(c)})(n.eventManager,e),r.length&&n.hu.J_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function EO(i,e,t){return _(this,null,function*(){let n=te(i);n.sharedClientState.updateQueryState(e,"rejected",t);let r=n.Eu.get(e),s=r&&r.key;if(s){let o=new Fe($.comparator);o=o.insert(s,ft.newNoDocument(s,J.min()));let l=re().add(s),c=new hd(J.min(),new Map,new Fe(ee),o,l);yield HT(n,c),n.du=n.du.remove(s),n.Eu.delete(e),Xg(n)}else yield Ym(n.localStore,e,!1).then(()=>mg(n,e,t)).catch(zr)})}function TO(i,e){return _(this,null,function*(){let t=te(i),n=e.batch.batchId;try{let r=yield G1(t.localStore,e);$T(t,n,null),jT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),yield Qa(t,r)}catch(r){yield zr(r)}})}function CO(i,e,t){return _(this,null,function*(){let n=te(i);try{let r=yield(function(o,l){let c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Y(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(n.localStore,e);$T(n,e,t),jT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),yield Qa(n,r)}catch(r){yield zr(r)}})}function jT(i,e){(i.Vu.get(e)||[]).forEach(t=>{t.resolve()}),i.Vu.delete(e)}function $T(i,e,t){let n=te(i),r=n.Ru[n.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),n.Ru[n.currentUser.toKey()]=r}}function mg(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(let n of i.Tu.get(e))i.Pu.delete(n),t&&i.hu.pu(n,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach(n=>{i.Au.containsKey(n)||WT(i,n)})}function WT(i,e){i.Iu.delete(e.path.canonicalString());let t=i.du.get(e);t!==null&&(jg(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),Xg(i))}function hE(i,e,t){for(let n of t)n instanceof Bd?(i.Au.addReference(n.key,e),IO(i,n)):n instanceof zd?(V(Kg,"Document no longer in limbo: "+n.key),i.Au.removeReference(n.key,e),i.Au.containsKey(n.key)||WT(i,n.key)):q(19791,{yu:n})}function IO(i,e){let t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Iu.has(n)||(V(Kg,"New document in limbo: "+t),i.Iu.add(n),Xg(i))}function Xg(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){let e=i.Iu.values().next().value;i.Iu.delete(e);let t=new $(Ee.fromString(e)),n=i.mu.next();i.Eu.set(n,new fg(t)),i.du=i.du.insert(t,n),VT(i.remoteStore,new Xs(Qt(tu(t.path)),n,"TargetPurposeLimboResolution",fn.ue))}}function Qa(i,e,t){return _(this,null,function*(){let n=te(i),r=[],s=[],o=[];n.Pu.isEmpty()||(n.Pu.forEach((l,c)=>{o.push(n.gu(c,e,t).then(d=>{var h;if((d||t)&&n.isPrimaryClient){let p=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){r.push(d);let p=Wm.Es(c.targetId,d);s.push(p)}}))}),yield Promise.all(o),n.hu.J_(r),yield(function(c,d){return _(this,null,function*(){let h=te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(d,g=>x.forEach(g.Is,E=>h.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>x.forEach(g.ds,E=>h.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!qi(p))throw p;V(Hg,"Failed to update sequence numbers: "+p)}for(let p of d){let g=p.targetId;if(!p.fromCache){let E=h.Fs.get(g),T=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(g,k)}}})})(n.localStore,s))})}function DO(i,e){return _(this,null,function*(){let t=te(i);if(!t.currentUser.isEqual(e)){V(Kg,"User change. New user:",e.toKey());let n=yield OT(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(l=>{l.forEach(c=>{c.reject(new j(O.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield Qa(t,n.Bs)}})}function SO(i,e){let t=te(i),n=t.Eu.get(e);if(n&&n.lu)return re().add(n.key);{let r=re(),s=t.Tu.get(e);if(!s)return r;for(let o of s){let l=t.Pu.get(o);r=r.unionWith(l.view.tu)}return r}}function qT(i){let e=te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EO.bind(null,e),e.hu.J_=pO.bind(null,e.eventManager),e.hu.pu=mO.bind(null,e.eventManager),e}function GT(i){let e=te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CO.bind(null,e),e}var Qg=(()=>{class i{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=iu(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,n){return null}Fu(t,n){return null}vu(t){return PT(this.persistence,new Rd,t.initialUser,this.serializer)}Du(t){return new ja(Ad.Vi,this.serializer)}bu(t){return new Pd}terminate(){return _(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return i.provider={build:()=>new i},i})(),gg=class extends Qg{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Y(this.persistence.referenceDelegate instanceof kd,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Id(n,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new ja(n=>kd.Vi(n,t),this.serializer)}},_g=class i extends Qg{constructor(e,t,n){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){yield Bn(i.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield GT(this.Mu.syncEngine),yield Xa(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return PT(this.persistence,new Rd,e.initialUser,this.serializer)}Cu(e,t){let n=this.persistence.referenceDelegate.garbageCollector;return new Id(n,e.asyncQueue,t)}Fu(e,t){let n=new jp(t,this.persistence);return new Hp(e.asyncQueue,n)}Du(e){let t=W1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new $m(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,eO(),Kc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Pd}};var YT=(()=>{class i{initialize(t,n){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DO.bind(null,this.syncEngine),yield uO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new lg})()}createDatastore(t){let n=iu(t.databaseInfo.databaseId),r=(function(o){return new Zm(o)})(t.databaseInfo);return(function(o,l,c,d){return new ig(o,l,c,d)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,o,l,c){return new sg(r,s,o,l,c)})(this.localStore,this.datastore,t.asyncQueue,n=>uE(this.syncEngine,n,0),(function(){return Od.C()?new Od:new Km})())}createSyncEngine(t,n){return(function(s,o,l,c,d,h,p){let g=new pg(s,o,l,c,d,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var t,n;yield(function(s){return _(this,null,function*(){let o=te(s);V(Br,"RemoteStore shutting down."),o.Ia.add(5),yield Ka(o),o.Ea.shutdown(),o.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}}return i.provider={build:()=>new i},i})();var vg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Wi="FirestoreClient",yg=class{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ze.UNAUTHENTICATED,this.clientId=Sa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,o=>_(this,null,function*(){V(Wi,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,o=>(V(Wi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Gg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}};function xp(i,e){return _(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),V(Wi,"Initializing OfflineComponentProvider");let t=i.configuration;yield e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(r=>_(null,null,function*(){n.isEqual(r)||(yield OT(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener(()=>{Mn("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Mn("Terminating Firestore due to IndexedDb database deletion failed",r)})}),i._offlineComponents=e})}function fE(i,e){return _(this,null,function*(){i.asyncQueue.verifyOperationInProgress();let t=yield AO(i);V(Wi,"Initializing OnlineComponentProvider"),yield e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>lE(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>lE(e.remoteStore,r)),i._onlineComponents=e})}function AO(i){return _(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){V(Wi,"Using user provided OfflineComponentProvider");try{yield xp(i,i._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===O.FAILED_PRECONDITION||r.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Mn("Error using user provided cache. Falling back to memory cache: "+t),yield xp(i,new Qg)}}else V(Wi,"Using default OfflineComponentProvider"),yield xp(i,new gg(void 0));return i._offlineComponents})}function KT(i){return _(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(V(Wi,"Using user provided OnlineComponentProvider"),yield fE(i,i._uninitializedComponentsProvider._online)):(V(Wi,"Using default OnlineComponentProvider"),yield fE(i,new YT))),i._onlineComponents})}function kO(i){return KT(i).then(e=>e.syncEngine)}function pE(i){return _(this,null,function*(){let e=yield KT(i),t=e.eventManager;return t.onListen=gO.bind(null,e.syncEngine),t.onUnlisten=yO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_O.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wO.bind(null,e.syncEngine),t})}function XT(i){let e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}var mE=new Map;var QT="firestore.googleapis.com",gE=!0,Ud=class{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new j(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QT,this.ssl=gE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<j1)throw new j(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zs=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ud({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ud(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Pp;switch(n.type){case"firstParty":return new Np(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new j(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let n=mE.get(t);n&&(V("ComponentProvider","Removing Datastore"),mE.delete(t),n.terminate())})(this),Promise.resolve()}};function JT(i,e,t,n={}){var r;i=pn(i,Zs);let s=vi(e),o=i._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:i._getEmulatorOptions()}),c=`${e}:${t}`;s&&(sc(`https://${c}`),oc("Firestore",!0)),o.host!==QT&&o.host!==c&&Mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:n});if(!Tn(d,l)&&(i._setSettings(d),n.mockUserToken)){let h,p;if(typeof n.mockUserToken=="string")h=n.mockUserToken,p=Ze.MOCK_USER;else{h=Sw(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new j(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ze(g)}i._authCredentials=new Op(new Xc(h,p))}}var Hd=class i{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new i(this.firestore,e,this._query)}},pt=class i{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new i(this.firestore,e,this._key)}toJSON(){return{type:i._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Wa(t,i._jsonSchema))return new i(e,n||null,new $(Ee.fromString(t.referencePath)))}};pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Ye("string",pt._jsonSchemaVersion),referencePath:Ye("string")};var Mi=class i extends Hd{constructor(e,t,n){super(e,t,tu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new $(e))}withConverter(e){return new i(this.firestore,e,this._path)}};function ZT(i,e,...t){if(i=ke(i),TE("collection","path",e),i instanceof Zs){let n=Ee.fromString(e,...t);return u0(n),new Mi(i,null,n)}{if(!(i instanceof pt||i instanceof Mi))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(Ee.fromString(e,...t));return u0(n),new Mi(i.firestore,null,n)}}function Jg(i,e,...t){if(i=ke(i),arguments.length===1&&(e=Sa.newId()),TE("doc","path",e),i instanceof Zs){let n=Ee.fromString(e,...t);return d0(n),new pt(i,null,new $(n))}{if(!(i instanceof pt||i instanceof Mi))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(Ee.fromString(e,...t));return d0(n),new pt(i.firestore,i instanceof Mi?i.converter:null,new $(n))}}var _E="AsyncQueue",jd=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Md(this,"async_queue_retry"),this.oc=()=>{let n=Kc();n&&V(_E,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;let t=Kc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Kc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Pn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return _(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qi(e))throw e;V(_E,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,Pt("INTERNAL UNHANDLED ERROR: ",vE(n)),n}).then(n=>(this.nc=!1,n))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let r=og.createAndSchedule(this,e,t,n,s=>this.lc(s));return this.ec.push(r),r}ac(){this.tc&&q(47125,{hc:vE(this.tc)})}verifyOperationInProgress(){}Pc(){return _(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function vE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function yE(i){return(function(t,n){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of n)if(s in r&&typeof r[s]=="function")return!0;return!1})(i,["next","error","complete"])}var Nn=class extends Zs{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new jd,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jd(e),this._firestoreClient=void 0,yield e}})}};function eC(i,e){let t=typeof i=="object"?i:In(),n=typeof i=="string"?i:e||od,r=cn(t,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=Dw("firestore");s&&JT(r,...s)}return r}function tC(i){if(i._terminated)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||nC(i),i._firestoreClient}function nC(i){var e,t,n;let r=i._freezeSettings(),s=(function(l,c,d,h){return new Gp(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,r);i._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),i._firestoreClient=new yg(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(l){let c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(i._componentsProvider))}function iC(i,e){Mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=i._freezeSettings();return RO(i,YT.provider,{build:n=>new _g(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function RO(i,e,t){if((i=pn(i,Nn))._firestoreClient||i._terminated)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new j(O.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},nC(i)}var Vi=class i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new i(tt.fromBase64String(e))}catch(t){throw new j(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new i(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:i._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wa(e,i._jsonSchema))return i.fromBase64String(e.bytes)}};Vi._jsonSchemaVersion="firestore/bytes/1.0",Vi._jsonSchema={type:Ye("string",Vi._jsonSchemaVersion),bytes:Ye("string")};var eo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $a=class{constructor(e){this._methodName=e}};var Ni=class i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:i._jsonSchemaVersion}}static fromJSON(e){if(Wa(e,i._jsonSchema))return new i(e.latitude,e.longitude)}};Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:Ye("string",Ni._jsonSchemaVersion),latitude:Ye("number"),longitude:Ye("number")};var Fi=class i{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(n,r){if(n.length!==r.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wa(e,i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new i(e.vectorValues);throw new j(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:Ye("string",Fi._jsonSchemaVersion),vectorValues:Ye("object")};var xO=/^__.*__$/,wg=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new gn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ji(e,this.data,t,this.fieldTransforms)}},$d=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new gn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function rC(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:i})}}var bg=class i{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;let n=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return qd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(rC(this.Ec)&&xO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Eg=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||iu(e)}Dc(e,t,n,r=!1){return new bg({Ec:e,methodName:t,bc:n,path:et.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zg(i){let e=i._freezeSettings(),t=iu(i._databaseId);return new Eg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function sC(i,e,t,n,r,s={}){let o=i.Dc(s.merge||s.mergeFields?2:0,e,t,r);e_("Data must be an object, but it was:",o,n);let l=oC(n,o),c,d;if(s.merge)c=new $t(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let g=Tg(e,p,t);if(!o.contains(g))throw new j(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);lC(h,g)||h.push(g)}c=new $t(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new wg(new Ot(l),c,d)}var Wd=class i extends $a{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof i}};function PO(i,e,t,n){let r=i.Dc(1,e,t);e_("Data must be an object, but it was:",r,n);let s=[],o=Ot.empty();Gi(n,(c,d)=>{let h=t_(e,c,t);d=ke(d);let p=r.gc(h);if(d instanceof Wd)s.push(h);else{let g=su(d,p);g!=null&&(s.push(h),o.set(h,g))}});let l=new $t(s);return new $d(o,l,r.fieldTransforms)}function OO(i,e,t,n,r,s){let o=i.Dc(1,e,t),l=[Tg(e,n,t)],c=[r];if(s.length%2!=0)throw new j(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Tg(e,s[g])),c.push(s[g+1]);let d=[],h=Ot.empty();for(let g=l.length-1;g>=0;--g)if(!lC(d,l[g])){let E=l[g],T=c[g];T=ke(T);let k=o.gc(E);if(T instanceof Wd)d.push(E);else{let R=su(T,k);R!=null&&(d.push(E),h.set(E,R))}}let p=new $t(d);return new $d(h,p,o.fieldTransforms)}function su(i,e){if(aC(i=ke(i)))return e_("Unsupported field value:",e,i),oC(i,e);if(i instanceof $a)return(function(n,r){if(!rC(r.Ec))throw r.wc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${n._methodName}() is not currently supported inside arrays`);let s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(n,r){let s=[],o=0;for(let l of n){let c=su(l,r.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(i,e)}return(function(n,r){if((n=ke(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return w1(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let s=Re.fromDate(n);return{timestampValue:Ks(r.serializer,s)}}if(n instanceof Re){let s=new Re(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ks(r.serializer,s)}}if(n instanceof Ni)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vi)return{bytesValue:uT(r.serializer,n._byteString)};if(n instanceof pt){let s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zg(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Fi)return(function(o,l){return{mapValue:{fields:{[Vg]:{stringValue:Ng},[Us]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Bg(l.serializer,d)})}}}}}})(n,r);throw r.wc(`Unsupported field value: ${Sg(n)}`)})(i,e)}function oC(i,e){let t={};return LE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(i,(n,r)=>{let s=su(r,e.Vc(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function aC(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Re||i instanceof Ni||i instanceof Vi||i instanceof pt||i instanceof $a||i instanceof Fi)}function e_(i,e,t){if(!aC(t)||!CE(t)){let n=Sg(t);throw n==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+n)}}function Tg(i,e,t){if((e=ke(e))instanceof eo)return e._internalPath;if(typeof e=="string")return t_(i,e);throw qd("Field path arguments must be of type string or ",i,!1,void 0,t)}var MO=new RegExp("[~\\*/\\[\\]]");function t_(i,e,t){if(e.search(MO)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new eo(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function qd(i,e,t,n,r){let s=n&&!n.isEmpty(),o=r!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${r}`),c+=")"),new j(O.INVALID_ARGUMENT,l+i+c)}function lC(i,e){return i.some(t=>t.isEqual(e))}var Gd=class{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(cC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Cg=class extends Gd{data(){return super.data()}};function cC(i,e){return typeof e=="string"?t_(i,e):e instanceof eo?e._internalPath:e._delegate._internalPath}function VO(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new j(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ig=class{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let n={};return Gi(e,(r,s)=>{n[r]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,r;let s=(r=(n=(t=e.fields)===null||t===void 0?void 0:t[Us].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>Ne(o.doubleValue));return new Fi(s)}convertGeoPoint(e){return new Ni(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":let n=Zd(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Va(e));default:return null}}convertTimestamp(e){let t=ti(e);return new Re(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Ee.fromString(e);Y(bT(n),9688,{name:e});let r=new zs(n.get(1),n.get(3)),s=new $(n.popFirst(5));return r.isEqual(t)||Pt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function dC(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}var Sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pr=class i extends Gd{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(cC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=i._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pr._jsonSchema={type:Ye("string",Pr._jsonSchemaVersion),bundleSource:Ye("string","DocumentSnapshot"),bundleName:Ye("string"),bundle:Ye("string")};var xs=class extends Pr{data(e={}){return super.data(e)}},Ps=class i{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Sr(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new xs(this._firestore,this._userDataWriter,n.key,n,new Sr(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{let c=new xs(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{let c=new xs(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Sr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:NO(l.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=i._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],n=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function NO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:i})}}Ps._jsonSchemaVersion="firestore/querySnapshot/1.0",Ps._jsonSchema={type:Ye("string",Ps._jsonSchemaVersion),bundleSource:Ye("string","QuerySnapshot"),bundleName:Ye("string"),bundle:Ye("string")};var Yd=class extends Ig{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}};function uC(i,e,t){i=pn(i,pt);let n=pn(i.firestore,Nn),r=dC(i.converter,e,t);return ou(n,[sC(Zg(n),"setDoc",i._key,r,i.converter!==null,t).toMutation(i._key,Bt.none())])}function hC(i,e,t,...n){i=pn(i,pt);let r=pn(i.firestore,Nn),s=Zg(r),o;return o=typeof(e=ke(e))=="string"||e instanceof eo?OO(s,"updateDoc",i._key,e,t,n):PO(s,"updateDoc",i._key,e),ou(r,[o.toMutation(i._key,Bt.exists(!0))])}function fC(i){return ou(pn(i.firestore,Nn),[new Ys(i._key,Bt.none())])}function pC(i,e){let t=pn(i.firestore,Nn),n=Jg(i),r=dC(i.converter,e);return ou(t,[sC(Zg(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,Bt.exists(!1))]).then(()=>n)}function n_(i,...e){var t,n,r;i=ke(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||yE(e[o])||(s=e[o++]);let l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(yE(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let c,d,h;if(i instanceof pt)d=pn(i.firestore,Nn),h=tu(i._key.path),c={next:p=>{e[o]&&e[o](FO(d,i,p))},error:e[o+1],complete:e[o+2]};else{let p=pn(i,Hd);d=pn(p.firestore,Nn),h=p._query;let g=new Yd(d);c={next:E=>{e[o]&&e[o](new Ps(d,g,p,E))},error:e[o+1],complete:e[o+2]},VO(i._query)}return(function(g,E,T,k){let R=new vg(k),B=new dg(E,R,T);return g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return hO(yield pE(g),B)})),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return fO(yield pE(g),B)}))}})(tC(d),h,l,c)}function ou(i,e){return(function(n,r){let s=new Pn;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return bO(yield kO(n),r,s)})),s.promise})(tC(i),e)}function FO(i,e,t){let n=t.docs.get(e._key),r=new Yd(i);return new Pr(i,r,e._key,n,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){to=r})(bi),ht(new He("firestore",(n,{instanceIdentifier:r,options:s})=>{let o=n.getProvider("app").getImmediate(),l=new Nn(new Mp(n.getProvider("auth-internal")),new Fp(o,n.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new j(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(d.options.projectId,h)})(o,r),o);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ve(o0,a0,e),ve(o0,a0,"esm2017")})();var au=function(){return au=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},au.apply(this,arguments)};var zO={includeMetadataChanges:!1};function i_(i,e){return e===void 0&&(e=zO),new At(function(t){var n=n_(i,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:n}})}function mC(i){return i_(i,{includeMetadataChanges:!0})}function gC(i,e){return e===void 0&&(e={}),mC(i).pipe(Ke(function(t){return r_(t,e)}))}function r_(i,e){var t;e===void 0&&(e={});var n=i.data(e);return!i.exists()||typeof n!="object"||n===null||!e.idField?n:au(au({},n),(t={},t[e.idField]=i.id,t))}function _C(i){return i_(i,{includeMetadataChanges:!0}).pipe(Ke(function(e){return e.docs}))}function vC(i,e){return e===void 0&&(e={}),_C(i).pipe(Ke(function(t){return t.map(function(n){return r_(n,e)})}))}var Hr=class{constructor(e){return e}},yC="firestore",s_=class{constructor(){return Ei(yC)}};var o_=new pe("angularfire2.firestore-instances");function UO(i,e){let t=hr(yC,i,e);return t&&new Hr(t)}function HO(i){return(e,t)=>{let n=e.runOutsideAngular(()=>i(t));return new Hr(n)}}var jO={provide:s_,deps:[[new ot,o_]]},$O={provide:Hr,useFactory:UO,deps:[[new ot,o_],dn]};function qz(i,...e){return ve("angularfire",Dn.full,"fst"),ci([$O,jO,{provide:o_,useFactory:HO(i),multi:!0,deps:[ne,De,Sn,Yn,[new ot,ha],[new ot,ps],...e]}])}var Gz=Pe(vC,!0);var Yz=Pe(gC,!0);var Kz=Pe(pC,!0,2);var Xz=Pe(ZT,!0,2);var Qz=Pe(fC,!0,2);var a_=Pe(Jg,!0,2);var Jz=Pe(iC,!0);var Zz=Pe(eC,!0);var l_=Pe(uC,!0,2);var eU=Pe(hC,!0,2);var EC="@firebase/installations",h_="0.6.18";var TC=1e4,CC=`w:${h_}`,IC="FIS_v2",WO="https://firebaseinstallations.googleapis.com/v1",qO=3600*1e3,GO="installations",YO="Installations";var KO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$r=new xt(GO,YO,KO);function DC(i){return i instanceof Rt&&i.code.includes("request-failed")}function SC({projectId:i}){return`${WO}/projects/${i}/installations`}function AC(i){return{token:i.token,requestStatus:2,expiresIn:QO(i.expiresIn),creationTime:Date.now()}}function kC(i,e){return _(this,null,function*(){let n=(yield e.json()).error;return $r.create("request-failed",{requestName:i,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})}function RC({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function XO(i,{refreshToken:e}){let t=RC(i);return t.append("Authorization",JO(e)),t}function xC(i){return _(this,null,function*(){let e=yield i();return e.status>=500&&e.status<600?i():e})}function QO(i){return Number(i.replace("s","000"))}function JO(i){return`${IC} ${i}`}function ZO(n,r){return _(this,arguments,function*({appConfig:i,heartbeatServiceProvider:e},{fid:t}){let s=SC(i),o=RC(i),l=e.getImmediate({optional:!0});if(l){let p=yield l.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let c={fid:t,authVersion:IC,appId:i.appId,sdkVersion:CC},d={method:"POST",headers:o,body:JSON.stringify(c)},h=yield xC(()=>fetch(s,d));if(h.ok){let p=yield h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:AC(p.authToken)}}else throw yield kC("Create Installation",h)})}function PC(i){return new Promise(e=>{setTimeout(e,i)})}function eM(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}var tM=/^[cdef][\w-]{21}$/,u_="";function nM(){try{let i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;let t=iM(i);return tM.test(t)?t:u_}catch{return u_}}function iM(i){return eM(i).substr(0,22)}function cu(i){return`${i.appName}!${i.appId}`}var OC=new Map;function MC(i,e){let t=cu(i);VC(t,e),rM(t,e)}function VC(i,e){let t=OC.get(i);if(t)for(let n of t)n(e)}function rM(i,e){let t=sM();t&&t.postMessage({key:i,fid:e}),oM()}var jr=null;function sM(){return!jr&&"BroadcastChannel"in self&&(jr=new BroadcastChannel("[Firebase] FID Change"),jr.onmessage=i=>{VC(i.data.key,i.data.fid)}),jr}function oM(){OC.size===0&&jr&&(jr.close(),jr=null)}var aM="firebase-installations-database",lM=1,Wr="firebase-installations-store",c_=null;function f_(){return c_||(c_=dr(aM,lM,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Wr)}}})),c_}function lu(i,e){return _(this,null,function*(){let t=cu(i),r=(yield f_()).transaction(Wr,"readwrite"),s=r.objectStore(Wr),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&MC(i,e.fid),e})}function NC(i){return _(this,null,function*(){let e=cu(i),n=(yield f_()).transaction(Wr,"readwrite");yield n.objectStore(Wr).delete(e),yield n.done})}function du(i,e){return _(this,null,function*(){let t=cu(i),r=(yield f_()).transaction(Wr,"readwrite"),s=r.objectStore(Wr),o=yield s.get(t),l=e(o);return l===void 0?yield s.delete(t):yield s.put(l,t),yield r.done,l&&(!o||o.fid!==l.fid)&&MC(i,l.fid),l})}function p_(i){return _(this,null,function*(){let e,t=yield du(i.appConfig,n=>{let r=cM(n),s=dM(i,r);return e=s.registrationPromise,s.installationEntry});return t.fid===u_?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function cM(i){let e=i||{fid:nM(),registrationStatus:0};return FC(e)}function dM(i,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject($r.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=uM(i,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:hM(i)}:{installationEntry:e}}function uM(i,e){return _(this,null,function*(){try{let t=yield ZO(i,e);return lu(i.appConfig,t)}catch(t){throw DC(t)&&t.customData.serverCode===409?yield NC(i.appConfig):yield lu(i.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function hM(i){return _(this,null,function*(){let e=yield wC(i.appConfig);for(;e.registrationStatus===1;)yield PC(100),e=yield wC(i.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:n}=yield p_(i);return n||t}return e})}function wC(i){return du(i,e=>{if(!e)throw $r.create("installation-not-found");return FC(e)})}function FC(i){return fM(i)?{fid:i.fid,registrationStatus:0}:i}function fM(i){return i.registrationStatus===1&&i.registrationTime+TC<Date.now()}function pM(n,r){return _(this,arguments,function*({appConfig:i,heartbeatServiceProvider:e},t){let s=mM(i,t),o=XO(i,t),l=e.getImmediate({optional:!0});if(l){let p=yield l.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let c={installation:{sdkVersion:CC,appId:i.appId}},d={method:"POST",headers:o,body:JSON.stringify(c)},h=yield xC(()=>fetch(s,d));if(h.ok){let p=yield h.json();return AC(p)}else throw yield kC("Generate Auth Token",h)})}function mM(i,{fid:e}){return`${SC(i)}/${e}/authTokens:generate`}function m_(i,e=!1){return _(this,null,function*(){let t,n=yield du(i.appConfig,s=>{if(!LC(s))throw $r.create("not-registered");let o=s.authToken;if(!e&&vM(o))return s;if(o.requestStatus===1)return t=gM(i,e),s;{if(!navigator.onLine)throw $r.create("app-offline");let l=wM(s);return t=_M(i,l),l}});return t?yield t:n.authToken})}function gM(i,e){return _(this,null,function*(){let t=yield bC(i.appConfig);for(;t.authToken.requestStatus===1;)yield PC(100),t=yield bC(i.appConfig);let n=t.authToken;return n.requestStatus===0?m_(i,e):n})}function bC(i){return du(i,e=>{if(!LC(e))throw $r.create("not-registered");let t=e.authToken;return bM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function _M(i,e){return _(this,null,function*(){try{let t=yield pM(i,e),n=Object.assign(Object.assign({},e),{authToken:t});return yield lu(i.appConfig,n),t}catch(t){if(DC(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield NC(i.appConfig);else{let n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield lu(i.appConfig,n)}throw t}})}function LC(i){return i!==void 0&&i.registrationStatus===2}function vM(i){return i.requestStatus===2&&!yM(i)}function yM(i){let e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+qO}function wM(i){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function bM(i){return i.requestStatus===1&&i.requestTime+TC<Date.now()}function EM(i){return _(this,null,function*(){let e=i,{installationEntry:t,registrationPromise:n}=yield p_(e);return n?n.catch(console.error):m_(e).catch(console.error),t.fid})}function TM(i,e=!1){return _(this,null,function*(){let t=i;return yield CM(t),(yield m_(t,e)).token})}function CM(i){return _(this,null,function*(){let{registrationPromise:e}=yield p_(i);e&&(yield e)})}function IM(i){if(!i||!i.options)throw d_("App Configuration");if(!i.name)throw d_("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!i.options[t])throw d_(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function d_(i){return $r.create("missing-app-config-values",{valueName:i})}var BC="installations",DM="installations-internal",SM=i=>{let e=i.getProvider("app").getImmediate(),t=IM(e),n=cn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},AM=i=>{let e=i.getProvider("app").getImmediate(),t=cn(e,BC).getImmediate();return{getId:()=>EM(t),getToken:r=>TM(t,r)}};function kM(){ht(new He(BC,SM,"PUBLIC")),ht(new He(DM,AM,"PRIVATE"))}kM();ve(EC,h_);ve(EC,h_,"esm2017");var RM="/firebase-messaging-sw.js",xM="/firebase-cloud-messaging-push-scope",qC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",PM="https://fcmregistrations.googleapis.com/v1",GC="google.c.a.c_id",OM="google.c.a.c_l",MM="google.c.a.ts",VM="google.c.a.e",zC=1e4;var uu=(function(i){return i.PUSH_RECEIVED="push-received",i.NOTIFICATION_CLICKED="notification-clicked",i})(uu||{});function ii(i){let e=new Uint8Array(i);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function NM(i){let e="=".repeat((4-i.length%4)%4),t=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}var g_="fcm_token_details_db",FM=5,UC="fcm_token_object_Store";function LM(i){return _(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(g_))return null;let e=null;return(yield dr(g_,FM,{upgrade:(n,r,s,o)=>_(null,null,function*(){var l;if(r<2||!n.objectStoreNames.contains(UC))return;let c=o.objectStore(UC),d=yield c.index("fcmSenderId").get(i);if(yield c.clear(),!!d){if(r===2){let h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(l=h.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ii(h.vapidKey)}}}else if(r===3){let h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ii(h.auth),p256dh:ii(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ii(h.vapidKey)}}}else if(r===4){let h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ii(h.auth),p256dh:ii(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ii(h.vapidKey)}}}}})})).close(),yield dc(g_),yield dc("fcm_vapid_details_db"),yield dc("undefined"),BM(e)?e:null})}function BM(i){if(!i||!i.subscriptionOptions)return!1;let{subscriptionOptions:e}=i;return typeof i.createTime=="number"&&i.createTime>0&&typeof i.token=="string"&&i.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var zM="firebase-messaging-database",UM=1,qr="firebase-messaging-store",__=null;function w_(){return __||(__=dr(zM,UM,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(qr)}}})),__}function YC(i){return _(this,null,function*(){let e=E_(i),n=yield(yield w_()).transaction(qr).objectStore(qr).get(e);if(n)return n;{let r=yield LM(i.appConfig.senderId);if(r)return yield b_(i,r),r}})}function b_(i,e){return _(this,null,function*(){let t=E_(i),r=(yield w_()).transaction(qr,"readwrite");return yield r.objectStore(qr).put(e,t),yield r.done,e})}function HM(i){return _(this,null,function*(){let e=E_(i),n=(yield w_()).transaction(qr,"readwrite");yield n.objectStore(qr).delete(e),yield n.done})}function E_({appConfig:i}){return i.appId}var jM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},mt=new xt("messaging","Messaging",jM);function $M(i,e){return _(this,null,function*(){let t=yield C_(i),n=XC(e),r={method:"POST",headers:t,body:JSON.stringify(n)},s;try{s=yield(yield fetch(T_(i.appConfig),r)).json()}catch(o){throw mt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw mt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw mt.create("token-subscribe-no-token");return s.token})}function WM(i,e){return _(this,null,function*(){let t=yield C_(i),n=XC(e.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(n)},s;try{s=yield(yield fetch(`${T_(i.appConfig)}/${e.token}`,r)).json()}catch(o){throw mt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw mt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw mt.create("token-update-no-token");return s.token})}function KC(i,e){return _(this,null,function*(){let n={method:"DELETE",headers:yield C_(i)};try{let s=yield(yield fetch(`${T_(i.appConfig)}/${e}`,n)).json();if(s.error){let o=s.error.message;throw mt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw mt.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function T_({projectId:i}){return`${PM}/projects/${i}/registrations`}function C_(t){return _(this,arguments,function*({appConfig:i,installations:e}){let n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})}function XC({p256dh:i,auth:e,endpoint:t,vapidKey:n}){let r={web:{endpoint:t,auth:e,p256dh:i}};return n!==qC&&(r.web.applicationPubKey=n),r}var qM=10080*60*1e3;function GM(i){return _(this,null,function*(){let e=yield XM(i.swRegistration,i.vapidKey),t={vapidKey:i.vapidKey,swScope:i.swRegistration.scope,endpoint:e.endpoint,auth:ii(e.getKey("auth")),p256dh:ii(e.getKey("p256dh"))},n=yield YC(i.firebaseDependencies);if(n){if(QM(n.subscriptionOptions,t))return Date.now()>=n.createTime+qM?KM(i,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{yield KC(i.firebaseDependencies,n.token)}catch(r){console.warn(r)}return HC(i.firebaseDependencies,t)}else return HC(i.firebaseDependencies,t)})}function YM(i){return _(this,null,function*(){let e=yield YC(i.firebaseDependencies);e&&(yield KC(i.firebaseDependencies,e.token),yield HM(i.firebaseDependencies));let t=yield i.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0})}function KM(i,e){return _(this,null,function*(){try{let t=yield WM(i.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield b_(i.firebaseDependencies,n),t}catch(t){throw t}})}function HC(i,e){return _(this,null,function*(){let n={token:yield $M(i,e),createTime:Date.now(),subscriptionOptions:e};return yield b_(i,n),n.token})}function XM(i,e){return _(this,null,function*(){let t=yield i.pushManager.getSubscription();return t||i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:NM(e)})})}function QM(i,e){let t=e.vapidKey===i.vapidKey,n=e.endpoint===i.endpoint,r=e.auth===i.auth,s=e.p256dh===i.p256dh;return t&&n&&r&&s}function jC(i){let e={from:i.from,collapseKey:i.collapse_key,messageId:i.fcmMessageId};return JM(e,i),ZM(e,i),eV(e,i),e}function JM(i,e){if(!e.notification)return;i.notification={};let t=e.notification.title;t&&(i.notification.title=t);let n=e.notification.body;n&&(i.notification.body=n);let r=e.notification.image;r&&(i.notification.image=r);let s=e.notification.icon;s&&(i.notification.icon=s)}function ZM(i,e){e.data&&(i.data=e.data)}function eV(i,e){var t,n,r,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;i.fcmOptions={};let l=(r=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;l&&(i.fcmOptions.link=l);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(i.fcmOptions.analyticsLabel=c)}function tV(i){return typeof i=="object"&&!!i&&GC in i}nV("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function nV(i,e){let t=[];for(let n=0;n<i.length;n++)t.push(i.charAt(n)),n<e.length&&t.push(e.charAt(n));return t.join("")}function iV(i){if(!i||!i.options)throw v_("App Configuration Object");if(!i.name)throw v_("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=i;for(let n of e)if(!t[n])throw v_(n);return{appName:i.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function v_(i){return mt.create("missing-app-config-values",{valueName:i})}var y_=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=iV(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};function QC(i){return _(this,null,function*(){try{i.swRegistration=yield navigator.serviceWorker.register(RM,{scope:xM}),i.swRegistration.update().catch(()=>{}),yield rV(i.swRegistration)}catch(e){throw mt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function rV(i){return _(this,null,function*(){return new Promise((e,t)=>{let n=setTimeout(()=>t(new Error(`Service worker not registered after ${zC} ms`)),zC),r=i.installing||i.waiting;i.active?(clearTimeout(n),e()):r?r.onstatechange=s=>{var o;((o=s.target)===null||o===void 0?void 0:o.state)==="activated"&&(r.onstatechange=null,clearTimeout(n),e())}:(clearTimeout(n),t(new Error("No incoming service worker found.")))})})}function sV(i,e){return _(this,null,function*(){if(!e&&!i.swRegistration&&(yield QC(i)),!(!e&&i.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw mt.create("invalid-sw-registration");i.swRegistration=e}})}function oV(i,e){return _(this,null,function*(){e?i.vapidKey=e:i.vapidKey||(i.vapidKey=qC)})}function JC(i,e){return _(this,null,function*(){if(!navigator)throw mt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw mt.create("permission-blocked");return yield oV(i,e?.vapidKey),yield sV(i,e?.serviceWorkerRegistration),GM(i)})}function aV(i,e,t){return _(this,null,function*(){let n=lV(e);(yield i.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[GC],message_name:t[OM],message_time:t[MM],message_device_time:Math.floor(Date.now()/1e3)})})}function lV(i){switch(i){case uu.NOTIFICATION_CLICKED:return"notification_open";case uu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function cV(i,e){return _(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;i.onMessageHandler&&t.messageType===uu.PUSH_RECEIVED&&(typeof i.onMessageHandler=="function"?i.onMessageHandler(jC(t)):i.onMessageHandler.next(jC(t)));let n=t.data;tV(n)&&n[VM]==="1"&&(yield aV(i,t.messageType,n))})}var $C="@firebase/messaging",WC="0.12.22";var dV=i=>{let e=new y_(i.getProvider("app").getImmediate(),i.getProvider("installations-internal").getImmediate(),i.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>cV(e,t)),e},uV=i=>{let e=i.getProvider("messaging").getImmediate();return{getToken:n=>JC(e,n)}};function hV(){ht(new He("messaging",dV,"PUBLIC")),ht(new He("messaging-internal",uV,"PRIVATE")),ve($C,WC),ve($C,WC,"esm2017")}function ZC(){return _(this,null,function*(){try{yield ac()}catch{return!1}return typeof window<"u"&&yi()&&Mw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function fV(i){return _(this,null,function*(){if(!navigator)throw mt.create("only-available-in-window");return i.swRegistration||(yield QC(i)),YM(i)})}function pV(i,e){if(!navigator)throw mt.create("only-available-in-window");return i.onMessageHandler=e,()=>{i.onMessageHandler=null}}function eI(i=In()){return ZC().then(e=>{if(!e)throw mt.create("unsupported-browser")},e=>{throw mt.create("indexed-db-unsupported")}),cn(ke(i),"messaging").getImmediate()}function tI(i,e){return _(this,null,function*(){return i=ke(i),JC(i,e)})}function nI(i){return i=ke(i),fV(i)}function iI(i,e){return i=ke(i),pV(i,e)}hV();var Gr=class{constructor(e){return e}},rI="messaging",I_=class{constructor(){return Ei(rI)}};var D_=new pe("angularfire2.messaging-instances");function mV(i,e,t){if(Dh(t))return null;let n=hr(rI,i,e);return n&&new Gr(n)}function gV(i){return(e,t,n)=>{if(Dh(n))return null;let r=e.runOutsideAngular(()=>i(t));return new Gr(r)}}var _V={provide:I_,deps:[[new ot,D_]]},vV={provide:Gr,useFactory:mV,deps:[[new ot,D_],dn,No]};function IU(i,...e){return ve("angularfire",Dn.full,"fcm"),ci([vV,_V,{provide:D_,useFactory:gV(i),multi:!0,deps:[ne,De,No,Sn,Yn,...e]}])}var sI=Pe(nI,!0,2),DU=Pe(eI,!0),oI=Pe(tI,!0);var aI=Pe(iI,!1);var hu=class i{messaging=S(Gr);firestore=S(Hr);auth=S(_r);vapidKey="BPZ5Uf3I_ZNqJ6YvXNiBvju9rXJUTn5MFkDLwQCF0cPG2uJ6ZusWmV6tae0A8U8jRjpnmIJQevCsh7Ui6CQYe8Q";onMessageUnsub;registerPushToken(){return _(this,null,function*(){let e=this.auth.currentUser;if(!e)return null;if((yield Notification.requestPermission())!=="granted")throw new Error("Permission not granted for Notification");try{let n=yield navigator.serviceWorker.ready;if(!n)return null;console.log(n);let r=yield oI(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:n});if(console.log("token: ",r),!r)throw new Error("No registration token received");return yield l_(a_(this.firestore,`users/${e.uid}`),{pushToken:r},{merge:!0}),console.log("Push token saved to user: ",r),r}catch(n){throw console.error("Error while token generation: ",n),n}})}removeTokenForCurrentUser(){return _(this,null,function*(){try{yield sI(this.messaging).catch(()=>{});let e=this.auth.currentUser;if(!e)return;yield l_(a_(this.firestore,`users/${e.uid}`),{pushToken:null},{merge:!0})}catch(e){console.error("Error deleting token: ",e)}})}listenForMessages(){this.onMessageUnsub||(this.onMessageUnsub=aI(this.messaging,e=>{if(Notification.permission==="granted")try{new Notification(e.notification?.title??"Erinnerung",{body:e.notification?.body})}catch(t){console.error("Error displaying notification: ",t)}}))}stopListening(){this.onMessageUnsub?.(),this.onMessageUnsub=void 0}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var bV=()=>[],fu=class i{constructor(e,t){this.store=e;this.pushNotificationServie=t}events$;CalendarView=ec;view=ec.Month;viewDate=new Date;ngOnInit(){let e=this.store.select(yw),t=this.store.select(ww);this.events$=Al([e,t]).pipe(Ke(([n,r])=>{let s=n.map(l=>({start:l.birthDate?.toDate(),title:`${l.name}'s Geburtstag!`})),o=r.map(l=>({start:l.startTime?.toDate(),title:`${l.title} (${l.petName})`}));return[...s,...o]}))}static \u0275fac=function(t){return new(t||i)(ir(jl),ir(hu))};static \u0275cmp=de({type:i,selectors:[["app-overview"]],decls:4,vars:5,consts:[["pageTitle","Kalendar","additionalButton","/calendar/add","iconSlot","add"],[1,"calendar"],[3,"viewDate","events"]],template:function(t,n){t&1&&(_e(0,"app-title",0),z(1,"div",1),_e(2,"mwl-calendar-month-view",2),bt(3,"async"),U()),t&2&&(N(2),Q("viewDate",n.viewDate)("events",Th(3,2,n.events$)??hi(4,bV)))},dependencies:[vw,Hl,Ih],styles:[".calendar[_ngcontent-%COMP%]{padding-top:2rem}"]})};var pu=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=de({type:i,selectors:[["app-details"]],decls:2,vars:0,template:function(t,n){t&1&&(is(0,"p"),me(1,"details works!"),rs())},encapsulation:2})};var cI=Ny({source:"Reminder",events:{Add:or(),"Add Success":or(),"Add Failure":or(),Load:or(),LoadSuccess:or(),LoadFailure:or()}});var S_=class{_box;_destroyed=new ie;_resizeSubject=new ie;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new At(t=>{let n=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),n.unsubscribe(),this._elementObservables.delete(e)}}).pipe(rt(t=>t.some(n=>n.target===e)),mh({bufferSize:1,refCount:!0}),st(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},dI=(()=>{class i{_cleanupErrorListener;_observers=new Map;_ngZone=S(ne);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(t,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new S_(r)),this._observers.get(r).observe(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var EV=["notch"],TV=["matFormFieldNotchedOutline",""],CV=["*"],uI=["iconPrefixContainer"],hI=["textPrefixContainer"],fI=["iconSuffixContainer"],pI=["textSuffixContainer"],IV=["textField"],DV=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],SV=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function AV(i,e){i&1&&_e(0,"span",21)}function kV(i,e){if(i&1&&(z(0,"label",20),kt(1,1),Me(2,AV,1,0,"span",21),U()),i&2){let t=X(2);Q("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),Se("for",t._control.disableAutomaticLabeling?null:t._control.id),N(2),Ve(!t.hideRequiredMarker&&t._control.required?2:-1)}}function RV(i,e){if(i&1&&Me(0,kV,3,5,"label",20),i&2){let t=X();Ve(t._hasFloatingLabel()?0:-1)}}function xV(i,e){i&1&&_e(0,"div",7)}function PV(i,e){}function OV(i,e){if(i&1&&Nt(0,PV,0,0,"ng-template",13),i&2){X(2);let t=Kt(1);Q("ngTemplateOutlet",t)}}function MV(i,e){if(i&1&&(z(0,"div",9),Me(1,OV,1,1,null,13),U()),i&2){let t=X();Q("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),N(),Ve(t._forceDisplayInfixLabel()?-1:1)}}function VV(i,e){i&1&&(z(0,"div",10,2),kt(2,2),U())}function NV(i,e){i&1&&(z(0,"div",11,3),kt(2,3),U())}function FV(i,e){}function LV(i,e){if(i&1&&Nt(0,FV,0,0,"ng-template",13),i&2){X();let t=Kt(1);Q("ngTemplateOutlet",t)}}function BV(i,e){i&1&&(z(0,"div",14,4),kt(2,4),U())}function zV(i,e){i&1&&(z(0,"div",15,5),kt(2,5),U())}function UV(i,e){i&1&&_e(0,"div",16)}function HV(i,e){i&1&&(z(0,"div",18),kt(1,6),U())}function jV(i,e){if(i&1&&(z(0,"mat-hint",22),me(1),U()),i&2){let t=X(2);Q("id",t._hintLabelId),N(),Ut(t.hintLabel)}}function $V(i,e){if(i&1&&(z(0,"div",19),Me(1,jV,2,2,"mat-hint",22),kt(2,7),_e(3,"div",23),kt(4,8),U()),i&2){let t=X();N(),Ve(t.hintLabel?1:-1)}}var Ja=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["mat-label"]]})}return i})(),bI=new pe("MatError");var A_=(()=>{class i{align="start";id=S(on).getId("mat-mdc-hint-");static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(ss("id",r.id),Se("align",null),Ae("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return i})(),EI=new pe("MatPrefix");var k_=new pe("MatSuffix"),R_=(()=>{class i{set _isTextSelector(t){this._isText=!0}_isText=!1;static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[Ht([{provide:k_,useExisting:i}])]})}return i})(),TI=new pe("FloatingLabelParent"),mI=(()=>{class i{_elementRef=S(ge);get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=S(dI);_ngZone=S(ne);_parent=S(TI);_resizeSubscription=new yt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return WV(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&Ae("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return i})();function WV(i){let e=i;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let n=t.scrollWidth;return t.remove(),n}var gI="mdc-line-ripple--active",mu="mdc-line-ripple--deactivating",_I=(()=>{class i{_elementRef=S(ge);_cleanupTransitionEnd;constructor(){let t=S(ne),n=S(dt);t.runOutsideAngular(()=>{this._cleanupTransitionEnd=n.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(mu),t.add(gI)}deactivate(){this._elementRef.nativeElement.classList.add(mu)}_handleTransitionEnd=t=>{let n=this._elementRef.nativeElement.classList,r=n.contains(mu);t.propertyName==="opacity"&&r&&n.remove(gI,mu)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return i})(),vI=(()=>{class i{_elementRef=S(ge);_ngZone=S(ne);open=!1;_notch;ngAfterViewInit(){let t=this._elementRef.nativeElement,n=t.querySelector(".mdc-floating-label");n?(t.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(n.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>n.style.transitionDuration="")}))):t.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){let n=this._notch.nativeElement;!this.open||!t?n.style.width="":n.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(t){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${t}px)`)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&Be(EV,5),n&2){let s;we(s=be())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&Ae("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:TV,ngContentSelectors:CV,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(rr(),Ml(0,"div",1),is(1,"div",2,0),kt(3),rs(),Ml(4,"div",3))},encapsulation:2,changeDetection:0})}return i})(),Za=(()=>{class i{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i})}return i})();var io=new pe("MatFormField"),CI=new pe("MAT_FORM_FIELD_DEFAULT_OPTIONS"),yI="fill",qV="auto",wI="fixed",GV="translateY(-50%)",el=(()=>{class i{_elementRef=S(ge);_changeDetectorRef=S(Et);_platform=S(ut);_idGenerator=S(on);_ngZone=S(ne);_defaults=S(CI,{optional:!0});_currentDirection;_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=Bo("iconPrefixContainer");_textPrefixContainerSignal=Bo("textPrefixContainer");_iconSuffixContainerSignal=Bo("iconSuffixContainer");_textSuffixContainerSignal=Bo("textSuffixContainer");_prefixSuffixContainers=Ll(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(t=>t?.nativeElement).filter(t=>t!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=yy(Ja);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=qn(t)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||qV}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(t){let n=t||this._defaults?.appearance||yI;this._appearanceSignal.set(n)}_appearanceSignal=Oe(yI);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||wI}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||wI}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}_destroyed=new ie;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=pi();constructor(){let t=this._defaults,n=S(an);t&&(t.appearance&&(this.appearance=t.appearance),this._hideRequiredMarker=!!t?.hideRequiredMarker,t.color&&(this.color=t.color)),Lo(()=>this._currentDirection=n.valueSignal()),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Ll(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let n=this._control,r="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(r+t.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(r+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=n.stateChanges.pipe(tn([void 0,void 0]),Ke(()=>[n.errorState,n.userAriaDescribedBy]),nr(),rt(([[s,o],[l,c]])=>s!==l||o!==c)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(st(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),vn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let t=this._control.focused;t&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!t&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",t),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",t)}_syncOutlineLabelOffset(){wy({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let t of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(t,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:t=>this._writeOutlinedLabelStyles(t())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Ll(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let n=this._control?this._control.ngControl:null;return n&&n[t]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let s=this._hintChildren?this._hintChildren.find(l=>l.align==="start"):null,o=this._hintChildren?this._hintChildren.find(l=>l.align==="end"):null;s?t.push(s.id):this._hintLabel&&t.push(this._hintLabelId),o&&t.push(o.id)}else this._errorChildren&&t.push(...this._errorChildren.map(s=>s.id));let n=this._control.describedByIds,r;if(n){let s=this._describedByIds||t;r=t.concat(n.filter(o=>o&&!s.includes(o)))}else r=t;this._control.setDescribedByIds(r),this._describedByIds=t}}_getOutlinedLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let t=this._iconPrefixContainer?.nativeElement,n=this._textPrefixContainer?.nativeElement,r=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,o=t?.getBoundingClientRect().width??0,l=n?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,h=this._currentDirection==="rtl"?"-1":"1",p=`${o+l}px`,E=`calc(${h} * (${p} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,T=`var(--mat-mdc-form-field-label-transform, ${GV} translateX(${E}))`,k=o+l+c+d;return[T,k]}_writeOutlinedLabelStyles(t){if(t!==null){let[n,r]=t;this._floatingLabel&&(this._floatingLabel.element.style.transform=n),r!==null&&this._notchedOutline?._setMaxWidth(r)}}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,s){if(n&1&&(py(s,r._labelChild,Ja,5),ui(s,Za,5),ui(s,EI,5),ui(s,k_,5),ui(s,bI,5),ui(s,A_,5)),n&2){wh();let o;we(o=be())&&(r._formFieldControl=o.first),we(o=be())&&(r._prefixChildren=o),we(o=be())&&(r._suffixChildren=o),we(o=be())&&(r._errorChildren=o),we(o=be())&&(r._hintChildren=o)}},viewQuery:function(n,r){if(n&1&&(Fo(r._iconPrefixContainerSignal,uI,5),Fo(r._textPrefixContainerSignal,hI,5),Fo(r._iconSuffixContainerSignal,fI,5),Fo(r._textSuffixContainerSignal,pI,5),Be(IV,5),Be(uI,5),Be(hI,5),Be(fI,5),Be(pI,5),Be(mI,5),Be(vI,5),Be(_I,5)),n&2){wh(4);let s;we(s=be())&&(r._textField=s.first),we(s=be())&&(r._iconPrefixContainer=s.first),we(s=be())&&(r._textPrefixContainer=s.first),we(s=be())&&(r._iconSuffixContainer=s.first),we(s=be())&&(r._textSuffixContainer=s.first),we(s=be())&&(r._floatingLabel=s.first),we(s=be())&&(r._notchedOutline=s.first),we(s=be())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(n,r){n&2&&Ae("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ht([{provide:io,useExisting:i},{provide:TI,useExisting:i}])],ngContentSelectors:SV,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],["aria-atomic","true","aria-live","polite",1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let s=at();rr(DV),Nt(0,RV,1,1,"ng-template",null,0,jn),z(2,"div",6,1),ue("click",function(l){return oe(s),ae(r._control.onContainerClick(l))}),Me(4,xV,1,0,"div",7),z(5,"div",8),Me(6,MV,2,2,"div",9),Me(7,VV,3,0,"div",10),Me(8,NV,3,0,"div",11),z(9,"div",12),Me(10,LV,1,1,null,13),kt(11),U(),Me(12,BV,3,0,"div",14),Me(13,zV,3,0,"div",15),U(),Me(14,UV,1,0,"div",16),U(),z(15,"div",17),Me(16,HV,2,0,"div",18)(17,$V,5,1,"div",19),U()}if(n&2){let s;N(2),Ae("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),N(2),Ve(!r._hasOutline()&&!r._control.disabled?4:-1),N(2),Ve(r._hasOutline()?6:-1),N(),Ve(r._hasIconPrefix?7:-1),N(),Ve(r._hasTextPrefix?8:-1),N(2),Ve(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),N(2),Ve(r._hasTextSuffix?12:-1),N(),Ve(r._hasIconSuffix?13:-1),N(),Ve(r._hasOutline()?-1:14),N(),Ae("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let o=r._getSubscriptMessageType();N(),Ve((s=o)==="error"?16:s==="hint"?17:-1)}},dependencies:[mI,vI,$n,_I,A_],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return i})();var ro=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({imports:[fi,ky,el,fi]})}return i})();var KV=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return i})(),XV={passive:!0},II=(()=>{class i{_platform=S(ut);_ngZone=S(ne);_renderer=S(Un).createRenderer(null,null);_styleLoader=S(En);_monitoredElements=new Map;constructor(){}monitor(t){if(!this._platform.isBrowser)return ty;this._styleLoader.load(KV);let n=Uo(t),r=this._monitoredElements.get(n);if(r)return r.subject;let s=new ie,o="cdk-text-field-autofilled",l=d=>{d.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(o)?(n.classList.add(o),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!0}))):d.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!1})))},c=this._ngZone.runOutsideAngular(()=>(n.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(n,"animationstart",l,XV)));return this._monitoredElements.set(n,{subject:s,unlisten:c}),s}stopMonitoring(t){let n=Uo(t),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var DI=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({})}return i})();var gu=new pe("MAT_INPUT_VALUE_ACCESSOR");var SI=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var _u=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(e,t,n,r,s){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=s}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(r,t)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var QV=["button","checkbox","file","hidden","image","radio","range","reset","submit"],JV=new pe("MAT_INPUT_CONFIG"),AI=(()=>{class i{_elementRef=S(ge);_platform=S(ut);ngControl=S(Mh,{optional:!0,self:!0});_autofillMonitor=S(II);_ngZone=S(ne);_formField=S(io,{optional:!0});_renderer=S(dt);_uid=S(on).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=S(JV,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ie;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=qn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(t){this._id=t||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(gi.required)??!1}set required(t){this._required=qn(t)}_required;get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&xh().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(t){t!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(t):this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=qn(t)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>xh().has(t));constructor(){let t=S(Vh,{optional:!0}),n=S($o,{optional:!0}),r=S(SI),s=S(gu,{optional:!0,self:!0}),o=this._elementRef.nativeElement,l=o.nodeName.toLowerCase();s?ay(s.value)?this._signalBasedValueAccessor=s:this._inputValueAccessor=s:this._inputValueAccessor=o,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(o,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new _u(r,this.ngControl,n,t,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=l==="select",this._isTextarea=l==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=o.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&Lo(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){if(t!==this.focused){if(!this._isNativeSelect&&t&&this.disabled&&this.disabledInteractive){let n=this._elementRef.nativeElement;n.type==="number"?(n.type="text",n.setSelectionRange(0,0),n.type="number"):n.setSelectionRange(0,0)}this.focused=t,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=t,t?n.setAttribute("placeholder",t):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){QV.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(t){let n=this._elementRef.nativeElement;t.length?n.setAttribute("aria-describedby",t.join(" ")):n.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_iOSKeyupListener=t=>{let n=t.target;!n.value&&n.selectionStart===0&&n.selectionEnd===0&&(n.setSelectionRange(1,1),n.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(n,r){n&1&&ue("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),n&2&&(ss("id",r.id)("disabled",r.disabled&&!r.disabledInteractive)("required",r.required),Se("name",r.name||null)("readonly",r._getReadonlyAttribute())("aria-disabled",r.disabled&&r.disabledInteractive?"true":null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ae("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mat-mdc-input-disabled-interactive",r.disabledInteractive)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xt]},exportAs:["matInput"],features:[Ht([{provide:Za,useExisting:i}]),wt]})}return i})(),kI=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({imports:[fi,ro,ro,DI,fi]})}return i})();var x_=new pe("MAT_DATE_LOCALE",{providedIn:"root",factory:eN});function eN(){return S(ls)}var so="Method not implemented",It=class{locale;_localeChanges=new ie;localeChanges=this._localeChanges;setTime(e,t,n,r){throw new Error(so)}getHours(e){throw new Error(so)}getMinutes(e){throw new Error(so)}getSeconds(e){throw new Error(so)}parseTime(e,t){throw new Error(so)}addSeconds(e,t){throw new Error(so)}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,t){return this.getYear(e)-this.getYear(t)||this.getMonth(e)-this.getMonth(t)||this.getDate(e)-this.getDate(t)}compareTime(e,t){return this.getHours(e)-this.getHours(t)||this.getMinutes(e)-this.getMinutes(t)||this.getSeconds(e)-this.getSeconds(t)}sameDate(e,t){if(e&&t){let n=this.isValid(e),r=this.isValid(t);return n&&r?!this.compareDate(e,t):n==r}return e==t}sameTime(e,t){if(e&&t){let n=this.isValid(e),r=this.isValid(t);return n&&r?!this.compareTime(e,t):n==r}return e==t}clampDate(e,t,n){return t&&this.compareDate(e,t)<0?t:n&&this.compareDate(e,n)>0?n:e}},Yi=new pe("mat-date-formats");var tN=20,oo=(()=>{class i{_ngZone=S(ne);_platform=S(ut);_renderer=S(Un).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ie;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=tN){return this._platform.isBrowser?new At(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(ph(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):zn()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){let r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(rt(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_scrollableContainsElement(t,n){let r=Uo(n),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var nN=20,ao=(()=>{class i{_platform=S(ut);_listeners;_viewportSize;_change=new ie;_document=S(Xe);constructor(){let t=S(ne),n=S(Un).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=s=>this._change.next(s);this._listeners=[n.listen("window","resize",r),n.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,l=-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:o,left:l}}change(t=nN){return t>0?this._change.pipe(ph(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var tl=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({})}return i})(),O_=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({imports:[Ho,tl,Ho,tl]})}return i})();var nl=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Ki=class extends nl{component;viewContainerRef;injector;projectableNodes;constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.projectableNodes=r}},il=class extends nl{templateRef;viewContainerRef;context;injector;constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},M_=class extends nl{element;constructor(e){super(),this.element=e instanceof ge?e.nativeElement:e}},vu=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Ki)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof il)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof M_)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},yu=class extends vu{outletElement;_appRef;_defaultInjector;constructor(e,t,n){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=n}attachComponentPortal(e){let t;if(e.viewContainerRef){let n=e.injector||e.viewContainerRef.injector,r=n.get(vh,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:n,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let n=this._appRef,r=e.injector||this._defaultInjector||De.NULL,s=r.get(ts,n.injector);t=by(e.component,{elementInjector:r,environmentInjector:s,projectableNodes:e.projectableNodes||void 0}),n.attachView(t.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);r!==-1&&t.remove(r)}),this._attachedPortal=e,n}attachDomPortal=e=>{let t=e.element;t.parentNode;let n=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(n,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(t,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var V_=(()=>{class i extends vu{_moduleRef=S(vh,{optional:!0});_document=S(Xe);_viewContainerRef=S(Yt);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new K;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let n=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,r=n.createComponent(t.component,{index:n.length,injector:t.injector||n.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=t=>{let n=t.element;n.parentNode;let r=this._document.createComment("dom-portal");t.setAttachedHost(this),n.parentNode.insertBefore(r,n),this._getRootNode().appendChild(n),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ns]})}return i})();var wu=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({})}return i})();var RI=Dy();function Su(i){return new bu(i.get(ao),i.get(Xe))}var bu=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ze(-this._previousScrollPosition.left),e.style.top=ze(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,n=e.style,r=t.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),RI&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),RI&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}};function FI(i,e){return new Eu(i.get(oo),i.get(ne),i.get(ao),e)}var Eu=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(rt(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var rl=class{enable(){}disable(){}attach(){}};function N_(i,e){return e.some(t=>{let n=i.bottom<t.top,r=i.top>t.bottom,s=i.right<t.left,o=i.left>t.right;return n||r||s||o})}function xI(i,e){return e.some(t=>{let n=i.top<t.top,r=i.bottom>t.bottom,s=i.left<t.left,o=i.right>t.right;return n||r||s||o})}function ri(i,e){return new Tu(i.get(oo),i.get(ao),i.get(ne),e)}var Tu=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();N_(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},LI=(()=>{class i{_injector=S(De);constructor(){}noop=()=>new rl;close=t=>FI(this._injector,t);block=()=>Su(this._injector);reposition=t=>ri(this._injector,t);static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),lo=class{positionStrategy;scrollStrategy=new rl;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let n of t)e[n]!==void 0&&(this[n]=e[n])}}};var Cu=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var BI=(()=>{class i{_attachedOverlays=[];_document=S(Xe);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),zI=(()=>{class i extends BI{_ngZone=S(ne);_renderer=S(Un).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let n=this._attachedOverlays;for(let r=n.length-1;r>-1;r--)if(n[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=di(i)))(r||i)}})();static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),UI=(()=>{class i extends BI{_platform=S(ut);_ngZone=S(ne);_renderer=S(Un).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let n=this._document.body,r={capture:!0},s=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[s.listen(n,"pointerdown",this._pointerDownListener,r),s.listen(n,"click",this._clickListener,r),s.listen(n,"auxclick",this._clickListener,r),s.listen(n,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=kh(t)};_clickListener=t=>{let n=kh(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let l=s[o];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(PI(l.overlayElement,n)||PI(l.overlayElement,r))break;let c=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(t)):c.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=di(i)))(r||i)}})();static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function PI(i,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,n=e;for(;n;){if(n===i)return!0;n=t&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var HI=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return i})(),jI=(()=>{class i{_platform=S(ut);_containerElement;_document=S(Xe);_styleLoader=S(En);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Rh()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let n=this._document.createElement("div");n.classList.add(t),Rh()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(HI)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),F_=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,n,r){this._renderer=t,this._ngZone=n,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Iu=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ie;_attachments=new ie;_detachments=new ie;_positionStrategy;_scrollStrategy;_locationChanges=yt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new ie;_outsidePointerEvents=new ie;_afterNextRenderRef;constructor(e,t,n,r,s,o,l,c,d,h=!1,p,g){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=l,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=p,this._renderer=g,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=yn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=it(it({},this._config),e),this._updateElementSize()}setDirection(e){this._config=_n(it({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ze(this._config.width),e.height=ze(this._config.height),e.minWidth=ze(this._config.minWidth),e.minHeight=ze(this._config.minHeight),e.maxWidth=ze(this._config.maxWidth),e.maxHeight=ze(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new F_(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,n){let r=Ph(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=yn(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},OI="cdk-overlay-connected-position-bounding-box",iN=/([A-Za-z%]+)$/;function uo(i,e){return new co(e,i.get(ao),i.get(Xe),i.get(ut),i.get(jI))}var co=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ie;_resizeSubscription=yt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(OI),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let l of this._preferredPositions){let c=this._getOriginPoint(e,r,l),d=this._getOverlayPoint(c,t,l),h=this._getOverlayFit(d,t,n,l);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,c);return}if(this._canFitWithFlexibleDimensions(h,d,n)){s.push({position:l,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,l)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:d,originPoint:c,position:l,overlayRect:t})}if(s.length){let l=null,c=-1;for(let d of s){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>c&&(c=h,l=d)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(OI),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r;if(n.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;r=n.originX=="start"?o:l}t.left<0&&(r-=t.left);let s;return n.originY=="center"?s=e.top+e.height/2:s=n.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r;n.overlayX=="center"?r=-t.width/2:n.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return n.overlayY=="center"?s=-t.height/2:s=n.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){let s=VI(t),{x:o,y:l}=e,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(o+=c),d&&(l+=d);let h=0-o,p=o+s.width-n.width,g=0-l,E=l+s.height-n.height,T=this._subtractOverflows(s.width,h,p),k=this._subtractOverflows(s.height,g,E),R=T*k;return{visibleArea:R,isCompletelyWithinViewport:s.width*s.height===R,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:T==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){let r=n.bottom-t.y,s=n.right-t.x,o=MI(this._overlayRef.getConfig().minHeight),l=MI(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||o!=null&&o<=r,d=e.fitsInViewportHorizontally||l!=null&&l<=s;return c&&d}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=VI(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),l=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-n.top-e.y,0),d=Math.max(s.left-n.left-e.x,0),h=0,p=0;return r.width<=s.width?h=d||-o:h=e.x<this._viewportMargin?s.left-n.left-e.x:0,r.height<=s.height?p=c||-l:p=e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:h,y:p},{x:e.x+h,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!rN(this._lastScrollVisibility,n)){let r=new Cu(e,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){let n=this._viewportRect,r=this._isRtl(),s,o,l;if(t.overlayY==="top")o=e.y,s=n.height-o+this._viewportMargin;else if(t.overlayY==="bottom")l=n.height-e.y+this._viewportMargin*2,s=n.height-l+this._viewportMargin;else{let E=Math.min(n.bottom-e.y+n.top,e.y),T=this._lastBoundingBoxSize.height;s=E*2,o=e.y-E,s>T&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-T/2)}let c=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,d=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,h,p,g;if(d)g=n.width-e.x+this._viewportMargin*2,h=e.x-this._viewportMargin;else if(c)p=e.x,h=n.right-e.x;else{let E=Math.min(n.right-e.x+n.left,e.x),T=this._lastBoundingBoxSize.width;h=E*2,p=e.x-E,h>T&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-T/2)}return{top:o,left:p,bottom:l,right:g,width:h,height:s}}_setBoundingBoxStyles(e,t){let n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ze(n.height),r.top=ze(n.top),r.bottom=ze(n.bottom),r.width=ze(n.width),r.left=ze(n.left),r.right=ze(n.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=ze(s)),o&&(r.maxWidth=ze(o))}this._lastBoundingBoxSize=n,Yr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Yr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Yr(n,this._getExactOverlayY(t,e,h)),Yr(n,this._getExactOverlayX(t,e,h))}else n.position="static";let l="",c=this._getOffset(t,"x"),d=this._getOffset(t,"y");c&&(l+=`translateX(${c}px) `),d&&(l+=`translateY(${d}px)`),n.transform=l.trim(),o.maxHeight&&(r?n.maxHeight=ze(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ze(o.maxWidth):s&&(n.maxWidth="")),Yr(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=ze(s.y);return r}_getExactOverlayX(e,t,n){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let l=this._document.documentElement.clientWidth;r.right=`${l-(s.x+this._overlayRect.width)}px`}else r.left=ze(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:xI(e,n),isOriginOutsideView:N_(e,n),isOverlayClipped:xI(t,n),isOverlayOutsideView:N_(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ph(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ge)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}};function Yr(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function MI(i){if(typeof i!="number"&&i!=null){let[e,t]=i.split(iN);return!t||t==="px"?parseFloat(e):null}return i||null}function VI(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function rN(i,e){return i===e?!0:i.isOriginClipped===e.isOriginClipped&&i.isOriginOutsideView===e.isOriginOutsideView&&i.isOverlayClipped===e.isOverlayClipped&&i.isOverlayOutsideView===e.isOverlayOutsideView}var NI="cdk-global-overlay-wrapper";function Au(i){return new Du}var Du=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(NI),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:l}=n,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),h=this._xPosition,p=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",E="",T="",k="";c?k="flex-start":h==="center"?(k="center",g?T=p:E=p):g?h==="left"||h==="end"?(k="flex-end",E=p):(h==="right"||h==="start")&&(k="flex-start",T=p):h==="left"||h==="start"?(k="flex-start",E=p):(h==="right"||h==="end")&&(k="flex-end",T=p),e.position=this._cssPosition,e.marginLeft=c?"0":E,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":T,t.justifyContent=k,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(NI),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},$I=(()=>{class i{_injector=S(De);constructor(){}global(){return Au()}flexibleConnectedTo(t){return uo(this._injector,t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ho(i,e){i.get(En).load(HI);let t=i.get(jI),n=i.get(Xe),r=i.get(on),s=i.get(yh),o=i.get(an),l=n.createElement("div"),c=n.createElement("div");c.id=r.getId("cdk-overlay-"),c.classList.add("cdk-overlay-pane"),l.appendChild(c),t.getContainerElement().appendChild(l);let d=new yu(c,s,i),h=new lo(e),p=i.get(dt,null,{optional:!0})||i.get(Un).createRenderer(null,null);return h.direction=h.direction||o.value,new Iu(d,l,c,h,i.get(ne),i.get(zI),n,i.get(Ey),i.get(UI),e?.disableAnimations??i.get(dy,null,{optional:!0})==="NoopAnimations",i.get(ts),p)}var WI=(()=>{class i{scrollStrategies=S(LI);_positionBuilder=S($I);_injector=S(De);constructor(){}create(t){return ho(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var sN=new pe("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=S(De);return()=>ri(i)}});function oN(i){let e=S(De);return()=>ri(e)}var aN={provide:sN,useFactory:oN},L_=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({providers:[WI,aN],imports:[Ho,wu,O_,O_]})}return i})();var lN=["tooltip"],cN=20;var dN=new pe("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let i=S(De);return()=>ri(i,{scrollThrottle:cN})}});function uN(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var hN=new pe("mat-tooltip-default-options",{providedIn:"root",factory:uN});var qI="tooltip-panel",GI=Iy({passive:!0}),fN=8,pN=8,mN=24,gN=200,YI=(()=>{class i{_elementRef=S(ge);_ngZone=S(ne);_platform=S(ut);_ariaDescriber=S(Py);_focusMonitor=S(Sy);_dir=S(an);_injector=S(De);_viewContainerRef=S(Yt);_animationsDisabled=pi();_defaultOptions=S(hN,{optional:!0});_overlayRef;_tooltipInstance;_overlayPanelClass;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=_N;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=qn(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){let n=qn(t);this._disabled!==n&&(this._disabled=n,n?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=zo(t)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=zo(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(t){let n=this._message;this._message=t!=null?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(n)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new ie;_isDestroyed=!1;constructor(){let t=this._defaultOptions;t&&(this._showDelay=t.showDelay,this._hideDelay=t.hideDelay,t.position&&(this.position=t.position),t.positionAtOrigin&&(this.positionAtOrigin=t.positionAtOrigin),t.touchGestures&&(this.touchGestures=t.touchGestures),t.tooltipClass&&(this.tooltipClass=t.tooltipClass)),this._viewportMargin=fN}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(st(this._destroyed)).subscribe(t=>{t?t==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let t=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,GI)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(n);this._detach(),this._portal=this._portal||new Ki(this._tooltipComponent,this._viewContainerRef);let s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(st(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(t):(n._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){let o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&o._origin instanceof ge)return this._overlayRef;this._detach()}let n=this._injector.get(oo).getAncestorScrollContainers(this._elementRef),r=`${this._cssClassPrefix}-${qI}`,s=uo(this._injector,this.positionAtOrigin?t||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return s.positionChanges.pipe(st(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=ho(this._injector,{direction:this._dir,positionStrategy:s,panelClass:this._overlayPanelClass?[...this._overlayPanelClass,r]:r,scrollStrategy:this._injector.get(dN)(),disableAnimations:this._animationsDisabled}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(st(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(st(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(st(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&o.keyCode===27&&!Wn(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(st(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){let n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset(it(it({},r.main),s.main)),this._addOffset(it(it({},r.fallback),s.fallback))])}_addOffset(t){let n=pN,r=!this._dir||this._dir.value=="ltr";return t.originY==="top"?t.offsetY=-n:t.originY==="bottom"?t.offsetY=n:t.originX==="start"?t.offsetX=r?-n:n:t.originX==="end"&&(t.offsetX=r?n:-n),t}_getOrigin(){let t=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"||n=="below"?r={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&t||n=="right"&&!t?r={originX:"start",originY:"center"}:(n=="after"||n=="right"&&t||n=="left"&&!t)&&(r={originX:"end",originY:"center"});let{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){let t=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"?r={overlayX:"center",overlayY:"bottom"}:n=="below"?r={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&t||n=="right"&&!t?r={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&t||n=="left"&&!t)&&(r={overlayX:"start",overlayY:"center"});let{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),yn(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):t==="end"?t="start":t==="start"&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){let{overlayY:n,originX:r,originY:s}=t,o;if(n==="center"?this._dir&&this._dir.value==="rtl"?o=r==="end"?"left":"right":o=r==="start"?"left":"right":o=n==="bottom"&&s==="top"?"above":"below",o!==this._currentPosition){let l=this._overlayRef;if(l){let c=`${this._cssClassPrefix}-${qI}-`;l.removePanelClass(c+this._currentPosition),l.addPanelClass(c+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{this._setupPointerExitEventsIfNeeded();let n;t.x!==void 0&&t.y!==void 0&&(n=t),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{let n=t.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions?.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{let r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,GI)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){let n=this._injector.get(Xe).elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let t=this.touchGestures;if(t!=="off"){let n=this._elementRef.nativeElement,r=n.style;(t==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(t==="on"||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(t){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,t,"tooltip"),this._isDestroyed||yn({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,r){n&2&&Ae("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return i})(),_N=(()=>{class i{_changeDetectorRef=S(Et);_elementRef=S(ge);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled=pi();_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new ie;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){}show(t){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>mN&&t.width>=gN}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){let n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible!==t&&(this._isVisible=t,this._changeDetectorRef.markForCheck()),t&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(n);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(n,r){if(n&1&&Be(lN,7),n&2){let s;we(s=be())&&(r._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(n,r){n&1&&ue("mouseleave",function(o){return r._handleMouseLeave(o)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(n,r){if(n&1){let s=at();z(0,"div",1,0),ue("animationend",function(l){return oe(s),ae(r._handleAnimationEnd(l))}),z(2,"div",2),me(3),U()()}n&2&&(Ae("mdc-tooltip--multiline",r._isMultiline),Q("ngClass",r.tooltipClass),N(3),Ut(r.message))},dependencies:[sn],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mat-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mat-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mat-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mat-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mat-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mat-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return i})();var vN=["mat-calendar-body",""];function yN(i,e){return this._trackRow(e)}var tD=(i,e)=>e.id;function wN(i,e){if(i&1&&(z(0,"tr",0)(1,"td",3),me(2),U()()),i&2){let t=X();N(),os("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),Se("colspan",t.numCols),N(),wn(" ",t.label," ")}}function bN(i,e){if(i&1&&(z(0,"td",3),me(1),U()),i&2){let t=X(2);os("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),Se("colspan",t._firstRowOffset),N(),wn(" ",t._firstRowOffset>=t.labelMinRequiredCells?t.label:""," ")}}function EN(i,e){if(i&1){let t=at();z(0,"td",6)(1,"button",7),ue("click",function(r){let s=oe(t).$implicit,o=X(2);return ae(o._cellClicked(s,r))})("focus",function(r){let s=oe(t).$implicit,o=X(2);return ae(o._emitActiveDateChange(s,r))}),z(2,"span",8),me(3),U(),_e(4,"span",9),U()()}if(i&2){let t=e.$implicit,n=e.$index,r=X().$index,s=X();os("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),Se("data-mat-row",r)("data-mat-col",n),N(),Ae("mat-calendar-body-disabled",!t.enabled)("mat-calendar-body-active",s._isActiveCell(r,n))("mat-calendar-body-range-start",s._isRangeStart(t.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(t.compareValue))("mat-calendar-body-in-range",s._isInRange(t.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(t.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(t.compareValue,r,n))("mat-calendar-body-comparison-start",s._isComparisonStart(t.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(t.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(t.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(t.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(t.compareValue))("mat-calendar-body-in-preview",s._isInPreview(t.compareValue)),Q("ngClass",t.cssClasses)("tabindex",s._isActiveCell(r,n)?0:-1),Se("aria-label",t.ariaLabel)("aria-disabled",!t.enabled||null)("aria-pressed",s._isSelected(t.compareValue))("aria-current",s.todayValue===t.compareValue?"date":null)("aria-describedby",s._getDescribedby(t.compareValue)),N(),Ae("mat-calendar-body-selected",s._isSelected(t.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(t.compareValue))("mat-calendar-body-today",s.todayValue===t.compareValue),N(),wn(" ",t.displayValue," ")}}function TN(i,e){if(i&1&&(z(0,"tr",1),Me(1,bN,2,6,"td",4),nn(2,EN,5,48,"td",5,tD),U()),i&2){let t=e.$implicit,n=e.$index,r=X();N(),Ve(n===0&&r._firstRowOffset?1:-1),N(),rn(t)}}function CN(i,e){if(i&1&&(z(0,"th",2)(1,"span",6),me(2),U(),z(3,"span",3),me(4),U()()),i&2){let t=e.$implicit;N(2),Ut(t.long),N(2),Ut(t.narrow)}}var IN=["*"];function DN(i,e){}function SN(i,e){if(i&1){let t=at();z(0,"mat-month-view",4),Fl("activeDateChange",function(r){oe(t);let s=X();return Nl(s.activeDate,r)||(s.activeDate=r),ae(r)}),ue("_userSelection",function(r){oe(t);let s=X();return ae(s._dateSelected(r))})("dragStarted",function(r){oe(t);let s=X();return ae(s._dragStarted(r))})("dragEnded",function(r){oe(t);let s=X();return ae(s._dragEnded(r))}),U()}if(i&2){let t=X();Vl("activeDate",t.activeDate),Q("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)("comparisonStart",t.comparisonStart)("comparisonEnd",t.comparisonEnd)("startDateAccessibleName",t.startDateAccessibleName)("endDateAccessibleName",t.endDateAccessibleName)("activeDrag",t._activeDrag)}}function AN(i,e){if(i&1){let t=at();z(0,"mat-year-view",5),Fl("activeDateChange",function(r){oe(t);let s=X();return Nl(s.activeDate,r)||(s.activeDate=r),ae(r)}),ue("monthSelected",function(r){oe(t);let s=X();return ae(s._monthSelectedInYearView(r))})("selectedChange",function(r){oe(t);let s=X();return ae(s._goToDateInView(r,"month"))}),U()}if(i&2){let t=X();Vl("activeDate",t.activeDate),Q("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function kN(i,e){if(i&1){let t=at();z(0,"mat-multi-year-view",6),Fl("activeDateChange",function(r){oe(t);let s=X();return Nl(s.activeDate,r)||(s.activeDate=r),ae(r)}),ue("yearSelected",function(r){oe(t);let s=X();return ae(s._yearSelectedInMultiYearView(r))})("selectedChange",function(r){oe(t);let s=X();return ae(s._goToDateInView(r,"year"))}),U()}if(i&2){let t=X();Vl("activeDate",t.activeDate),Q("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function RN(i,e){}var xN=["button"],PN=[[["","matDatepickerToggleIcon",""]]],ON=["[matDatepickerToggleIcon]"];function MN(i,e){i&1&&(Vo(),z(0,"svg",2),_e(1,"path",3),U())}var _o=(()=>{class i{changes=new ie;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(t,n){return`${t} \u2013 ${n}`}formatYearRangeLabel(t,n){return`${t} to ${n}`}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),VN=0,al=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=VN++;constructor(e,t,n,r,s={},o=e,l){this.value=e,this.displayValue=t,this.ariaLabel=n,this.enabled=r,this.cssClasses=s,this.compareValue=o,this.rawValue=l}},NN={passive:!1,capture:!0},Ru={passive:!0,capture:!0},KI={passive:!0},go=(()=>{class i{_elementRef=S(ge);_ngZone=S(ne);_platform=S(ut);_intl=S(_o);_eventCleanups;_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new K;previewChange=new K;activeDateChange=new K;dragStarted=new K;dragEnded=new K;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=S(De);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=t=>t;constructor(){let t=S(dt),n=S(on);this._startDateLabelId=n.getId("mat-calendar-body-start-"),this._endDateLabelId=n.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=n.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=n.getId("mat-calendar-body-comparison-end-"),S(En).load(My),this._ngZone.runOutsideAngular(()=>{let r=this._elementRef.nativeElement,s=[t.listen(r,"touchmove",this._touchmoveHandler,NN),t.listen(r,"mouseenter",this._enterHandler,Ru),t.listen(r,"focus",this._enterHandler,Ru),t.listen(r,"mouseleave",this._leaveHandler,Ru),t.listen(r,"blur",this._leaveHandler,Ru),t.listen(r,"mousedown",this._mousedownHandler,KI),t.listen(r,"touchstart",this._mousedownHandler,KI)];this._platform.isBrowser&&s.push(t.listen("window","mouseup",this._mouseupHandler),t.listen("window","touchend",this._touchendHandler)),this._eventCleanups=s})}_cellClicked(t,n){this._didDragSinceMouseDown||t.enabled&&this.selectedValueChange.emit({value:t.value,event:n})}_emitActiveDateChange(t,n){t.enabled&&this.activeDateChange.emit({value:t.value,event:n})}_isSelected(t){return this.startValue===t||this.endValue===t}ngOnChanges(t){let n=t.numCols,{rows:r,numCols:s}=this;(t.rows||n)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(t.cellAspectRatio||n||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/s}%`),(n||!this._cellWidth)&&(this._cellWidth=`${100/s}%`)}ngOnDestroy(){this._eventCleanups.forEach(t=>t())}_isActiveCell(t,n){let r=t*this.numCols+n;return t&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(t=!0){yn(()=>{setTimeout(()=>{let n=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");n&&(t||(this._skipNextFocus=!0),n.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(t){return U_(t,this.startValue,this.endValue)}_isRangeEnd(t){return H_(t,this.startValue,this.endValue)}_isInRange(t){return j_(t,this.startValue,this.endValue,this.isRange)}_isComparisonStart(t){return U_(t,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(t,n,r){if(!this._isComparisonStart(t)||this._isRangeStart(t)||!this._isInRange(t))return!1;let s=this.rows[n][r-1];if(!s){let o=this.rows[n-1];s=o&&o[o.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(t,n,r){if(!this._isComparisonEnd(t)||this._isRangeEnd(t)||!this._isInRange(t))return!1;let s=this.rows[n][r+1];if(!s){let o=this.rows[n+1];s=o&&o[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(t){return H_(t,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(t){return j_(t,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(t){return this.comparisonStart===this.comparisonEnd&&t===this.comparisonStart}_isPreviewStart(t){return U_(t,this.previewStart,this.previewEnd)}_isPreviewEnd(t){return H_(t,this.previewStart,this.previewEnd)}_isInPreview(t){return j_(t,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(t){if(!this.isRange)return null;if(this.startValue===t&&this.endValue===t)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===t)return this._startDateLabelId;if(this.endValue===t)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(t===this.comparisonStart&&t===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(t===this.comparisonStart)return this._comparisonStartDateLabelId;if(t===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=t=>{if(this._skipNextFocus&&t.type==="focus"){this._skipNextFocus=!1;return}if(t.target&&this.isRange){let n=this._getCellFromElement(t.target);n&&this._ngZone.run(()=>this.previewChange.emit({value:n.enabled?n:null,event:t}))}};_touchmoveHandler=t=>{if(!this.isRange)return;let n=XI(t),r=n?this._getCellFromElement(n):null;n!==t.target&&(this._didDragSinceMouseDown=!0),z_(t.target)&&t.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:r?.enabled?r:null,event:t}))};_leaveHandler=t=>{this.previewEnd!==null&&this.isRange&&(t.type!=="blur"&&(this._didDragSinceMouseDown=!0),t.target&&this._getCellFromElement(t.target)&&!(t.relatedTarget&&this._getCellFromElement(t.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:t})))};_mousedownHandler=t=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let n=t.target&&this._getCellFromElement(t.target);!n||!this._isInRange(n.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:n.rawValue,event:t})})};_mouseupHandler=t=>{if(!this.isRange)return;let n=z_(t.target);if(!n){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:t})});return}n.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let r=this._getCellFromElement(n);this.dragEnded.emit({value:r?.rawValue??null,event:t})})};_touchendHandler=t=>{let n=XI(t);n&&this._mouseupHandler({target:n})};_getCellFromElement(t){let n=z_(t);if(n){let r=n.getAttribute("data-mat-row"),s=n.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)]?.[parseInt(s)]||null}return null}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[wt],attrs:vN,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(n,r){n&1&&(Me(0,wN,3,6,"tr",0),nn(1,TN,4,1,"tr",1,yN,!0),z(3,"span",2),me(4),U(),z(5,"span",2),me(6),U(),z(7,"span",2),me(8),U(),z(9,"span",2),me(10),U()),n&2&&(Ve(r._firstRowOffset<r.labelMinRequiredCells?0:-1),N(),rn(r.rows),N(2),Q("id",r._startDateLabelId),N(),wn(" ",r.startDateAccessibleName,`
`),N(),Q("id",r._endDateLabelId),N(),wn(" ",r.endDateAccessibleName,`
`),N(),Q("id",r._comparisonStartDateLabelId),N(),Eh(" ",r.comparisonDateAccessibleName," ",r.startDateAccessibleName,`
`),N(),Q("id",r._comparisonEndDateLabelId),N(),Eh(" ",r.comparisonDateAccessibleName," ",r.endDateAccessibleName,`
`))},dependencies:[sn],styles:[`.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}
`],encapsulation:2,changeDetection:0})}return i})();function B_(i){return i?.nodeName==="TD"}function z_(i){let e;return B_(i)?e=i:B_(i.parentNode)?e=i.parentNode:B_(i.parentNode?.parentNode)&&(e=i.parentNode.parentNode),e?.getAttribute("data-mat-row")!=null?e:null}function U_(i,e,t){return t!==null&&e!==t&&i<t&&i===e}function H_(i,e,t){return e!==null&&e!==t&&i>=e&&i===t}function j_(i,e,t,n){return n&&e!==null&&t!==null&&e!==t&&i>=e&&i<=t}function XI(i){let e=i.changedTouches[0];return document.elementFromPoint(e.clientX,e.clientY)}var Zt=class{start;end;_disableStructuralEquivalency;constructor(e,t){this.start=e,this.end=t}},ll=(()=>{class i{selection;_adapter;_selectionChanged=new ie;selectionChanged=this._selectionChanged;constructor(t,n){this.selection=t,this._adapter=n,this.selection=t}updateSelection(t,n){let r=this.selection;this.selection=t,this._selectionChanged.next({selection:t,source:n,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(t){return this._adapter.isDateInstance(t)&&this._adapter.isValid(t)}static \u0275fac=function(n){uy()};static \u0275prov=ce({token:i,factory:i.\u0275fac})}return i})(),FN=(()=>{class i extends ll{constructor(t){super(null,t)}add(t){super.updateSelection(t,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let t=new i(this._adapter);return t.updateSelection(this.selection,this),t}static \u0275fac=function(n){return new(n||i)(oy(It))};static \u0275prov=ce({token:i,factory:i.\u0275fac})}return i})();function LN(i,e){return i||new FN(e)}var nD={provide:ll,deps:[[new ot,new cy,ll],It],useFactory:LN};var iD=new pe("MAT_DATE_RANGE_SELECTION_STRATEGY");var $_=7,BN=0,QI=(()=>{class i{_changeDetectorRef=S(Et);_dateFormats=S(Yi,{optional:!0});_dateAdapter=S(It,{optional:!0});_dir=S(an,{optional:!0});_rangeStrategy=S(iD,{optional:!0});_rerenderSubscription=yt.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(t){let n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(n,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(t){t instanceof Zt?this._selected=t:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_minDate;get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new K;_userSelection=new K;dragStarted=new K;dragEnded=new K;activeDateChange=new K;_matCalendarBody;_monthLabel=Oe("");_weeks=Oe([]);_firstWeekOffset=Oe(0);_rangeStart=Oe(null);_rangeEnd=Oe(null);_comparisonRangeStart=Oe(null);_comparisonRangeEnd=Oe(null);_previewStart=Oe(null);_previewEnd=Oe(null);_isRange=Oe(!1);_todayDate=Oe(null);_weekdays=Oe([]);constructor(){S(En).load(zl),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(tn(null)).subscribe(()=>this._init())}ngOnChanges(t){let n=t.comparisonStart||t.comparisonEnd;n&&!n.firstChange&&this._setRanges(this.selected),t.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(t){let n=t.value,r=this._getDateFromDayOfMonth(n),s,o;this._selected instanceof Zt?(s=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):s=o=this._getDateInCurrentMonth(this._selected),(s!==n||o!==n)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:t.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(t){let n=t.value,r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(n),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(t){let n=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&t.preventDefault();return;case 27:this._previewEnd()!=null&&!Wn(t)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:t}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:t})),t.preventDefault(),t.stopPropagation());return;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),t.preventDefault()}_handleCalendarBodyKeyup(t){(t.keyCode===32||t.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate.set(this._getCellCompareValue(this._dateAdapter.today())),this._monthLabel.set(this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase());let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset.set(($_+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%$_),this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(t){this._matCalendarBody._focusActiveCell(t)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:t,value:n}){if(this._rangeStrategy){let r=n?n.rawValue:null,s=this._rangeStrategy.createPreview(r,this.selected,t);if(this._previewStart.set(this._getCellCompareValue(s.start)),this._previewEnd.set(this._getCellCompareValue(s.end)),this.activeDrag&&r){let o=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,t);o&&(this._previewStart.set(this._getCellCompareValue(o.start)),this._previewEnd.set(this._getCellCompareValue(o.end)))}}}_dragEnded(t){if(this.activeDrag)if(t.value){let n=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,t.value,t.event);this.dragEnded.emit({value:n??null,event:t.event})}else this.dragEnded.emit({value:null,event:t.event})}_getDateFromDayOfMonth(t){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),t)}_initWeekdays(){let t=this._dateAdapter.getFirstDayOfWeek(),n=this._dateAdapter.getDayOfWeekNames("narrow"),s=this._dateAdapter.getDayOfWeekNames("long").map((o,l)=>({long:o,narrow:n[l],id:BN++}));this._weekdays.set(s.slice(t).concat(s.slice(0,t)))}_createWeekCells(){let t=this._dateAdapter.getNumDaysInMonth(this.activeDate),n=this._dateAdapter.getDateNames(),r=[[]];for(let s=0,o=this._firstWeekOffset();s<t;s++,o++){o==$_&&(r.push([]),o=0);let l=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),s+1),c=this._shouldEnableDate(l),d=this._dateAdapter.format(l,this._dateFormats.display.dateA11yLabel),h=this.dateClass?this.dateClass(l,"month"):void 0;r[r.length-1].push(new al(s+1,n[s],d,c,h,this._getCellCompareValue(l),l))}this._weeks.set(r)}_shouldEnableDate(t){return!!t&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(t))}_getDateInCurrentMonth(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}_hasSameMonthAndYear(t,n){return!!(t&&n&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(n)&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(n))}_getCellCompareValue(t){if(t){let n=this._dateAdapter.getYear(t),r=this._dateAdapter.getMonth(t),s=this._dateAdapter.getDate(t);return new Date(n,r,s).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(t){t instanceof Zt?(this._rangeStart.set(this._getCellCompareValue(t.start)),this._rangeEnd.set(this._getCellCompareValue(t.end)),this._isRange.set(!0)):(this._rangeStart.set(this._getCellCompareValue(t)),this._rangeEnd.set(this._rangeStart()),this._isRange.set(!1)),this._comparisonRangeStart.set(this._getCellCompareValue(this.comparisonStart)),this._comparisonRangeEnd.set(this._getCellCompareValue(this.comparisonEnd))}_canSelect(t){return!this.dateFilter||this.dateFilter(t)}_clearPreview(){this._previewStart.set(null),this._previewEnd.set(null)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-month-view"]],viewQuery:function(n,r){if(n&1&&Be(go,5),n&2){let s;we(s=be())&&(r._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[wt],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(n,r){n&1&&(z(0,"table",0)(1,"thead",1)(2,"tr"),nn(3,CN,5,2,"th",2,tD),U(),z(5,"tr",3),_e(6,"th",4),U()(),z(7,"tbody",5),ue("selectedValueChange",function(o){return r._dateSelected(o)})("activeDateChange",function(o){return r._updateActiveDate(o)})("previewChange",function(o){return r._previewChanged(o)})("dragStarted",function(o){return r.dragStarted.emit(o)})("dragEnded",function(o){return r._dragEnded(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),U()()),n&2&&(N(3),rn(r._weekdays()),N(4),Q("label",r._monthLabel())("rows",r._weeks())("todayValue",r._todayDate())("startValue",r._rangeStart())("endValue",r._rangeEnd())("comparisonStart",r._comparisonRangeStart())("comparisonEnd",r._comparisonRangeEnd())("previewStart",r._previewStart())("previewEnd",r._previewEnd())("isRange",r._isRange())("labelMinRequiredCells",3)("activeCell",r._dateAdapter.getDate(r.activeDate)-1)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName))},dependencies:[go],encapsulation:2,changeDetection:0})}return i})(),qt=24,W_=4,JI=(()=>{class i{_changeDetectorRef=S(Et);_dateAdapter=S(It,{optional:!0});_dir=S(an,{optional:!0});_rerenderSubscription=yt.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(t){let n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),rD(this._dateAdapter,n,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(t){t instanceof Zt?this._selected=t:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedYear(t)}_selected;get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_minDate;get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_maxDate;dateFilter;dateClass;selectedChange=new K;yearSelected=new K;activeDateChange=new K;_matCalendarBody;_years=Oe([]);_todayYear=Oe(0);_selectedYear=Oe(null);constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(tn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear.set(this._dateAdapter.getYear(this._dateAdapter.today()));let n=this._dateAdapter.getYear(this._activeDate)-sl(this._dateAdapter,this.activeDate,this.minDate,this.maxDate),r=[];for(let s=0,o=[];s<qt;s++)o.push(n+s),o.length==W_&&(r.push(o.map(l=>this._createCellForYear(l))),o=[]);this._years.set(r),this._changeDetectorRef.markForCheck()}_yearSelected(t){let n=t.value,r=this._dateAdapter.createDate(n,0,1),s=this._getDateFromYear(n);this.yearSelected.emit(r),this.selectedChange.emit(s)}_updateActiveDate(t){let n=t.value,r=this._activeDate;this.activeDate=this._getDateFromYear(n),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(t){let n=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-W_);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,W_);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-sl(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,qt-sl(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-qt*10:-qt);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?qt*10:qt);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),t.preventDefault()}_handleCalendarBodyKeyup(t){(t.keyCode===32||t.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_getActiveCell(){return sl(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(t){let n=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,n,1));return this._dateAdapter.createDate(t,n,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(t){let n=this._dateAdapter.createDate(t,0,1),r=this._dateAdapter.getYearName(n),s=this.dateClass?this.dateClass(n,"multi-year"):void 0;return new al(t,r,r,this._shouldEnableYear(t),s)}_shouldEnableYear(t){if(t==null||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let n=this._dateAdapter.createDate(t,0,1);for(let r=n;this._dateAdapter.getYear(r)==t;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(t){if(this._selectedYear.set(null),t instanceof Zt){let n=t.start||t.end;n&&this._selectedYear.set(this._dateAdapter.getYear(n))}else t&&this._selectedYear.set(this._dateAdapter.getYear(t))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-multi-year-view"]],viewQuery:function(n,r){if(n&1&&Be(go,5),n&2){let s;we(s=be())&&(r._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(n,r){n&1&&(z(0,"table",0)(1,"thead",1)(2,"tr"),_e(3,"th",2),U()(),z(4,"tbody",3),ue("selectedValueChange",function(o){return r._yearSelected(o)})("activeDateChange",function(o){return r._updateActiveDate(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),U()()),n&2&&(N(4),Q("rows",r._years())("todayValue",r._todayYear())("startValue",r._selectedYear())("endValue",r._selectedYear())("numCols",4)("cellAspectRatio",4/7)("activeCell",r._getActiveCell()))},dependencies:[go],encapsulation:2,changeDetection:0})}return i})();function rD(i,e,t,n,r){let s=i.getYear(e),o=i.getYear(t),l=sD(i,n,r);return Math.floor((s-l)/qt)===Math.floor((o-l)/qt)}function sl(i,e,t,n){let r=i.getYear(e);return zN(r-sD(i,t,n),qt)}function sD(i,e,t){let n=0;return t?n=i.getYear(t)-qt+1:e&&(n=i.getYear(e)),n}function zN(i,e){return(i%e+e)%e}var ZI=(()=>{class i{_changeDetectorRef=S(Et);_dateFormats=S(Yi,{optional:!0});_dateAdapter=S(It,{optional:!0});_dir=S(an,{optional:!0});_rerenderSubscription=yt.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(t){let n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(n)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(t){t instanceof Zt?this._selected=t:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedMonth(t)}_selected;get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_minDate;get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_maxDate;dateFilter;dateClass;selectedChange=new K;monthSelected=new K;activeDateChange=new K;_matCalendarBody;_months=Oe([]);_yearLabel=Oe("");_todayMonth=Oe(null);_selectedMonth=Oe(null);constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(tn(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(t){let n=t.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1);this.monthSelected.emit(r);let s=this._getDateFromMonth(n);this.selectedChange.emit(s)}_updateActiveDate(t){let n=t.value,r=this._activeDate;this.activeDate=this._getDateFromMonth(n),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(t){let n=this._activeDate,r=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),t.preventDefault()}_handleCalendarBodyKeyup(t){(t.keyCode===32||t.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth.set(this._getMonthInCurrentYear(this._dateAdapter.today())),this._yearLabel.set(this._dateAdapter.getYearName(this.activeDate));let t=this._dateAdapter.getMonthNames("short");this._months.set([[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(n=>n.map(r=>this._createCellForMonth(r,t[r])))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}_getDateFromMonth(t){let n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),r=this._dateAdapter.getNumDaysInMonth(n);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(t,n){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(r,"year"):void 0;return new al(t,n.toLocaleUpperCase(),s,this._shouldEnableMonth(t),o)}_shouldEnableMonth(t){let n=this._dateAdapter.getYear(this.activeDate);if(t==null||this._isYearAndMonthAfterMaxDate(n,t)||this._isYearAndMonthBeforeMinDate(n,t))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(n,t,1);for(let s=r;this._dateAdapter.getMonth(s)==t;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(t,n){if(this.maxDate){let r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return t>r||t===r&&n>s}return!1}_isYearAndMonthBeforeMinDate(t,n){if(this.minDate){let r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return t<r||t===r&&n<s}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(t){t instanceof Zt?this._selectedMonth.set(this._getMonthInCurrentYear(t.start)||this._getMonthInCurrentYear(t.end)):this._selectedMonth.set(this._getMonthInCurrentYear(t))}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-year-view"]],viewQuery:function(n,r){if(n&1&&Be(go,5),n&2){let s;we(s=be())&&(r._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(n,r){n&1&&(z(0,"table",0)(1,"thead",1)(2,"tr"),_e(3,"th",2),U()(),z(4,"tbody",3),ue("selectedValueChange",function(o){return r._monthSelected(o)})("activeDateChange",function(o){return r._updateActiveDate(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),U()()),n&2&&(N(4),Q("label",r._yearLabel())("rows",r._months())("todayValue",r._todayMonth())("startValue",r._selectedMonth())("endValue",r._selectedMonth())("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._dateAdapter.getMonth(r.activeDate)))},dependencies:[go],encapsulation:2,changeDetection:0})}return i})(),oD=(()=>{class i{_intl=S(_o);calendar=S(q_);_dateAdapter=S(It,{optional:!0});_dateFormats=S(Yi,{optional:!0});_periodButtonText;_periodButtonDescription;_periodButtonLabel;_prevButtonLabel;_nextButtonLabel;constructor(){S(En).load(zl);let t=S(Et);this._updateLabels(),this.calendar.stateChanges.subscribe(()=>{this._updateLabels(),t.markForCheck()})}get periodButtonText(){return this._periodButtonText}get periodButtonDescription(){return this._periodButtonDescription}get periodButtonLabel(){return this._periodButtonLabel}get prevButtonLabel(){return this._prevButtonLabel}get nextButtonLabel(){return this._nextButtonLabel}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.previousEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-qt))}nextClicked(){this.nextEnabled()&&(this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:qt))}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_updateLabels(){let t=this.calendar,n=this._intl,r=this._dateAdapter;t.currentView==="month"?(this._periodButtonText=r.format(t.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonDescription=r.format(t.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase(),this._periodButtonLabel=n.switchToMultiYearViewLabel,this._prevButtonLabel=n.prevMonthLabel,this._nextButtonLabel=n.nextMonthLabel):t.currentView==="year"?(this._periodButtonText=r.getYearName(t.activeDate),this._periodButtonDescription=r.getYearName(t.activeDate),this._periodButtonLabel=n.switchToMonthViewLabel,this._prevButtonLabel=n.prevYearLabel,this._nextButtonLabel=n.nextYearLabel):(this._periodButtonText=n.formatYearRange(...this._formatMinAndMaxYearLabels()),this._periodButtonDescription=n.formatYearRangeLabel(...this._formatMinAndMaxYearLabels()),this._periodButtonLabel=n.switchToMonthViewLabel,this._prevButtonLabel=n.prevMultiYearLabel,this._nextButtonLabel=n.nextMultiYearLabel)}_isSameView(t,n){return this.calendar.currentView=="month"?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(n)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(n):this.calendar.currentView=="year"?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(n):rD(this._dateAdapter,t,n,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let n=this._dateAdapter.getYear(this.calendar.activeDate)-sl(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=n+qt-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(n,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return[s,o]}_periodButtonLabelId=S(on).getId("mat-calendar-period-label-");static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:IN,decls:17,vars:13,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["matButton","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-previous-button",3,"click","disabled","matTooltip"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","disabledInteractive","",1,"mat-calendar-next-button",3,"click","disabled","matTooltip"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(n,r){n&1&&(rr(),z(0,"div",0)(1,"div",1)(2,"span",2),me(3),U(),z(4,"button",3),ue("click",function(){return r.currentPeriodClicked()}),z(5,"span",4),me(6),U(),Vo(),z(7,"svg",5),_e(8,"polygon",6),U()(),_h(),_e(9,"div",7),kt(10),z(11,"button",8),ue("click",function(){return r.previousClicked()}),Vo(),z(12,"svg",9),_e(13,"path",10),U()(),_h(),z(14,"button",11),ue("click",function(){return r.nextClicked()}),Vo(),z(15,"svg",9),_e(16,"path",12),U()()()()),n&2&&(N(2),Q("id",r._periodButtonLabelId),N(),Ut(r.periodButtonDescription),N(),Se("aria-label",r.periodButtonLabel)("aria-describedby",r._periodButtonLabelId),N(2),Ut(r.periodButtonText),N(),Ae("mat-calendar-invert",r.calendar.currentView!=="month"),N(4),Q("disabled",!r.previousEnabled())("matTooltip",r.prevButtonLabel),Se("aria-label",r.prevButtonLabel),N(3),Q("disabled",!r.nextEnabled())("matTooltip",r.nextButtonLabel),Se("aria-label",r.nextButtonLabel))},dependencies:[jo,Oh,YI],encapsulation:2,changeDetection:0})}return i})(),q_=(()=>{class i{_dateAdapter=S(It,{optional:!0});_dateFormats=S(Yi,{optional:!0});_changeDetectorRef=S(Et);_elementRef=S(ge);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_startAt;startView="month";get selected(){return this._selected}set selected(t){t instanceof Zt?this._selected=t:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_selected;get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_minDate;get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new K;yearSelected=new K;monthSelected=new K;viewChanged=new K(!0);_userSelection=new K;_userDragDrop=new K;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(t){let n=this._currentView!==t?t:null;this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),n&&(this.stateChanges.next(),this.viewChanged.emit(n))}_currentView;_activeDrag=null;stateChanges=new ie;constructor(){this._intlChanges=S(_o).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Ki(this.headerComponent||oD),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(t){let n=t.minDate&&!this._dateAdapter.sameDate(t.minDate.previousValue,t.minDate.currentValue)?t.minDate:void 0,r=t.maxDate&&!this._dateAdapter.sameDate(t.maxDate.previousValue,t.maxDate.currentValue)?t.maxDate:void 0,s=n||r||t.dateFilter;if(s&&!s.firstChange){let o=this._getCurrentViewComponent();o&&(this._elementRef.nativeElement.contains(Ah())&&(this._moveFocusOnNextTick=!0),this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(t){let n=t.value;(this.selected instanceof Zt||n&&!this._dateAdapter.sameDate(n,this.selected))&&this.selectedChange.emit(n),this._userSelection.emit(t)}_yearSelectedInMultiYearView(t){this.yearSelected.emit(t)}_monthSelectedInYearView(t){this.monthSelected.emit(t)}_goToDateInView(t,n){this.activeDate=t,this.currentView=n}_dragStarted(t){this._activeDrag=t}_dragEnded(t){this._activeDrag&&(t.value&&this._userDragDrop.emit(t),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-calendar"]],viewQuery:function(n,r){if(n&1&&(Be(QI,5),Be(ZI,5),Be(JI,5)),n&2){let s;we(s=be())&&(r.monthView=s.first),we(s=be())&&(r.yearView=s.first),we(s=be())&&(r.multiYearView=s.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[Ht([nD]),wt],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(n,r){if(n&1&&(Nt(0,DN,0,0,"ng-template",0),z(1,"div",1),Me(2,SN,1,11,"mat-month-view",2)(3,AN,1,6,"mat-year-view",3)(4,kN,1,6,"mat-multi-year-view",3),U()),n&2){let s;Q("cdkPortalOutlet",r._calendarHeaderPortal),N(2),Ve((s=r.currentView)==="month"?2:s==="year"?3:s==="multi-year"?4:-1)}},dependencies:[V_,Ay,QI,ZI,JI],styles:[`.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mat-button-text-label-text-color: var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return i})(),aD=new pe("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let i=S(De);return()=>ri(i)}});function UN(i){let e=S(De);return()=>ri(e)}var HN={provide:aD,deps:[],useFactory:UN},lD=(()=>{class i{_elementRef=S(ge);_animationsDisabled=pi();_changeDetectorRef=S(Et);_globalModel=S(ll);_dateAdapter=S(It);_ngZone=S(ne);_rangeSelectionStrategy=S(iD,{optional:!0});_stateChanges;_model;_eventCleanups;_animationFallback;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationDone=new ie;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){if(S(En).load(zl),this._closeButtonText=S(_o).closeCalendarLabel,!this._animationsDisabled){let t=this._elementRef.nativeElement,n=S(dt);this._eventCleanups=this._ngZone.runOutsideAngular(()=>[n.listen(t,"animationstart",this._handleAnimationEvent),n.listen(t,"animationend",this._handleAnimationEvent),n.listen(t,"animationcancel",this._handleAnimationEvent)])}}ngAfterViewInit(){this._stateChanges=this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._calendar.focusActiveCell()}ngOnDestroy(){clearTimeout(this._animationFallback),this._eventCleanups?.forEach(t=>t()),this._stateChanges?.unsubscribe(),this._animationDone.complete()}_handleUserSelection(t){let n=this._model.selection,r=t.value,s=n instanceof Zt;if(s&&this._rangeSelectionStrategy){let o=this._rangeSelectionStrategy.selectionFinished(r,n,t.event);this._model.updateSelection(o,this)}else r&&(s||!this._dateAdapter.sameDate(r,n))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(t){this._model.updateSelection(t.value,this)}_startExitAnimation(){this._elementRef.nativeElement.classList.add("mat-datepicker-content-exit"),this._animationsDisabled?this._animationDone.next():(clearTimeout(this._animationFallback),this._animationFallback=setTimeout(()=>{this._isAnimating||this._animationDone.next()},200))}_handleAnimationEvent=t=>{let n=this._elementRef.nativeElement;t.target!==n||!t.animationName.startsWith("_mat-datepicker-content")||(clearTimeout(this._animationFallback),this._isAnimating=t.type==="animationstart",n.classList.toggle("mat-datepicker-content-animating",this._isAnimating),this._isAnimating||this._animationDone.next())};_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(t,n){this._model=t?this._globalModel.clone():this._globalModel,this._actionsPortal=t,n&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-datepicker-content"]],viewQuery:function(n,r){if(n&1&&Be(q_,5),n&2){let s;we(s=be())&&(r._calendar=s.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:6,hostBindings:function(n,r){n&2&&(bh(r.color?"mat-"+r.color:""),Ae("mat-datepicker-content-touch",r.datepicker.touchUi)("mat-datepicker-content-animations-enabled",!r._animationsDisabled))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","matButton","elevated",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(n,r){n&1&&(z(0,"div",0)(1,"mat-calendar",1),ue("yearSelected",function(o){return r.datepicker._selectYear(o)})("monthSelected",function(o){return r.datepicker._selectMonth(o)})("viewChanged",function(o){return r.datepicker._viewChanged(o)})("_userSelection",function(o){return r._handleUserSelection(o)})("_userDragDrop",function(o){return r._handleUserDragDrop(o)}),U(),Nt(2,RN,0,0,"ng-template",2),z(3,"button",3),ue("focus",function(){return r._closeButtonFocused=!0})("blur",function(){return r._closeButtonFocused=!1})("click",function(){return r.datepicker.close()}),me(4),U()()),n&2&&(Ae("mat-datepicker-content-container-with-custom-header",r.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",r._actionsPortal),Se("aria-modal",!0)("aria-labelledby",r._dialogLabelId??void 0),N(),bh(r.datepicker.panelClass),Q("id",r.datepicker.id)("startAt",r.datepicker.startAt)("startView",r.datepicker.startView)("minDate",r.datepicker._getMinDate())("maxDate",r.datepicker._getMaxDate())("dateFilter",r.datepicker._getDateFilter())("headerComponent",r.datepicker.calendarHeaderComponent)("selected",r._getSelected())("dateClass",r.datepicker.dateClass)("comparisonStart",r.comparisonStart)("comparisonEnd",r.comparisonEnd)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName),N(),Q("cdkPortalOutlet",r._actionsPortal),N(),Ae("cdk-visually-hidden",!r._closeButtonFocused),Q("color",r.color||"primary"),N(),Ut(r._closeButtonText))},dependencies:[Ry,q_,V_,jo],styles:[`@keyframes _mat-datepicker-content-dropdown-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-dialog-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-exit{from{opacity:1}to{opacity:0}}.mat-datepicker-content{display:block;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dropdown-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.mat-datepicker-content-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dialog-enter 150ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}.mat-datepicker-content-exit.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-exit 100ms linear}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}
`],encapsulation:2,changeDetection:0})}return i})(),eD=(()=>{class i{_injector=S(De);_viewContainerRef=S(Yt);_dateAdapter=S(It,{optional:!0});_dir=S(an,{optional:!0});_model=S(ll);_animationsDisabled=pi();_scrollStrategy=S(aD);_inputStateChanges=yt.EMPTY;_document=S(Xe);calendarHeaderComponent;get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}_startAt;startView="month";get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(t){this._color=t}_color;touchUi=!1;get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(t){t!==this._disabled&&(this._disabled=t,this.stateChanges.next(void 0))}_disabled;xPosition="start";yPosition="below";restoreFocus=!0;yearSelected=new K;monthSelected=new K;viewChanged=new K(!0);dateClass;openedStream=new K;closedStream=new K;get panelClass(){return this._panelClass}set panelClass(t){this._panelClass=Oy(t)}_panelClass;get opened(){return this._opened}set opened(t){t?this.open():this.close()}_opened=!1;id=S(on).getId("mat-datepicker-");_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}_overlayRef;_componentRef;_focusedElementBeforeOpen=null;_backdropHarnessClass=`${this.id}-backdrop`;_actionsPortal;datepickerInput;stateChanges=new ie;_changeDetectorRef=S(Et);constructor(){this._dateAdapter,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(t){let n=t.xPosition||t.yPosition;if(n&&!n.firstChange&&this._overlayRef){let r=this._overlayRef.getConfig().positionStrategy;r instanceof co&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(t){this._model.add(t)}_selectYear(t){this.yearSelected.emit(t)}_selectMonth(t){this.monthSelected.emit(t)}_viewChanged(t){this.viewChanged.emit(t)}registerInput(t){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=t,this._inputStateChanges=t.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(t){this._actionsPortal,this._actionsPortal=t,this._componentRef?.instance._assignActions(t,!0)}removeActions(t){t===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=Ah(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let t=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",n=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:r,location:s}=this._componentRef;r._animationDone.pipe(tr(1)).subscribe(()=>{let o=this._document.activeElement;t&&(!o||o===this._document.activeElement||s.nativeElement.contains(o))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()}),r._startExitAnimation()}t?setTimeout(n):n()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(t){t.datepicker=this,t.color=this.color,t._dialogLabelId=this.datepickerInput.getOverlayLabelId(),t._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let t=this.touchUi,n=new Ki(lD,this._viewContainerRef),r=this._overlayRef=ho(this._injector,new lo({positionStrategy:t?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[t?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir||"ltr",scrollStrategy:t?Su(this._injector):this._scrollStrategy(),panelClass:`mat-datepicker-${t?"dialog":"popup"}`,disableAnimations:this._animationsDisabled}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{let o=s.keyCode;(o===38||o===40||o===37||o===39||o===33||o===34)&&s.preventDefault()}),this._componentRef=r.attach(n),this._forwardContentValues(this._componentRef.instance),t||yn(()=>{r.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return Au(this._injector).centerHorizontally().centerVertically()}_getDropdownStrategy(){let t=uo(this._injector,this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(t)}_setConnectedPositions(t){let n=this.xPosition==="end"?"end":"start",r=n==="start"?"end":"start",s=this.yPosition==="above"?"bottom":"top",o=s==="top"?"bottom":"top";return t.withPositions([{originX:n,originY:o,overlayX:n,overlayY:s},{originX:n,originY:s,overlayX:n,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:o}])}_getCloseStream(t){let n=["ctrlKey","shiftKey","metaKey"];return vn(t.backdropClick(),t.detachments(),t.keydownEvents().pipe(rt(r=>r.keyCode===27&&!Wn(r)||this.datepickerInput&&Wn(r,"altKey")&&r.keyCode===38&&n.every(s=>!Wn(r,s)))))}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",Xt],disabled:[2,"disabled","disabled",Xt],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",Xt],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",Xt]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[wt]})}return i})(),cD=(()=>{class i extends eD{static \u0275fac=(()=>{let t;return function(r){return(t||(t=di(i)))(r||i)}})();static \u0275cmp=de({type:i,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[Ht([nD,{provide:eD,useExisting:i}]),ns],decls:0,vars:0,template:function(n,r){},encapsulation:2,changeDetection:0})}return i})(),fo=class{target;targetElement;value;constructor(e,t){this.target=e,this.targetElement=t,this.value=this.target.value}},jN=(()=>{class i{_elementRef=S(ge);_dateAdapter=S(It,{optional:!0});_dateFormats=S(Yi,{optional:!0});_isInitialized;get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(t){this._assignValueProgrammatically(t)}_model;get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(t){let n=t,r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this.stateChanges.next(void 0)),n&&this._isInitialized&&r.blur&&r.blur()}_disabled;dateChange=new K;dateInput=new K;stateChanges=new ie;_onTouched=()=>{};_validatorOnChange=()=>{};_cvaOnChange=()=>{};_valueChangesSubscription=yt.EMPTY;_localeSubscription=yt.EMPTY;_pendingValue;_parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}};_filterValidator=t=>{let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t.value));return!n||this._matchesFilter(n)?null:{matDatepickerFilter:!0}};_minValidator=t=>{let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t.value)),r=this._getMinDate();return!r||!n||this._dateAdapter.compareDate(r,n)<=0?null:{matDatepickerMin:{min:r,actual:n}}};_maxValidator=t=>{let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t.value)),r=this._getMaxDate();return!r||!n||this._dateAdapter.compareDate(r,n)>=0?null:{matDatepickerMax:{max:r,actual:n}}};_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(t){this._model=t,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(n=>{if(this._shouldHandleChangeEvent(n)){let r=this._getValueFromModel(n.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new fo(this,this._elementRef.nativeElement)),this.dateChange.emit(new fo(this,this._elementRef.nativeElement))}})}_lastValueValid=!1;constructor(){this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(t){$N(t,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}writeValue(t){this._assignValueProgrammatically(t)}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){let n=["ctrlKey","shiftKey","metaKey"];Wn(t,"altKey")&&t.keyCode===40&&n.every(s=>!Wn(t,s))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),t.preventDefault())}_onInput(t){let n=t.target.value,r=this._lastValueValid,s=this._dateAdapter.parse(n,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(s),s=this._dateAdapter.getValidDateOrNull(s);let o=!this._dateAdapter.sameDate(s,this.value);!s||o?this._cvaOnChange(s):(n&&!this.value&&this._cvaOnChange(s),r!==this._lastValueValid&&this._validatorOnChange()),o&&(this._assignValue(s),this.dateInput.emit(new fo(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new fo(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t!=null?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_assignValue(t){this._model?(this._assignValueToModel(t),this._pendingValue=null):this._pendingValue=t}_isValidValue(t){return!t||this._dateAdapter.isValid(t)}_parentDisabled(){return!1}_assignValueProgrammatically(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=this._isValidValue(t),t=this._dateAdapter.getValidDateOrNull(t),this._assignValue(t),this._formatValue(t)}_matchesFilter(t){let n=this._getDateFilter();return!n||n(t)}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,inputs:{value:"value",disabled:[2,"disabled","disabled",Xt]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[wt]})}return i})();function $N(i,e){let t=Object.keys(i);for(let n of t){let{previousValue:r,currentValue:s}=i[n];if(e.isDateInstance(r)&&e.isDateInstance(s)){if(!e.sameDate(r,s))return!0}else return!0}return!1}var WN={provide:Ly,useExisting:Rl(()=>Vu),multi:!0},qN={provide:zy,useExisting:Rl(()=>Vu),multi:!0},Vu=(()=>{class i extends jN{_formField=S(io,{optional:!0});_closedSubscription=yt.EMPTY;_openedSubscription=yt.EMPTY;set matDatepicker(t){t&&(this._datepicker=t,this._ariaOwns.set(t.opened?t.id:null),this._closedSubscription=t.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=t.openedStream.subscribe(()=>{this._ariaOwns.set(t.id)}),this._registerModel(t.registerInput(this)))}_datepicker;_ariaOwns=Oe(null);get min(){return this._min}set min(t){let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(n,this._min)||(this._min=n,this._validatorOnChange())}_min;get max(){return this._max}set max(t){let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(n,this._max)||(this._max=n,this._validatorOnChange())}_max;get dateFilter(){return this._dateFilter}set dateFilter(t){let n=this._matchesFilter(this.value);this._dateFilter=t,this._matchesFilter(this.value)!==n&&this._validatorOnChange()}_dateFilter;_validator;constructor(){super(),this._validator=gi.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(t){return t}_assignValueToModel(t){this._model&&this._model.updateSelection(t,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(t){return t.source!==this}static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(n,r){n&1&&ue("input",function(o){return r._onInput(o)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)}),n&2&&(ss("disabled",r.disabled),Se("aria-haspopup",r._datepicker?"dialog":null)("aria-owns",r._ariaOwns())("min",r.min?r._dateAdapter.toIso8601(r.min):null)("max",r.max?r._dateAdapter.toIso8601(r.max):null)("data-mat-calendar",r._datepicker?r._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[Ht([WN,qN,{provide:gu,useExisting:i}]),ns]})}return i})(),GN=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=ye({type:i,selectors:[["","matDatepickerToggleIcon",""]]})}return i})(),K_=(()=>{class i{_intl=S(_o);_changeDetectorRef=S(Et);_stateChanges=yt.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=t}_disabled;disableRipple;_customIcon;_button;constructor(){let t=S(new vy("tabindex"),{optional:!0}),n=Number(t);this.tabIndex=n||n===0?n:null}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){let t=this.datepicker?this.datepicker.stateChanges:zn(),n=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:zn(),r=this.datepicker?vn(this.datepicker.openedStream,this.datepicker.closedStream):zn();this._stateChanges.unsubscribe(),this._stateChanges=vn(this._intl.changes,t,n,r).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=de({type:i,selectors:[["mat-datepicker-toggle"]],contentQueries:function(n,r,s){if(n&1&&ui(s,GN,5),n&2){let o;we(o=be())&&(r._customIcon=o.first)}},viewQuery:function(n,r){if(n&1&&Be(xN,5),n&2){let s;we(s=be())&&(r._button=s.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(n,r){n&1&&ue("click",function(o){return r._open(o)}),n&2&&(Se("tabindex",null)("data-mat-calendar",r.datepicker?r.datepicker.id:null),Ae("mat-datepicker-toggle-active",r.datepicker&&r.datepicker.opened)("mat-accent",r.datepicker&&r.datepicker.color==="accent")("mat-warn",r.datepicker&&r.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Xt],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[wt],ngContentSelectors:ON,decls:4,vars:7,consts:[["button",""],["matIconButton","","type","button",3,"tabIndex","disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(n,r){n&1&&(rr(PN),z(0,"button",1,0),Me(2,MN,2,0,":svg:svg",2),kt(3),U()),n&2&&(Q("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled)("disableRipple",r.disableRipple),Se("aria-haspopup",r.datepicker?"dialog":null)("aria-label",r.ariaLabel||r._intl.openCalendarLabel)("aria-expanded",r.datepicker?r.datepicker.opened:null),N(2),Ve(r._customIcon?-1:2))},dependencies:[Oh],styles:[`.mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle button{color:inherit}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}
`],encapsulation:2,changeDetection:0})}return i})();var dD=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=We({type:i});static \u0275inj=$e({providers:[_o,HN],imports:[Ul,L_,xy,wu,fi,lD,K_,oD,tl]})}return i})();var KN=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/,XN=/^(\d?\d)[:.](\d?\d)(?:[:.](\d?\d))?\s*(AM|PM)?$/i;function X_(i,e){let t=Array(i);for(let n=0;n<i;n++)t[n]=e(n);return t}var QN=(()=>{class i extends It{useUtcForDisplay=!1;_matDateLocale=S(x_,{optional:!0});constructor(){super();let t=S(x_,{optional:!0});t!==void 0&&(this._matDateLocale=t),super.setLocale(this._matDateLocale)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){let n=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return X_(12,r=>this._format(n,new Date(2017,r,1)))}getDateNames(){let t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return X_(31,n=>this._format(t,new Date(2017,0,n+1)))}getDayOfWeekNames(t){let n=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return X_(7,r=>this._format(n,new Date(2017,0,r+1)))}getYearName(t){let n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(n,t)}getFirstDayOfWeek(){if(typeof Intl<"u"&&Intl.Locale){let t=new Intl.Locale(this.locale),n=(t.getWeekInfo?.()||t.weekInfo)?.firstDay??0;return n===7?0:n}return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,n,r){let s=this._createDateWithOverflow(t,n,r);return s.getMonth()!=n,s}today(){return new Date}parse(t,n){return typeof t=="number"?new Date(t):t?new Date(Date.parse(t)):null}format(t,n){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");let r=new Intl.DateTimeFormat(this.locale,_n(it({},n),{timeZone:"utc"}));return this._format(r,t)}addCalendarYears(t,n){return this.addCalendarMonths(t,n*12)}addCalendarMonths(t,n){let r=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+n,this.getDate(t));return this.getMonth(r)!=((this.getMonth(t)+n)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(t,n){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+n)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if(typeof t=="string"){if(!t)return null;if(KN.test(t)){let n=new Date(t);if(this.isValid(n))return n}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}setTime(t,n,r,s){let o=this.clone(t);return o.setHours(n,r,s,0),o}getHours(t){return t.getHours()}getMinutes(t){return t.getMinutes()}getSeconds(t){return t.getSeconds()}parseTime(t,n){if(typeof t!="string")return t instanceof Date?new Date(t.getTime()):null;let r=t.trim();if(r.length===0)return null;let s=this._parseTimeString(r);if(s===null){let o=r.replace(/[^0-9:(AM|PM)]/gi,"").trim();o.length>0&&(s=this._parseTimeString(o))}return s||this.invalid()}addSeconds(t,n){return new Date(t.getTime()+n*1e3)}_createDateWithOverflow(t,n,r){let s=new Date;return s.setFullYear(t,n,r),s.setHours(0,0,0,0),s}_2digit(t){return("00"+t).slice(-2)}_format(t,n){let r=new Date;return r.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t.format(r)}_parseTimeString(t){let n=t.toUpperCase().match(XN);if(n){let r=parseInt(n[1]),s=parseInt(n[2]),o=n[3]==null?void 0:parseInt(n[3]),l=n[4];if(r===12?r=l==="AM"?0:r:l==="PM"&&(r+=12),Q_(r,0,23)&&Q_(s,0,59)&&(o==null||Q_(o,0,59)))return this.setTime(this.today(),r,s,o||0)}return null}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac})}return i})();function Q_(i,e,t){return!isNaN(i)&&i>=e&&i<=t}var JN={parse:{dateInput:null,timeInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},timeInput:{hour:"numeric",minute:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"},timeOptionLabel:{hour:"numeric",minute:"numeric"}}};function uD(i=JN){return[{provide:It,useClass:QN},{provide:Yi,useValue:i}]}var Nu=class i{constructor(e,t,n){this.fb=e;this.store=t;this.router=n}reminderForm;error$;ngOnInit(){this.reminderForm=this.fb.group({title:["",gi.required],petName:["",gi.required],startTime:["",gi.required]}),this.error$=this.store.select(bw)}onSubmit(){if(this.reminderForm.invalid)return;let e=this.reminderForm.value,t={title:e.title,petName:e.petName,startTime:Re.fromDate(e.startTime)};console.log("trying to add reminder: ",e),this.store.dispatch(cI.add({appointment:t})),this.router.navigate(["/calendar"])}static \u0275fac=function(t){return new(t||i)(ir(Wy),ir(jl),ir(Cy))};static \u0275cmp=de({type:i,selectors:[["app-add-reminder"]],features:[Ht([uD()])],decls:22,vars:5,consts:[["picker",""],["pageTitle","Neuen Termin anlegen","routerLink","/calendar"],[1,"reminder-form-card"],[1,"reminder-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","title"],["matInput","","formControlName","petName"],["matInput","","formControlName","startTime",3,"matDatepicker"],["matIconSuffix","",3,"for"],[1,"form-actions"],["matButton","elevated","color","primary","type","submit",3,"disabled"]],template:function(t,n){if(t&1){let r=at();_e(0,"app-title",1),z(1,"mat-card",2)(2,"form",3),ue("ngSubmit",function(){return oe(r),ae(n.onSubmit())}),z(3,"mat-form-field",4)(4,"mat-label"),me(5,"Titel"),U(),_e(6,"input",5),U(),z(7,"mat-form-field",4)(8,"mat-label"),me(9,"Zugeh\xF6riges Haustier"),U(),_e(10,"input",6),U(),z(11,"mat-form-field",4)(12,"mat-label"),me(13,"Start"),U(),_e(14,"input",7)(15,"mat-datepicker-toggle",8)(16,"mat-datepicker",null,0),U(),me(18),z(19,"div",9)(20,"button",10),me(21," Termin "),U()()()()}if(t&2){let r=Kt(17);N(2),Q("formGroup",n.reminderForm),N(12),Q("matDatepicker",r),N(),Q("for",r),N(3),wn(" ",n.error$," "),N(2),Q("disabled",n.reminderForm.invalid)}},dependencies:[Hl,Fy,Ul,jo,ro,el,Ja,R_,kI,AI,dD,cD,Vu,K_,qy,jy,By,Uy,Hy,$o,$y],styles:[".reminder-form-card[_ngcontent-%COMP%]{margin:2rem auto;padding:2rem}.reminder-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})};var ZN=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:fu},{path:"details",component:pu},{path:"add",component:Nu}],hD=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=We({type:i});static \u0275inj=$e({imports:[Sh.forChild(ZN),Sh]})};export{Yo as a,LF as b,yw as c,jF as d,BL as e,zL as f,_r as g,dB as h,uB as i,hB as j,fB as k,pB as l,mB as m,Re as n,Hr as o,qz as p,Gz as q,Yz as r,Kz as s,Xz as t,Qz as u,a_ as v,Jz as w,Zz as x,l_ as y,eU as z,IU as A,DU as B,hu as C,cI as D,Ja as E,R_ as F,el as G,ro as H,AI as I,kI as J,cD as K,Vu as L,K_ as M,dD as N,uD as O,hD as P};
