import{a as I}from"./chunk-TIK4CJX7.js";import{U as ae,c as ke,d as G,e as Fe,f as Ee,fa as F,g as Q,h as W,i as X,j as Y,k as Z,l as ee,m as te,n as ie,o as re,p as oe,q as ne}from"./chunk-N4R2D4AS.js";import{a as me}from"./chunk-37JGKMDG.js";import{$ as N,$a as r,Ad as Ne,B as Ce,Da as d,Ed as L,F as P,Fb as O,Gd as M,Ha as c,Ia as E,Id as $,Jd as q,Ld as H,Md as z,Na as Me,Nd as U,Ob as S,Od as J,Pb as D,Pd as K,Ua as Ie,Wa as _e,Ya as Pe,Za as Se,_a as l,ab as i,bb as s,ed as V,fd as y,gb as b,gd as j,ha as f,hd as h,ia as v,ib as u,jb as w,jc as R,kc as De,mc as ye,qc as A,qd as C,sc as g,tb as T,tc as B,wc as be,wd as k,xb as a,xd as xe,za as p,zb as _,zd as we}from"./chunk-QHXVKW2R.js";var pe=class n{pet;select=new Me;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-pet-card"]],inputs:{pet:"pet"},outputs:{select:"select"},decls:9,vars:2,consts:[["appearance","outlined",1,"pet-card",3,"click"],[1,"pet-card-content"],[1,"pet-info"]],template:function(t,o){t&1&&(r(0,"mat-card",0),u("click",function(){return o.select.emit(o.pet.id)}),r(1,"div",1)(2,"div",2)(3,"mat-card-title"),a(4),i(),r(5,"mat-card-subtitle"),a(6),i()(),r(7,"mat-icon"),a(8,"chevron_right"),i()()()),t&2&&(p(4),_(" ",o.pet.name," "),p(2),_(" ",o.pet.species," "))},dependencies:[Ne,k,we,xe,j],styles:[".pet-card[_ngcontent-%COMP%]{background-color:var(--background-color)}.pet-card-content[_ngcontent-%COMP%]{display:flex;padding-left:1rem;justify-content:space-between;align-items:center}"]})};var Oe=(n,e)=>e.id;function Re(n,e){if(n&1){let t=b();r(0,"app-pet-card",5),u("click",function(){let m=f(t).$implicit,ve=w();return v(ve.openPet(m))}),i()}if(n&2){let t=e.$implicit;l("pet",t)}}var de=class n{constructor(e,t){this.router=e;this.store=t}pets$;userId;ngOnInit(){this.store.select(me).pipe(P(1)).subscribe(e=>{e&&(this.userId=e.id)}),this.store.dispatch(I.loadPets({userId:this.userId})),this.store.dispatch(Ee.load({userId:this.userId})),this.pets$=this.store.select(ke)}openPet(e){this.router.navigate(["/dashboard/details",e.id])}addPet(){this.router.navigate(["/dashboard/add"])}static \u0275fac=function(t){return new(t||n)(d(g),d(C))};static \u0275cmp=c({type:n,selectors:[["app-overview"]],decls:7,vars:2,consts:[[1,"dashboard"],[1,"header"],["pageTitle","Meine Haustiere","additionalButton","/dashboard/add","iconSlot","add"],[1,"pet-grid"],[3,"pet"],[3,"click","pet"]],template:function(t,o){t&1&&(r(0,"section",0)(1,"div",1),s(2,"app-title",2),i(),r(3,"div",3),Pe(4,Re,1,1,"app-pet-card",4,Oe),S(6,"async"),i()()),t&2&&(p(4),Se(D(6,0,o.pets$)))},dependencies:[y,pe,F,h,R],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-bottom:1rem}.pet-grid[_ngcontent-%COMP%]{display:grid;gap:.5rem}.add-btn[_ngcontent-%COMP%]{background-color:var(--secondary-color);color:var(--text-primary)}"]})};function Ae(n,e){if(n&1){let t=b();r(0,"section",0),s(1,"app-title",1),S(2,"async"),s(3,"mat-divider"),r(4,"div",2)(5,"p"),a(6),i(),r(7,"p"),a(8),i(),r(9,"p"),a(10),S(11,"date"),i()(),s(12,"div",3),r(13,"button",4),u("click",function(){f(t);let m=w();return v(m.onDelete())}),r(14,"mat-icon"),a(15,"delete"),i()()()}if(n&2){let t,o=e,m=w();p(),l("pageTitle",o.name||"Details")("additionalButton","/dashboard/edit/"+(((t=D(2,5,m.pet$))==null?null:t.id)??"")),p(5),_("Spezies: ",o.species),p(2),_("Rasse: ",o.breed),p(2),_("Geburtstag: ",D(11,7,o.birthDate.toDate()))}}var le=class n{constructor(e,t,o){this.route=e;this.store=t;this.router=o}id;pet$;ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.id&&(this.pet$=this.store.select(G(this.id)))}onDelete(){this.store.dispatch(I.deletePet({petId:this.id})),this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)(d(A),d(C),d(g))};static \u0275cmp=c({type:n,selectors:[["app-detail"]],decls:2,vars:3,consts:[[1,"pet-detail"],["routerLink","/dashboard","iconSlot","edit",3,"pageTitle","additionalButton"],[1,"info"],[1,"detailed-information"],["mat-icon-button","","color","warn","aria-label","Termin l\xF6schen",3,"click"]],template:function(t,o){if(t&1&&(Ie(0,Ae,16,9,"section",0),S(1,"async")),t&2){let m;_e((m=D(1,1,o.pet$))?0:-1,m)}},dependencies:[h,Fe,j,R,De],encapsulation:2})};var ce=class n{constructor(e,t,o){this.fb=e;this.store=t;this.router=o}petForm;userId;ngOnInit(){this.petForm=this.fb.group({name:["",M.required],species:["",M.required],breed:[""],birthDate:["",M.required]}),this.store.select(me).pipe(P(1)).subscribe(e=>{e&&(this.userId=e.id)})}onSubmit(){if(this.petForm.invalid||!this.userId)return;let e=this.petForm.value,t={name:e.name,species:e.species,breed:e.breed,birthDate:ae.fromDate(e.birthDate)};console.log(this.userId);let o=this.petForm.value;this.store.dispatch(I.addPet({userId:this.userId,pet:e})),this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)(d(J),d(C),d(g))};static \u0275cmp=c({type:n,selectors:[["app-add-pet"]],features:[O([ne()])],decls:25,vars:4,consts:[["picker",""],["pageTitle","Neues Tier anlegen","routerLink","/dashboard"],[1,"pet-form-card"],[1,"pet-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","name"],["matInput","","formControlName","species"],["matInput","","formControlName","breed"],["matInput","","formControlName","birthDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],[1,"form-actions"],["matButton","elevated","color","primary","type","submit",3,"disabled"]],template:function(t,o){if(t&1){let m=b();s(0,"app-title",1),r(1,"mat-card",2)(2,"form",3),u("ngSubmit",function(){return f(m),v(o.onSubmit())}),r(3,"mat-form-field",4)(4,"mat-label"),a(5,"Name"),i(),s(6,"input",5),i(),r(7,"mat-form-field",4)(8,"mat-label"),a(9,"Art des Tieres"),i(),s(10,"input",6),i(),r(11,"mat-form-field",4)(12,"mat-label"),a(13,"Rasse"),i(),s(14,"input",7),i(),r(15,"mat-form-field",4)(16,"mat-label"),a(17,"Geburtsdatum"),i(),s(18,"input",8)(19,"mat-datepicker-toggle",9)(20,"mat-datepicker",null,0),i(),r(22,"div",10)(23,"button",11),a(24," Haustier hinzuf\xFCgen "),i()()()()}if(t&2){let m=T(21);p(2),l("formGroup",o.petForm),p(16),l("matDatepicker",m),p(),l("for",m),p(4),l("disabled",o.petForm.invalid)}},dependencies:[K,H,L,$,q,z,U,F,B,h,k,Y,X,Q,W,ee,Z,y,V,oe,te,ie,re],styles:[".pet-form-card[_ngcontent-%COMP%]{margin:2rem auto;padding:2rem}.pet-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})};var ue=class n{constructor(e,t,o,m){this.fb=e;this.store=t;this.router=o;this.route=m}petForm;petId;ngOnInit(){this.petId=this.route.snapshot.paramMap.get("id"),this.store.select(G(this.petId)).pipe(Ce(e=>!!e),P(1)).subscribe(e=>{this.petForm=this.fb.group({name:[e.name,M.required],species:[e.species,M.required],breed:[e.breed],birthDate:[e.birthDate.toDate(),M.required]})})}onSubmit(){if(this.petForm.invalid)return;let e=this.petForm.value,t={id:this.petId,name:e.name,species:e.species,breed:e.breed,birthDate:ae.fromDate(e.birthDate)};this.store.dispatch(I.updatePet({pet:t})),this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||n)(d(J),d(C),d(g),d(A))};static \u0275cmp=c({type:n,selectors:[["app-edit"]],features:[O([ne()])],decls:25,vars:5,consts:[["picker",""],["pageTitle","Bearbeiten",3,"routerLink"],[1,"pet-form-card"],[1,"pet-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","name"],["matInput","","formControlName","species"],["matInput","","formControlName","breed"],["matInput","","formControlName","birthDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],[1,"form-actions"],["matButton","elevated","color","primary","type","submit",3,"disabled"]],template:function(t,o){if(t&1){let m=b();s(0,"app-title",1),r(1,"mat-card",2)(2,"form",3),u("ngSubmit",function(){return f(m),v(o.onSubmit())}),r(3,"mat-form-field",4)(4,"mat-label"),a(5,"Name"),i(),s(6,"input",5),i(),r(7,"mat-form-field",4)(8,"mat-label"),a(9,"Art des Tieres"),i(),s(10,"input",6),i(),r(11,"mat-form-field",4)(12,"mat-label"),a(13,"Rasse"),i(),s(14,"input",7),i(),r(15,"mat-form-field",4)(16,"mat-label"),a(17,"Geburtsdatum"),i(),s(18,"input",8)(19,"mat-datepicker-toggle",9)(20,"mat-datepicker",null,0),i(),r(22,"div",10)(23,"button",11),a(24," Haustier Aktualisieren "),i()()()()}if(t&2){let m=T(21);l("routerLink","/dashboard/details/"+o.petId),p(2),l("formGroup",o.petForm),p(16),l("matDatepicker",m),p(),l("for",m),p(4),l("disabled",o.petForm.invalid)}},dependencies:[K,H,L,$,q,z,U,F,B,h,k,Y,X,Q,W,ee,Z,y,V,oe,te,ie,re],styles:[".pet-form-card[_ngcontent-%COMP%]{margin:2rem auto;padding:2rem}.pet-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})};var $e=[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:de,data:{title:"PetCheck",subtitle:"Meine Haustiere",returnLink:""}},{path:"details/:id",component:le,data:{title:"PetCheck",subtitle:"Details",returnLink:"/overview"}},{path:"edit/:id",component:ue,data:{title:"PetCheck",subtitle:"Edit",returnLink:"/details"}},{path:"add",component:ce,data:{title:"PetCheck",subtitle:"Hinzuf\xFCgen",returnLink:"/overview"}}],fe=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=E({type:n});static \u0275inj=N({imports:[be.forChild($e),be]})};var Te=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=E({type:n});static \u0275inj=N({imports:[ye,fe]})};export{Te as DashboardModule};
